webpackJsonp([0],{

/***/ 114:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _BaseRenderer = __webpack_require__(4);\n\nvar _BaseRenderer2 = _interopRequireDefault(_BaseRenderer);\n\nvar _OrbitControls = __webpack_require__(3);\n\nvar _OrbitControls2 = _interopRequireDefault(_OrbitControls);\n\nvar _three = __webpack_require__(1);\n\nvar THREE = _interopRequireWildcard(_three);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULT_FOCUS = 'earth';\n\nfunction CameraViewRenderer(container, textureLoader) {\n\n  _BaseRenderer2.default.call(this, textureLoader);\n\n  this.renderer = new THREE.WebGLRenderer({\n    antialias: true,\n    alpha: true\n  });\n  this.renderer.setPixelRatio(window.devicePixelRatio);\n  this.container = container;\n  container.appendChild(this.renderer.domElement);\n\n  this.focus = DEFAULT_FOCUS;\n  this.bodyMap = new Map();\n};\n\n/**\n * Use this lifeycle method to add event listeners\n */\nCameraViewRenderer.prototype.viewDidLoad = function (solarSystem) {\n  var _this = this;\n\n  return Promise.all([this._loadTextures()]).then(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 1),\n        textures = _ref2[0];\n\n    // Find the body we are focusing on\n    var focus = solarSystem.planets.find(function (planet) {\n      return planet.name === _this.focus;\n    });\n\n    _this.scene = new THREE.Scene();\n    _this.scene.background = new THREE.Color('black');\n\n    var skybox = _this._createSkyBox(textures);\n    _this.scene.add(skybox);\n\n    var lightSources = _this._setupLightSources(textures);\n    _this.lightSources = lightSources;\n\n    var width = window.innerWidth;\n    var height = window.innerHeight;\n\n    // initialize camera and scene\n    _this.camera = new THREE.PerspectiveCamera(45, width / height, 1e-10, 2);\n    _this.camera.up = new THREE.Vector3(0, 0, 1); // make 'z' be the UP direction\n\n    // Setup recenter function and immediately call it\n    _this.recenter = function () {\n      var focus = solarSystem.planets.find(function (planet) {\n        return planet.name === _this.focus;\n      });\n      _this.camera.position.set(0, -5 * focus.constants.radius, 0);\n      _this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n    };\n    _this.recenter();\n\n    // Allow user to toggle between planets\n    var onTogglePlanets = function onTogglePlanets(event) {\n      if (event.type === 'keypress' && [91, 93].includes(event.keyCode)) {\n        var focusIdx = solarSystem.planets.findIndex(function (p) {\n          return p.name === _this.focus;\n        });\n\n        if (event.keyCode === 91) {\n          focusIdx--;\n          if (focusIdx < 0) focusIdx = solarSystem.planets.length - 1;\n        } else {\n          focusIdx = (focusIdx + 1) % solarSystem.planets.length;\n        }\n\n        _this.focus = solarSystem.planets[focusIdx].name;\n        console.log('new focus: ' + _this.focus);\n        _this.orbitControls.minDistance = solarSystem.planets[focusIdx].constants.radius;\n        _this.recenter();\n      }\n    };\n\n    var onWindowResize = _this._onWindowResize(height, _this.camera.fov);\n\n    /**\n     * Setup lifecycle methods for registering/deregistering event listeners\n     */\n\n    _this.viewWillAppear = function () {\n      var focus = solarSystem.planets.find(function (p) {\n        return p.name === _this.focus;\n      });\n\n      _this.orbitControls = new _OrbitControls2.default(_this.camera, _this.renderer.domElement);\n      _this.orbitControls.minDistance = focus.constants.radius * 1.1;\n      _this.orbitControls.maxDistance = focus.constants.radius * 100;\n      addEventListener(\"keypress\", onTogglePlanets);\n      addEventListener(\"resize\", onWindowResize, false);\n\n      onWindowResize();\n    };\n\n    _this.viewWillDisappear = function () {\n      removeEventListener(\"resize\", onWindowResize, false);\n      removeEventListener(\"keypress\", onTogglePlanets);\n      _this.orbitControls.dispose();\n      _this.orbitControls = null;\n    };\n\n    /**\n     * Create THREE objects for each of our bodies and add to the scene\n     */\n    solarSystem.planets.forEach(function (planet) {\n\n      if (planet.name === 'sun') {\n        return;\n      }\n\n      var threeBody = new THREE.Mesh(new THREE.SphereGeometry(planet.constants.radius, 32, 32), new THREE.MeshStandardMaterial({\n        map: textures.get(planet.name)\n      }));\n\n      _this.scene.add(threeBody);\n      _this.bodyMap.set(planet.name, threeBody);\n    });\n\n    return Promise.resolve();\n  });\n};\n\n/**\n * Render the given solar system\n */\nCameraViewRenderer.prototype.render = function (solarSystem) {\n  var _this2 = this;\n\n  // Find the body we are focusing on\n  var focus = solarSystem.planets.find(function (planet) {\n    return planet.name === _this2.focus;\n  });\n\n  // Update light sources\n  var sun = solarSystem.planets.find(function (planet) {\n    return planet.name === 'sun';\n  });\n  this.lightSources.forEach(function (light) {\n    light.position.copy(_this2._adjustCoordinates(focus, sun.derived.position));\n  });\n\n  // Update the positions of all of our bodies\n  solarSystem.planets.forEach(function (planet) {\n\n    if (planet.name === 'sun') {\n      return;\n    }\n\n    var threeBody = _this2.bodyMap.get(planet.name);\n    var derived = planet.derived;\n\n    // Adjust position to re-center the coordinate system on the focus\n    var position = _this2._adjustCoordinates(focus, derived.position);\n    threeBody.position.set(position.x, position.y, position.z);\n\n    // Adjust orbital tilt and rotation.  First, rotate the body using the same\n    // set of transforms we use to transform to ecliptic.  Then, apply the axial tilt,\n    // and the accumulated rotation around the axis ('derived.rotation');\n    threeBody.rotation.set(0, 0, 0);\n    threeBody.rotateZ(derived.omega);\n    threeBody.rotateX(derived.I);\n    threeBody.rotateZ(derived.argumentPerihelion);\n    threeBody.rotateOnAxis(new THREE.Vector3(1, 0, 0), Math.PI / 2);\n    threeBody.rotateOnAxis(new THREE.Vector3(1, 0, 0), -(planet.constants.axial_tilt || 0) * Math.PI / 180);\n    threeBody.rotateY(derived.rotation);\n  });\n\n  this.renderer.render(this.scene, this.camera);\n};\n\n/**\n * Recenter the coordinate system on the focus being the 'center'.\n */\nCameraViewRenderer.prototype._adjustCoordinates = function (focus, position) {\n\n  if (!focus) return position.clone();\n\n  var coordinates = position.clone().sub(focus.derived.position);\n\n  return coordinates;\n};\n\n// Inherit from BaseRenderer\nObject.assign(CameraViewRenderer.prototype, _BaseRenderer2.default.prototype);\n\nexports.default = CameraViewRenderer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9hcHAvQ2FtZXJhVmlld1JlbmRlcmVyLmpzP2ZlOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VSZW5kZXJlciBmcm9tICcuL0Jhc2VSZW5kZXJlcic7XG5pbXBvcnQgT3JiaXRDb250cm9scyBmcm9tICcuL2xpYi9PcmJpdENvbnRyb2xzJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuY29uc3QgREVGQVVMVF9GT0NVUyA9ICdlYXJ0aCc7XG5cbmZ1bmN0aW9uIENhbWVyYVZpZXdSZW5kZXJlcihjb250YWluZXIsIHRleHR1cmVMb2FkZXIpIHtcblxuICBCYXNlUmVuZGVyZXIuY2FsbCh0aGlzLCB0ZXh0dXJlTG9hZGVyKTtcblxuICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoe1xuICAgIGFudGlhbGlhczogdHJ1ZSxcbiAgICBhbHBoYTogdHJ1ZVxuICB9KTtcbiAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gIHRoaXMuZm9jdXMgPSBERUZBVUxUX0ZPQ1VTO1xuICB0aGlzLmJvZHlNYXAgPSBuZXcgTWFwKCk7XG59O1xuXG4vKipcbiAqIFVzZSB0aGlzIGxpZmV5Y2xlIG1ldGhvZCB0byBhZGQgZXZlbnQgbGlzdGVuZXJzXG4gKi9cbkNhbWVyYVZpZXdSZW5kZXJlci5wcm90b3R5cGUudmlld0RpZExvYWQgPSBmdW5jdGlvbiAoc29sYXJTeXN0ZW0pIHtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5fbG9hZFRleHR1cmVzKCksXG4gICAgXSlcbiAgICAudGhlbigoW3RleHR1cmVzXSkgPT4ge1xuXG4gICAgICAvLyBGaW5kIHRoZSBib2R5IHdlIGFyZSBmb2N1c2luZyBvblxuICAgICAgY29uc3QgZm9jdXMgPSBzb2xhclN5c3RlbS5wbGFuZXRzLmZpbmQoKHBsYW5ldCkgPT4gcGxhbmV0Lm5hbWUgPT09IHRoaXMuZm9jdXMpO1xuXG4gICAgICB0aGlzLnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gICAgICB0aGlzLnNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoJ2JsYWNrJyk7XG5cbiAgICAgIGNvbnN0IHNreWJveCA9IHRoaXMuX2NyZWF0ZVNreUJveCh0ZXh0dXJlcyk7XG4gICAgICB0aGlzLnNjZW5lLmFkZChza3lib3gpO1xuXG4gICAgICBjb25zdCBsaWdodFNvdXJjZXMgPSB0aGlzLl9zZXR1cExpZ2h0U291cmNlcyh0ZXh0dXJlcyk7XG4gICAgICB0aGlzLmxpZ2h0U291cmNlcyA9IGxpZ2h0U291cmNlcztcblxuICAgICAgbGV0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBsZXQgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAvLyBpbml0aWFsaXplIGNhbWVyYSBhbmQgc2NlbmVcbiAgICAgIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aWR0aCAvIGhlaWdodCwgMWUtMTAsIDIpO1xuICAgICAgdGhpcy5jYW1lcmEudXAgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKTsgLy8gbWFrZSAneicgYmUgdGhlIFVQIGRpcmVjdGlvblxuXG4gICAgICAvLyBTZXR1cCByZWNlbnRlciBmdW5jdGlvbiBhbmQgaW1tZWRpYXRlbHkgY2FsbCBpdFxuICAgICAgdGhpcy5yZWNlbnRlciA9ICgpID0+IHtcbiAgICAgICAgbGV0IGZvY3VzID0gc29sYXJTeXN0ZW0ucGxhbmV0cy5maW5kKChwbGFuZXQpID0+IHBsYW5ldC5uYW1lID09PSB0aGlzLmZvY3VzKTtcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24uc2V0KDAsIC01ICogZm9jdXMuY29uc3RhbnRzLnJhZGl1cywgMCk7XG4gICAgICAgIHRoaXMuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5yZWNlbnRlcigpO1xuXG4gICAgICAvLyBBbGxvdyB1c2VyIHRvIHRvZ2dsZSBiZXR3ZWVuIHBsYW5ldHNcbiAgICAgIGNvbnN0IG9uVG9nZ2xlUGxhbmV0cyA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleXByZXNzJyAmJiBbOTEsIDkzXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgICAgIGxldCBmb2N1c0lkeCA9IHNvbGFyU3lzdGVtLnBsYW5ldHMuZmluZEluZGV4KChwKSA9PiBwLm5hbWUgPT09IHRoaXMuZm9jdXMpO1xuXG4gICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDkxKSB7XG4gICAgICAgICAgICBmb2N1c0lkeC0tO1xuICAgICAgICAgICAgaWYgKGZvY3VzSWR4IDwgMClcbiAgICAgICAgICAgICAgZm9jdXNJZHggPSBzb2xhclN5c3RlbS5wbGFuZXRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvY3VzSWR4ID0gKGZvY3VzSWR4ICsgMSkgJSBzb2xhclN5c3RlbS5wbGFuZXRzLmxlbmd0aDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmZvY3VzID0gc29sYXJTeXN0ZW0ucGxhbmV0c1tmb2N1c0lkeF0ubmFtZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgbmV3IGZvY3VzOiAke3RoaXMuZm9jdXN9YCk7XG4gICAgICAgICAgdGhpcy5vcmJpdENvbnRyb2xzLm1pbkRpc3RhbmNlID0gc29sYXJTeXN0ZW0ucGxhbmV0c1tmb2N1c0lkeF0uY29uc3RhbnRzLnJhZGl1cztcbiAgICAgICAgICB0aGlzLnJlY2VudGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG9uV2luZG93UmVzaXplID0gdGhpcy5fb25XaW5kb3dSZXNpemUoaGVpZ2h0LCB0aGlzLmNhbWVyYS5mb3YpO1xuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGxpZmVjeWNsZSBtZXRob2RzIGZvciByZWdpc3RlcmluZy9kZXJlZ2lzdGVyaW5nIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICovXG5cbiAgICAgIHRoaXMudmlld1dpbGxBcHBlYXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvY3VzID0gc29sYXJTeXN0ZW0ucGxhbmV0cy5maW5kKChwKSA9PiBwLm5hbWUgPT09IHRoaXMuZm9jdXMpO1xuXG4gICAgICAgIHRoaXMub3JiaXRDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKHRoaXMuY2FtZXJhLCB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICB0aGlzLm9yYml0Q29udHJvbHMubWluRGlzdGFuY2UgPSBmb2N1cy5jb25zdGFudHMucmFkaXVzICogMS4xO1xuICAgICAgICB0aGlzLm9yYml0Q29udHJvbHMubWF4RGlzdGFuY2UgPSBmb2N1cy5jb25zdGFudHMucmFkaXVzICogMTAwO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgb25Ub2dnbGVQbGFuZXRzKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvbldpbmRvd1Jlc2l6ZSwgZmFsc2UpO1xuXG4gICAgICAgIG9uV2luZG93UmVzaXplKCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnZpZXdXaWxsRGlzYXBwZWFyID0gKCkgPT4ge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uV2luZG93UmVzaXplLCBmYWxzZSk7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBvblRvZ2dsZVBsYW5ldHMpO1xuICAgICAgICB0aGlzLm9yYml0Q29udHJvbHMuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLm9yYml0Q29udHJvbHMgPSBudWxsO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGUgVEhSRUUgb2JqZWN0cyBmb3IgZWFjaCBvZiBvdXIgYm9kaWVzIGFuZCBhZGQgdG8gdGhlIHNjZW5lXG4gICAgICAgKi9cbiAgICAgIHNvbGFyU3lzdGVtLnBsYW5ldHMuZm9yRWFjaChwbGFuZXQgPT4ge1xuXG4gICAgICAgIGlmIChwbGFuZXQubmFtZSA9PT0gJ3N1bicpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aHJlZUJvZHkgPSBuZXcgVEhSRUUuTWVzaChcbiAgICAgICAgICBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkocGxhbmV0LmNvbnN0YW50cy5yYWRpdXMsIDMyLCAzMiksXG4gICAgICAgICAgbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHtcbiAgICAgICAgICAgIG1hcDogdGV4dHVyZXMuZ2V0KHBsYW5ldC5uYW1lKSxcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhyZWVCb2R5KTtcbiAgICAgICAgdGhpcy5ib2R5TWFwLnNldChwbGFuZXQubmFtZSwgdGhyZWVCb2R5KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gc29sYXIgc3lzdGVtXG4gKi9cbkNhbWVyYVZpZXdSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNvbGFyU3lzdGVtKSB7XG5cbiAgLy8gRmluZCB0aGUgYm9keSB3ZSBhcmUgZm9jdXNpbmcgb25cbiAgY29uc3QgZm9jdXMgPSBzb2xhclN5c3RlbS5wbGFuZXRzLmZpbmQoKHBsYW5ldCkgPT4gcGxhbmV0Lm5hbWUgPT09IHRoaXMuZm9jdXMpO1xuXG4gIC8vIFVwZGF0ZSBsaWdodCBzb3VyY2VzXG4gIGNvbnN0IHN1biA9IHNvbGFyU3lzdGVtLnBsYW5ldHMuZmluZCgocGxhbmV0KSA9PiBwbGFuZXQubmFtZSA9PT0gJ3N1bicpO1xuICB0aGlzLmxpZ2h0U291cmNlcy5mb3JFYWNoKChsaWdodCkgPT4ge1xuICAgIGxpZ2h0LnBvc2l0aW9uLmNvcHkodGhpcy5fYWRqdXN0Q29vcmRpbmF0ZXMoZm9jdXMsIHN1bi5kZXJpdmVkLnBvc2l0aW9uKSk7XG4gIH0pXG5cbiAgLy8gVXBkYXRlIHRoZSBwb3NpdGlvbnMgb2YgYWxsIG9mIG91ciBib2RpZXNcbiAgc29sYXJTeXN0ZW0ucGxhbmV0cy5mb3JFYWNoKChwbGFuZXQpID0+IHtcblxuICAgIGlmIChwbGFuZXQubmFtZSA9PT0gJ3N1bicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdGhyZWVCb2R5ID0gdGhpcy5ib2R5TWFwLmdldChwbGFuZXQubmFtZSk7XG4gICAgbGV0IGRlcml2ZWQgPSBwbGFuZXQuZGVyaXZlZDtcblxuICAgIC8vIEFkanVzdCBwb3NpdGlvbiB0byByZS1jZW50ZXIgdGhlIGNvb3JkaW5hdGUgc3lzdGVtIG9uIHRoZSBmb2N1c1xuICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuX2FkanVzdENvb3JkaW5hdGVzKGZvY3VzLCBkZXJpdmVkLnBvc2l0aW9uKTtcbiAgICB0aHJlZUJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopO1xuXG4gICAgLy8gQWRqdXN0IG9yYml0YWwgdGlsdCBhbmQgcm90YXRpb24uICBGaXJzdCwgcm90YXRlIHRoZSBib2R5IHVzaW5nIHRoZSBzYW1lXG4gICAgLy8gc2V0IG9mIHRyYW5zZm9ybXMgd2UgdXNlIHRvIHRyYW5zZm9ybSB0byBlY2xpcHRpYy4gIFRoZW4sIGFwcGx5IHRoZSBheGlhbCB0aWx0LFxuICAgIC8vIGFuZCB0aGUgYWNjdW11bGF0ZWQgcm90YXRpb24gYXJvdW5kIHRoZSBheGlzICgnZGVyaXZlZC5yb3RhdGlvbicpO1xuICAgIHRocmVlQm9keS5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgdGhyZWVCb2R5LnJvdGF0ZVooZGVyaXZlZC5vbWVnYSk7XG4gICAgdGhyZWVCb2R5LnJvdGF0ZVgoZGVyaXZlZC5JKTtcbiAgICB0aHJlZUJvZHkucm90YXRlWihkZXJpdmVkLmFyZ3VtZW50UGVyaWhlbGlvbik7XG4gICAgdGhyZWVCb2R5LnJvdGF0ZU9uQXhpcyhuZXcgVEhSRUUuVmVjdG9yMygxLCAwLCAwKSwgTWF0aC5QSSAvIDIpO1xuICAgIHRocmVlQm9keS5yb3RhdGVPbkF4aXMobmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCksIC0ocGxhbmV0LmNvbnN0YW50cy5heGlhbF90aWx0IHx8IDApICogTWF0aC5QSSAvIDE4MCk7XG4gICAgdGhyZWVCb2R5LnJvdGF0ZVkoZGVyaXZlZC5yb3RhdGlvbik7XG4gIH0pO1xuXG4gIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTtcbn07XG5cbi8qKlxuICogUmVjZW50ZXIgdGhlIGNvb3JkaW5hdGUgc3lzdGVtIG9uIHRoZSBmb2N1cyBiZWluZyB0aGUgJ2NlbnRlcicuXG4gKi9cbkNhbWVyYVZpZXdSZW5kZXJlci5wcm90b3R5cGUuX2FkanVzdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGZvY3VzLCBwb3NpdGlvbikge1xuXG4gIGlmICghZm9jdXMpXG4gICAgcmV0dXJuIHBvc2l0aW9uLmNsb25lKCk7XG5cbiAgbGV0IGNvb3JkaW5hdGVzID0gcG9zaXRpb24uY2xvbmUoKVxuICAgIC5zdWIoZm9jdXMuZGVyaXZlZC5wb3NpdGlvbik7XG5cbiAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufTtcblxuLy8gSW5oZXJpdCBmcm9tIEJhc2VSZW5kZXJlclxuT2JqZWN0LmFzc2lnbihDYW1lcmFWaWV3UmVuZGVyZXIucHJvdG90eXBlLCBCYXNlUmVuZGVyZXIucHJvdG90eXBlKTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FtZXJhVmlld1JlbmRlcmVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvQ2FtZXJhVmlld1JlbmRlcmVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 115:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _BaseRenderer = __webpack_require__(4);\n\nvar _BaseRenderer2 = _interopRequireDefault(_BaseRenderer);\n\nvar _OrbitControls = __webpack_require__(3);\n\nvar _OrbitControls2 = _interopRequireDefault(_OrbitControls);\n\nvar _Bodies = __webpack_require__(5);\n\nvar _three = __webpack_require__(1);\n\nvar THREE = _interopRequireWildcard(_three);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULT_FOCUS = 'earth';\nvar TRAJECTORY_SCALE = 5;\n\nvar PLANET_COLOURS = {\n  \"sun\": \"yellow\",\n  \"mercury\": \"silver\",\n  \"venus\": \"green\",\n  \"earth\": \"skyblue\",\n  \"moon\": \"gray\",\n  \"mars\": \"red\",\n  \"jupiter\": \"orange\",\n  \"saturn\": \"tan\",\n  \"uranus\": \"skyblue\",\n  \"neptune\": \"lightblue\",\n  \"pluto\": \"silver\"\n};\n\nfunction OrbitalMapRenderer(container, textureLoader) {\n\n  _BaseRenderer2.default.call(this, textureLoader);\n\n  this.container = container;\n  this.renderer = new THREE.WebGLRenderer();\n  this.renderer.setPixelRatio(window.devicePixelRatio);\n  container.appendChild(this.renderer.domElement);\n\n  this.scene = new THREE.Scene();\n  this.bodyMap = new Map();\n  this.focus = DEFAULT_FOCUS;\n};\n\nOrbitalMapRenderer.prototype.recenter = function () {\n  console.log(\"Resetting camera\");\n  this.camera.position.set(0, 0, 5);\n  this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n  this.orbitControls.reset();\n};\n\nOrbitalMapRenderer.prototype.viewDidLoad = function (solarSystem) {\n  var _this = this;\n\n  return Promise.all([this._loadTextures()]).then(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 1),\n        textures = _ref2[0];\n\n    var width = window.innerWidth;\n    var height = window.innerHeight;\n\n    _this.camera = new THREE.PerspectiveCamera(45, width / height, 1e-10, 2);\n    _this.camera.up = new THREE.Vector3(0, 0, 1);\n    _this.camera.position.z = 5;\n\n    var skybox = _this._createSkyBox(textures);\n    _this.scene.add(skybox);\n\n    var scope = _this;\n    var onClick = function onClick(event) {\n      var width = window.innerWidth;\n      var height = window.innerHeight;\n\n      var pixelMultiplier = window.devicePixelRatio;\n      var target = new THREE.Vector2((event.clientX - width / 2) * pixelMultiplier, (height / 2 - event.clientY) * pixelMultiplier);\n\n      // Do a hit-test check for all planets\n      var found = Object.keys(scope.bodyMap).map(function (id) {\n\n        var projection = scope.bodyMap[id].body.position.clone().project(scope.camera);\n        var body = new THREE.Vector2(projection.x * width, projection.y * height);\n\n        return {\n          id: id,\n          distance: body.distanceTo(target)\n        };\n      }).sort(function (left, right) {\n        return left.distance - right.distance;\n      }).find(function (_ref3) {\n        var id = _ref3.id,\n            distance = _ref3.distance;\n        return distance < 50;\n      });\n\n      // Update the focus to the target planet\n      if (found) {\n        scope.focus = found.id;\n      }\n    };\n\n    var onWindowResize = _this._onWindowResize(height, _this.camera.fov);\n\n    _this.viewWillAppear = function () {\n      this.orbitControls = new _OrbitControls2.default(this.camera, this.renderer.domElement);\n      this.orbitControls.maxDistance = 100 * TRAJECTORY_SCALE;\n      this.orbitControls.dollySpeed = 2.0;\n      addEventListener(\"mousedown\", onClick);\n      addEventListener(\"resize\", onWindowResize, false);\n\n      onWindowResize();\n    };\n\n    _this.viewWillDisappear = function () {\n      removeEventListener(\"resize\", onWindowResize, false);\n      removeEventListener(\"mousedown\", onClick);\n      this.orbitControls.dispose();\n    };\n\n    // Maintain a mapping from planet -> THREE object representing the planet\n    // This will allow us to update the existing THREE object on each iteration\n    // of the render loop.\n    solarSystem.planets.forEach(function (planet) {\n\n      var threeBody = new THREE.Mesh(new THREE.SphereGeometry(planet.constants.radius, 32, 32), new THREE.MeshBasicMaterial({\n        color: PLANET_COLOURS[planet.name] || 'white'\n      }));\n\n      var periapsis = new THREE.Mesh(new THREE.SphereGeometry(0.01, 32, 32), new THREE.MeshBasicMaterial({\n        color: 'purple'\n      }));\n\n      var apoapsis = new THREE.Mesh(new THREE.SphereGeometry(0.01, 32, 32), new THREE.MeshBasicMaterial({\n        color: 'aqua'\n      }));\n\n      var trajectory = new THREE.Line(_this._createTrajectoryGeometry(), new THREE.LineBasicMaterial({\n        color: PLANET_COLOURS[planet.name] || 'white'\n      }));\n\n      _this.scene.add(threeBody);\n      //this.scene.add(periapsis);\n      //this.scene.add(apoapsis);\n      _this.scene.add(trajectory);\n\n      _this.bodyMap[planet.name] = {\n        body: threeBody,\n        periapsis: periapsis,\n        apoapsis: apoapsis,\n        trajectory: trajectory,\n        trajectoryVertices: Array.from(trajectory.geometry.attributes.position.array)\n      };\n    });\n\n    return Promise.resolve();\n  });\n};\n\nOrbitalMapRenderer.prototype.render = function (solarSystem) {\n  var _this2 = this;\n\n  // Find the current user focus\n  var focus = solarSystem.planets.find(function (planet) {\n    return planet.name === _this2.focus;\n  });\n\n  // Locate primary body, sun\n  var sun = solarSystem.planets.find(function (planet) {\n    return planet.name === 'sun';\n  });\n\n  solarSystem.planets.forEach(function (planet) {\n\n    var threeBody = _this2.bodyMap[planet.name].body;\n    var threePeriapsis = _this2.bodyMap[planet.name].periapsis;\n    var threeApoapsis = _this2.bodyMap[planet.name].apoapsis;\n    var derived = planet.derived;\n\n    // Adjust position to re-center the coordinate system on the focus\n    var position = _this2._adjustCoordinates(focus, derived.position);\n    var apoapsis = _this2._adjustCoordinates(focus, derived.apoapsis);\n    var periapsis = _this2._adjustCoordinates(focus, derived.periapsis);\n\n    threeBody.position.set(position.x, position.y, position.z);\n    threePeriapsis.position.set(periapsis.x, periapsis.y, periapsis.z);\n    threeApoapsis.position.set(apoapsis.x, apoapsis.y, apoapsis.z);\n\n    _this2._updateTrajectory(focus, planet);\n    _this2._scalePlanet(planet);\n  });\n\n  this.renderer.render(this.scene, this.camera);\n};\n\n/**\n * Recenter the coordinate system on the focus being the 'center'.\n */\nOrbitalMapRenderer.prototype._adjustCoordinates = function (focus, position) {\n\n  if (!focus) return position.clone();\n\n  var coordinates = position.clone().sub(focus.derived.position).multiplyScalar(TRAJECTORY_SCALE);\n\n  return coordinates;\n};\n\nOrbitalMapRenderer.prototype._scalePlanet = function (planet) {\n\n  var threeBody = this.bodyMap[planet.name].body;\n  var trajectory = this.bodyMap[planet.name].trajectory;\n  var cameraDistance = this.camera.position.distanceTo(threeBody.position);\n\n  var scale = Math.max(0.005 * cameraDistance, planet.constants.radius) / planet.constants.radius;\n  threeBody.scale.set(scale, scale, scale);\n\n  // Allow more 'space' between large bodies and their satellites\n  trajectory && trajectory.scale.set(trajectory.scale.x * TRAJECTORY_SCALE, trajectory.scale.y * TRAJECTORY_SCALE, 1);\n};\n\nOrbitalMapRenderer.prototype._updateTrajectory = function (focus, planet) {\n\n  if (planet.name === 'sun') return;\n\n  // Redraw the trajectory for this planet\n  var trajectory = this.bodyMap[planet.name].trajectory;\n  var trajectoryVertices = this.bodyMap[planet.name].trajectoryVertices;\n\n  var derived = planet.derived;\n  var position_in_plane = planet.derived.position_in_plane;\n  var center_in_plane = planet.derived.center_in_plane;\n  var semiMajorAxis = derived.semiMajorAxis;\n  var semiMinorAxis = derived.semiMinorAxis;\n  var center = this._adjustCoordinates(focus, derived.center);\n\n  var scaledPosition = new THREE.Vector3().copy(position_in_plane).sub(center_in_plane);\n  scaledPosition.multiply(new THREE.Vector3(1 / semiMajorAxis, 1 / semiMinorAxis, 1));\n\n  // Workaround for natural limitations of drawing arcs using straight line segments;\n  // you inherently cannot track a planet moving in an ellipse between the planet\n  // will always be between two vertices.  This code attempts to manually 'insert'\n  // a vertex that corresponds to the planets location.\n  // This fixes the issue where the trajectory would wobble in and out of the planet\n\n  var geometry = trajectory.geometry;\n  var positions = geometry.attributes.position.array;\n  var range = positions.length / 3;\n  var verticesToChange = 1;\n  var verticesToTest = [];\n\n  // Look at all the odd indexed vertices only for simplification\n  for (var i = 0; i < range; i++) {\n    var offset = i * 3;\n    verticesToTest.push(new THREE.Vector3(trajectoryVertices[offset], trajectoryVertices[offset + 1], trajectoryVertices[offset + 2]));\n  };\n\n  // Find the vertex that is closest to the planets position\n  var sorted = verticesToTest.map(function (vertex, idx) {\n    return [vertex.distanceTo(scaledPosition), vertex, idx];\n  }).sort(function (left, right) {\n    return left[0] - right[0];\n  });\n\n  // Overwrite the closest vertex with the planets actual position.  This will\n  // ensure that a vertex for our trajectory is always located at the planets\n  // location.\n  sorted.slice(0, verticesToChange).forEach(function (element) {\n    var vertex = element[1];\n    var offset = element[2] * 3;\n    positions[offset] = scaledPosition.x;\n    positions[offset + 1] = scaledPosition.y;\n    positions[offset + 2] = scaledPosition.z;\n  });\n\n  // Ensure that the rest of the vertices are set to their original value\n  sorted.slice(verticesToChange).forEach(function (element) {\n    var vertex = element[1];\n    var offset = element[2] * 3;\n    positions[offset] = trajectoryVertices[offset];\n    positions[offset + 1] = trajectoryVertices[offset + 1];\n    positions[offset + 2] = trajectoryVertices[offset + 2];\n  });\n\n  // Signal that this geometry needs a redraw\n  geometry.attributes.position.needsUpdate = true;\n\n  // Finally, apply scale/rotation/translation to the trajectory to place it\n  // into the correct orbit\n  trajectory.scale.set(1, 1, 1);\n  trajectory.rotation.set(0, 0, 0);\n  trajectory.position.set(0, 0, 0);\n\n  // Now adjust the trajectory to its actual orientation\n  trajectory.translateX(center.x);\n  trajectory.translateY(center.y);\n  trajectory.translateZ(center.z);\n  trajectory.rotateZ(derived.omega);\n  trajectory.rotateX(derived.I);\n  trajectory.rotateZ(derived.argumentPerihelion);\n  trajectory.scale.set(semiMajorAxis, semiMinorAxis, 1);\n};\n\nOrbitalMapRenderer.prototype._createTrajectoryGeometry = function () {\n\n  var NUM_POINTS = 256;\n\n  // Create the trajectory using a strandard ellipse curve that will\n  // eventually scale/rotate/translate into the correct orbit path during\n  // the render loop.\n  var pointsGeometry = new THREE.Path(new THREE.EllipseCurve(0, 0, // ax, aY\n  1, 1, // xRadius, yRadius\n  0, 2 * Math.PI, // aStartAngle, aEndAngle\n  false, // aClockwise\n  0 // aRotation\n  ).getPoints(NUM_POINTS)).createPointsGeometry(NUM_POINTS);\n  var bufferGeometry = new THREE.BufferGeometry();\n  var vertices = [];\n  for (var i = 0; i < pointsGeometry.vertices.length; i++) {\n    vertices.push(pointsGeometry.vertices[i].x, pointsGeometry.vertices[i].y, pointsGeometry.vertices[i].z);\n  }\n\n  bufferGeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\n\n  return bufferGeometry;\n};\n\nObject.assign(OrbitalMapRenderer.prototype, _BaseRenderer2.default.prototype);\n\nexports.default = OrbitalMapRenderer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9hcHAvT3JiaXRhbE1hcFJlbmRlcmVyLmpzPzVmYzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VSZW5kZXJlciBmcm9tICcuL0Jhc2VSZW5kZXJlcic7XG5pbXBvcnQgT3JiaXRDb250cm9scyBmcm9tICcuL2xpYi9PcmJpdENvbnRyb2xzJztcbmltcG9ydCB7XG4gIFBMQU5FVF9UWVBFLFxuICBTSElQX1RZUEUsXG4gIEFTVEVST0lEX1RZUEVcbn0gZnJvbSAnLi9Cb2RpZXMnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5jb25zdCBERUZBVUxUX0ZPQ1VTID0gJ2VhcnRoJztcbmNvbnN0IFRSQUpFQ1RPUllfU0NBTEUgPSA1O1xuXG5jb25zdCBQTEFORVRfQ09MT1VSUyA9IHtcbiAgXCJzdW5cIjogXCJ5ZWxsb3dcIixcbiAgXCJtZXJjdXJ5XCI6IFwic2lsdmVyXCIsXG4gIFwidmVudXNcIjogXCJncmVlblwiLFxuICBcImVhcnRoXCI6IFwic2t5Ymx1ZVwiLFxuICBcIm1vb25cIjogXCJncmF5XCIsXG4gIFwibWFyc1wiOiBcInJlZFwiLFxuICBcImp1cGl0ZXJcIjogXCJvcmFuZ2VcIixcbiAgXCJzYXR1cm5cIjogXCJ0YW5cIixcbiAgXCJ1cmFudXNcIjogXCJza3libHVlXCIsXG4gIFwibmVwdHVuZVwiOiBcImxpZ2h0Ymx1ZVwiLFxuICBcInBsdXRvXCI6IFwic2lsdmVyXCJcbn07XG5cbmZ1bmN0aW9uIE9yYml0YWxNYXBSZW5kZXJlcihjb250YWluZXIsIHRleHR1cmVMb2FkZXIpIHtcblxuICBCYXNlUmVuZGVyZXIuY2FsbCh0aGlzLCB0ZXh0dXJlTG9hZGVyKTtcblxuICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgdGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG4gIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgdGhpcy5ib2R5TWFwID0gbmV3IE1hcCgpO1xuICB0aGlzLmZvY3VzID0gREVGQVVMVF9GT0NVUztcblxufTtcblxuT3JiaXRhbE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZWNlbnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coXCJSZXNldHRpbmcgY2FtZXJhXCIpO1xuICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgNSk7XG4gIHRoaXMuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG5cbiAgdGhpcy5vcmJpdENvbnRyb2xzLnJlc2V0KCk7XG59O1xuXG5PcmJpdGFsTWFwUmVuZGVyZXIucHJvdG90eXBlLnZpZXdEaWRMb2FkID0gZnVuY3Rpb24gKHNvbGFyU3lzdGVtKSB7XG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIHRoaXMuX2xvYWRUZXh0dXJlcygpXG4gICAgXSlcbiAgICAudGhlbigoW3RleHR1cmVzXSkgPT4ge1xuXG4gICAgICBsZXQgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGxldCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAgIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB3aWR0aCAvIGhlaWdodCwgMWUtMTAsIDIpO1xuICAgICAgdGhpcy5jYW1lcmEudXAgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKTtcbiAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1O1xuXG4gICAgICBjb25zdCBza3lib3ggPSB0aGlzLl9jcmVhdGVTa3lCb3godGV4dHVyZXMpO1xuICAgICAgdGhpcy5zY2VuZS5hZGQoc2t5Ym94KTtcblxuICAgICAgY29uc3Qgc2NvcGUgPSB0aGlzO1xuICAgICAgY29uc3Qgb25DbGljayA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgbGV0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgICBsZXQgcGl4ZWxNdWx0aXBsaWVyID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIGxldCB0YXJnZXQgPSBuZXcgVEhSRUUuVmVjdG9yMihcbiAgICAgICAgICAoZXZlbnQuY2xpZW50WCAtIHdpZHRoIC8gMikgKiBwaXhlbE11bHRpcGxpZXIsXG4gICAgICAgICAgKGhlaWdodCAvIDIgLSBldmVudC5jbGllbnRZKSAqIHBpeGVsTXVsdGlwbGllcik7XG5cbiAgICAgICAgLy8gRG8gYSBoaXQtdGVzdCBjaGVjayBmb3IgYWxsIHBsYW5ldHNcbiAgICAgICAgbGV0IGZvdW5kID0gT2JqZWN0LmtleXMoc2NvcGUuYm9keU1hcClcbiAgICAgICAgICAubWFwKChpZCkgPT4ge1xuXG4gICAgICAgICAgICBsZXQgcHJvamVjdGlvbiA9IHNjb3BlLmJvZHlNYXBbaWRdLmJvZHkucG9zaXRpb24uY2xvbmUoKVxuICAgICAgICAgICAgICAucHJvamVjdChzY29wZS5jYW1lcmEpO1xuICAgICAgICAgICAgbGV0IGJvZHkgPSBuZXcgVEhSRUUuVmVjdG9yMihwcm9qZWN0aW9uLnggKiB3aWR0aCwgcHJvamVjdGlvbi55ICogaGVpZ2h0KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICBkaXN0YW5jZTogYm9keS5kaXN0YW5jZVRvKHRhcmdldClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc29ydCgobGVmdCwgcmlnaHQpID0+IGxlZnQuZGlzdGFuY2UgLSByaWdodC5kaXN0YW5jZSlcbiAgICAgICAgICAuZmluZCgoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBkaXN0YW5jZVxuICAgICAgICAgIH0pID0+IGRpc3RhbmNlIDwgNTApO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZm9jdXMgdG8gdGhlIHRhcmdldCBwbGFuZXRcbiAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgc2NvcGUuZm9jdXMgPSBmb3VuZC5pZDtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3Qgb25XaW5kb3dSZXNpemUgPSB0aGlzLl9vbldpbmRvd1Jlc2l6ZShoZWlnaHQsIHRoaXMuY2FtZXJhLmZvdik7XG5cbiAgICAgIHRoaXMudmlld1dpbGxBcHBlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub3JiaXRDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKHRoaXMuY2FtZXJhLCB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICB0aGlzLm9yYml0Q29udHJvbHMubWF4RGlzdGFuY2UgPSAxMDAgKiBUUkFKRUNUT1JZX1NDQUxFO1xuICAgICAgICB0aGlzLm9yYml0Q29udHJvbHMuZG9sbHlTcGVlZCA9IDIuMDtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbkNsaWNrKTtcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvbldpbmRvd1Jlc2l6ZSwgZmFsc2UpO1xuXG4gICAgICAgIG9uV2luZG93UmVzaXplKCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnZpZXdXaWxsRGlzYXBwZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uV2luZG93UmVzaXplLCBmYWxzZSk7XG4gICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25DbGljayk7XG4gICAgICAgIHRoaXMub3JiaXRDb250cm9scy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBNYWludGFpbiBhIG1hcHBpbmcgZnJvbSBwbGFuZXQgLT4gVEhSRUUgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcGxhbmV0XG4gICAgICAvLyBUaGlzIHdpbGwgYWxsb3cgdXMgdG8gdXBkYXRlIHRoZSBleGlzdGluZyBUSFJFRSBvYmplY3Qgb24gZWFjaCBpdGVyYXRpb25cbiAgICAgIC8vIG9mIHRoZSByZW5kZXIgbG9vcC5cbiAgICAgIHNvbGFyU3lzdGVtLnBsYW5ldHMuZm9yRWFjaCgocGxhbmV0KSA9PiB7XG5cbiAgICAgICAgY29uc3QgdGhyZWVCb2R5ID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KHBsYW5ldC5jb25zdGFudHMucmFkaXVzLCAzMiwgMzIpLFxuICAgICAgICAgIG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogUExBTkVUX0NPTE9VUlNbcGxhbmV0Lm5hbWVdIHx8ICd3aGl0ZSdcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3QgcGVyaWFwc2lzID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KDAuMDEsIDMyLCAzMiksXG4gICAgICAgICAgbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgIGNvbG9yOiAncHVycGxlJ1xuICAgICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCBhcG9hcHNpcyA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgwLjAxLCAzMiwgMzIpLFxuICAgICAgICAgIG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICAgICAgICBjb2xvcjogJ2FxdWEnXG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IHRyYWplY3RvcnkgPSBuZXcgVEhSRUUuTGluZShcbiAgICAgICAgICB0aGlzLl9jcmVhdGVUcmFqZWN0b3J5R2VvbWV0cnkoKSxcbiAgICAgICAgICBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgICAgY29sb3I6IFBMQU5FVF9DT0xPVVJTW3BsYW5ldC5uYW1lXSB8fCAnd2hpdGUnXG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHRocmVlQm9keSk7XG4gICAgICAgIC8vdGhpcy5zY2VuZS5hZGQocGVyaWFwc2lzKTtcbiAgICAgICAgLy90aGlzLnNjZW5lLmFkZChhcG9hcHNpcyk7XG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHRyYWplY3RvcnkpO1xuXG4gICAgICAgIHRoaXMuYm9keU1hcFtwbGFuZXQubmFtZV0gPSB7XG4gICAgICAgICAgYm9keTogdGhyZWVCb2R5LFxuICAgICAgICAgIHBlcmlhcHNpczogcGVyaWFwc2lzLFxuICAgICAgICAgIGFwb2Fwc2lzOiBhcG9hcHNpcyxcbiAgICAgICAgICB0cmFqZWN0b3J5OiB0cmFqZWN0b3J5LFxuICAgICAgICAgIHRyYWplY3RvcnlWZXJ0aWNlczogQXJyYXkuZnJvbSh0cmFqZWN0b3J5Lmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkpLFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH0pO1xufTtcblxuT3JiaXRhbE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc29sYXJTeXN0ZW0pIHtcblxuICAvLyBGaW5kIHRoZSBjdXJyZW50IHVzZXIgZm9jdXNcbiAgY29uc3QgZm9jdXMgPSBzb2xhclN5c3RlbS5wbGFuZXRzLmZpbmQoKHBsYW5ldCkgPT4gcGxhbmV0Lm5hbWUgPT09IHRoaXMuZm9jdXMpO1xuXG4gIC8vIExvY2F0ZSBwcmltYXJ5IGJvZHksIHN1blxuICBjb25zdCBzdW4gPSBzb2xhclN5c3RlbS5wbGFuZXRzLmZpbmQoKHBsYW5ldCkgPT4gcGxhbmV0Lm5hbWUgPT09ICdzdW4nKTtcblxuICBzb2xhclN5c3RlbS5wbGFuZXRzLmZvckVhY2goKHBsYW5ldCkgPT4ge1xuXG4gICAgbGV0IHRocmVlQm9keSA9IHRoaXMuYm9keU1hcFtwbGFuZXQubmFtZV0uYm9keTtcbiAgICBsZXQgdGhyZWVQZXJpYXBzaXMgPSB0aGlzLmJvZHlNYXBbcGxhbmV0Lm5hbWVdLnBlcmlhcHNpcztcbiAgICBsZXQgdGhyZWVBcG9hcHNpcyA9IHRoaXMuYm9keU1hcFtwbGFuZXQubmFtZV0uYXBvYXBzaXM7XG4gICAgbGV0IGRlcml2ZWQgPSBwbGFuZXQuZGVyaXZlZDtcblxuICAgIC8vIEFkanVzdCBwb3NpdGlvbiB0byByZS1jZW50ZXIgdGhlIGNvb3JkaW5hdGUgc3lzdGVtIG9uIHRoZSBmb2N1c1xuICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuX2FkanVzdENvb3JkaW5hdGVzKGZvY3VzLCBkZXJpdmVkLnBvc2l0aW9uKTtcbiAgICBsZXQgYXBvYXBzaXMgPSB0aGlzLl9hZGp1c3RDb29yZGluYXRlcyhmb2N1cywgZGVyaXZlZC5hcG9hcHNpcyk7XG4gICAgbGV0IHBlcmlhcHNpcyA9IHRoaXMuX2FkanVzdENvb3JkaW5hdGVzKGZvY3VzLCBkZXJpdmVkLnBlcmlhcHNpcyk7XG5cbiAgICB0aHJlZUJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopO1xuICAgIHRocmVlUGVyaWFwc2lzLnBvc2l0aW9uLnNldChwZXJpYXBzaXMueCwgcGVyaWFwc2lzLnksIHBlcmlhcHNpcy56KTtcbiAgICB0aHJlZUFwb2Fwc2lzLnBvc2l0aW9uLnNldChhcG9hcHNpcy54LCBhcG9hcHNpcy55LCBhcG9hcHNpcy56KTtcblxuICAgIHRoaXMuX3VwZGF0ZVRyYWplY3RvcnkoZm9jdXMsIHBsYW5ldCk7XG4gICAgdGhpcy5fc2NhbGVQbGFuZXQocGxhbmV0KTtcbiAgfSk7XG5cbiAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEpO1xufTtcblxuLyoqXG4gKiBSZWNlbnRlciB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gb24gdGhlIGZvY3VzIGJlaW5nIHRoZSAnY2VudGVyJy5cbiAqL1xuT3JiaXRhbE1hcFJlbmRlcmVyLnByb3RvdHlwZS5fYWRqdXN0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoZm9jdXMsIHBvc2l0aW9uKSB7XG5cbiAgaWYgKCFmb2N1cylcbiAgICByZXR1cm4gcG9zaXRpb24uY2xvbmUoKTtcblxuICBsZXQgY29vcmRpbmF0ZXMgPSBwb3NpdGlvbi5jbG9uZSgpXG4gICAgLnN1Yihmb2N1cy5kZXJpdmVkLnBvc2l0aW9uKVxuICAgIC5tdWx0aXBseVNjYWxhcihUUkFKRUNUT1JZX1NDQUxFKTtcblxuICByZXR1cm4gY29vcmRpbmF0ZXM7XG59O1xuXG5PcmJpdGFsTWFwUmVuZGVyZXIucHJvdG90eXBlLl9zY2FsZVBsYW5ldCA9IGZ1bmN0aW9uIChwbGFuZXQpIHtcblxuICBsZXQgdGhyZWVCb2R5ID0gdGhpcy5ib2R5TWFwW3BsYW5ldC5uYW1lXS5ib2R5O1xuICBsZXQgdHJhamVjdG9yeSA9IHRoaXMuYm9keU1hcFtwbGFuZXQubmFtZV0udHJhamVjdG9yeTtcbiAgbGV0IGNhbWVyYURpc3RhbmNlID0gdGhpcy5jYW1lcmEucG9zaXRpb24uZGlzdGFuY2VUbyh0aHJlZUJvZHkucG9zaXRpb24pO1xuXG4gIGxldCBzY2FsZSA9IE1hdGgubWF4KDAuMDA1ICogY2FtZXJhRGlzdGFuY2UsIHBsYW5ldC5jb25zdGFudHMucmFkaXVzKSAvIHBsYW5ldC5jb25zdGFudHMucmFkaXVzO1xuICB0aHJlZUJvZHkuc2NhbGUuc2V0KHNjYWxlLCBzY2FsZSwgc2NhbGUpO1xuXG4gIC8vIEFsbG93IG1vcmUgJ3NwYWNlJyBiZXR3ZWVuIGxhcmdlIGJvZGllcyBhbmQgdGhlaXIgc2F0ZWxsaXRlc1xuICB0cmFqZWN0b3J5ICYmIHRyYWplY3Rvcnkuc2NhbGUuc2V0KHRyYWplY3Rvcnkuc2NhbGUueCAqIFRSQUpFQ1RPUllfU0NBTEUsIHRyYWplY3Rvcnkuc2NhbGUueSAqIFRSQUpFQ1RPUllfU0NBTEUsIDEpO1xufTtcblxuT3JiaXRhbE1hcFJlbmRlcmVyLnByb3RvdHlwZS5fdXBkYXRlVHJhamVjdG9yeSA9IGZ1bmN0aW9uIChmb2N1cywgcGxhbmV0KSB7XG5cbiAgaWYgKHBsYW5ldC5uYW1lID09PSAnc3VuJylcbiAgICByZXR1cm47XG5cbiAgLy8gUmVkcmF3IHRoZSB0cmFqZWN0b3J5IGZvciB0aGlzIHBsYW5ldFxuICBsZXQgdHJhamVjdG9yeSA9IHRoaXMuYm9keU1hcFtwbGFuZXQubmFtZV0udHJhamVjdG9yeTtcbiAgbGV0IHRyYWplY3RvcnlWZXJ0aWNlcyA9IHRoaXMuYm9keU1hcFtwbGFuZXQubmFtZV0udHJhamVjdG9yeVZlcnRpY2VzO1xuXG4gIGxldCBkZXJpdmVkID0gcGxhbmV0LmRlcml2ZWQ7XG4gIGxldCBwb3NpdGlvbl9pbl9wbGFuZSA9IHBsYW5ldC5kZXJpdmVkLnBvc2l0aW9uX2luX3BsYW5lO1xuICBsZXQgY2VudGVyX2luX3BsYW5lID0gcGxhbmV0LmRlcml2ZWQuY2VudGVyX2luX3BsYW5lO1xuICBsZXQgc2VtaU1ham9yQXhpcyA9IGRlcml2ZWQuc2VtaU1ham9yQXhpcztcbiAgbGV0IHNlbWlNaW5vckF4aXMgPSBkZXJpdmVkLnNlbWlNaW5vckF4aXM7XG4gIGxldCBjZW50ZXIgPSB0aGlzLl9hZGp1c3RDb29yZGluYXRlcyhmb2N1cywgZGVyaXZlZC5jZW50ZXIpO1xuXG4gIGxldCBzY2FsZWRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKClcbiAgICAuY29weShwb3NpdGlvbl9pbl9wbGFuZSlcbiAgICAuc3ViKGNlbnRlcl9pbl9wbGFuZSk7XG4gIHNjYWxlZFBvc2l0aW9uLm11bHRpcGx5KG5ldyBUSFJFRS5WZWN0b3IzKDEgLyBzZW1pTWFqb3JBeGlzLCAxIC8gc2VtaU1pbm9yQXhpcywgMSkpO1xuXG4gIC8vIFdvcmthcm91bmQgZm9yIG5hdHVyYWwgbGltaXRhdGlvbnMgb2YgZHJhd2luZyBhcmNzIHVzaW5nIHN0cmFpZ2h0IGxpbmUgc2VnbWVudHM7XG4gIC8vIHlvdSBpbmhlcmVudGx5IGNhbm5vdCB0cmFjayBhIHBsYW5ldCBtb3ZpbmcgaW4gYW4gZWxsaXBzZSBiZXR3ZWVuIHRoZSBwbGFuZXRcbiAgLy8gd2lsbCBhbHdheXMgYmUgYmV0d2VlbiB0d28gdmVydGljZXMuICBUaGlzIGNvZGUgYXR0ZW1wdHMgdG8gbWFudWFsbHkgJ2luc2VydCdcbiAgLy8gYSB2ZXJ0ZXggdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcGxhbmV0cyBsb2NhdGlvbi5cbiAgLy8gVGhpcyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgdGhlIHRyYWplY3Rvcnkgd291bGQgd29iYmxlIGluIGFuZCBvdXQgb2YgdGhlIHBsYW5ldFxuXG4gIGNvbnN0IGdlb21ldHJ5ID0gdHJhamVjdG9yeS5nZW9tZXRyeTtcbiAgY29uc3QgcG9zaXRpb25zID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcbiAgY29uc3QgcmFuZ2UgPSBwb3NpdGlvbnMubGVuZ3RoIC8gMztcbiAgY29uc3QgdmVydGljZXNUb0NoYW5nZSA9IDE7XG4gIGNvbnN0IHZlcnRpY2VzVG9UZXN0ID0gW107XG5cbiAgLy8gTG9vayBhdCBhbGwgdGhlIG9kZCBpbmRleGVkIHZlcnRpY2VzIG9ubHkgZm9yIHNpbXBsaWZpY2F0aW9uXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2U7IGkrKykge1xuICAgIGNvbnN0IG9mZnNldCA9IGkgKiAzO1xuICAgIHZlcnRpY2VzVG9UZXN0LnB1c2gobmV3IFRIUkVFLlZlY3RvcjModHJhamVjdG9yeVZlcnRpY2VzW29mZnNldF0sXG4gICAgICB0cmFqZWN0b3J5VmVydGljZXNbb2Zmc2V0ICsgMV0sIHRyYWplY3RvcnlWZXJ0aWNlc1tvZmZzZXQgKyAyXSkpO1xuICB9O1xuXG4gIC8vIEZpbmQgdGhlIHZlcnRleCB0aGF0IGlzIGNsb3Nlc3QgdG8gdGhlIHBsYW5ldHMgcG9zaXRpb25cbiAgY29uc3Qgc29ydGVkID0gdmVydGljZXNUb1Rlc3QubWFwKCh2ZXJ0ZXgsIGlkeCkgPT4gW3ZlcnRleC5kaXN0YW5jZVRvKHNjYWxlZFBvc2l0aW9uKSwgdmVydGV4LCBpZHhdKVxuICAgIC5zb3J0KChsZWZ0LCByaWdodCkgPT4ge1xuICAgICAgcmV0dXJuIGxlZnRbMF0gLSByaWdodFswXTtcbiAgICB9KTtcblxuICAvLyBPdmVyd3JpdGUgdGhlIGNsb3Nlc3QgdmVydGV4IHdpdGggdGhlIHBsYW5ldHMgYWN0dWFsIHBvc2l0aW9uLiAgVGhpcyB3aWxsXG4gIC8vIGVuc3VyZSB0aGF0IGEgdmVydGV4IGZvciBvdXIgdHJhamVjdG9yeSBpcyBhbHdheXMgbG9jYXRlZCBhdCB0aGUgcGxhbmV0c1xuICAvLyBsb2NhdGlvbi5cbiAgc29ydGVkLnNsaWNlKDAsIHZlcnRpY2VzVG9DaGFuZ2UpXG4gICAgLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGxldCB2ZXJ0ZXggPSBlbGVtZW50WzFdO1xuICAgICAgbGV0IG9mZnNldCA9IGVsZW1lbnRbMl0gKiAzO1xuICAgICAgcG9zaXRpb25zW29mZnNldF0gPSBzY2FsZWRQb3NpdGlvbi54O1xuICAgICAgcG9zaXRpb25zW29mZnNldCArIDFdID0gc2NhbGVkUG9zaXRpb24ueVxuICAgICAgcG9zaXRpb25zW29mZnNldCArIDJdID0gc2NhbGVkUG9zaXRpb24uejtcbiAgICB9KTtcblxuICAvLyBFbnN1cmUgdGhhdCB0aGUgcmVzdCBvZiB0aGUgdmVydGljZXMgYXJlIHNldCB0byB0aGVpciBvcmlnaW5hbCB2YWx1ZVxuICBzb3J0ZWQuc2xpY2UodmVydGljZXNUb0NoYW5nZSlcbiAgICAuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgbGV0IHZlcnRleCA9IGVsZW1lbnRbMV07XG4gICAgICBsZXQgb2Zmc2V0ID0gZWxlbWVudFsyXSAqIDM7XG4gICAgICBwb3NpdGlvbnNbb2Zmc2V0XSA9IHRyYWplY3RvcnlWZXJ0aWNlc1tvZmZzZXRdO1xuICAgICAgcG9zaXRpb25zW29mZnNldCArIDFdID0gdHJhamVjdG9yeVZlcnRpY2VzW29mZnNldCArIDFdO1xuICAgICAgcG9zaXRpb25zW29mZnNldCArIDJdID0gdHJhamVjdG9yeVZlcnRpY2VzW29mZnNldCArIDJdO1xuICAgIH0pO1xuXG4gIC8vIFNpZ25hbCB0aGF0IHRoaXMgZ2VvbWV0cnkgbmVlZHMgYSByZWRyYXdcbiAgZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cbiAgLy8gRmluYWxseSwgYXBwbHkgc2NhbGUvcm90YXRpb24vdHJhbnNsYXRpb24gdG8gdGhlIHRyYWplY3RvcnkgdG8gcGxhY2UgaXRcbiAgLy8gaW50byB0aGUgY29ycmVjdCBvcmJpdFxuICB0cmFqZWN0b3J5LnNjYWxlLnNldCgxLCAxLCAxKTtcbiAgdHJhamVjdG9yeS5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7XG4gIHRyYWplY3RvcnkucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuXG4gIC8vIE5vdyBhZGp1c3QgdGhlIHRyYWplY3RvcnkgdG8gaXRzIGFjdHVhbCBvcmllbnRhdGlvblxuICB0cmFqZWN0b3J5LnRyYW5zbGF0ZVgoY2VudGVyLngpO1xuICB0cmFqZWN0b3J5LnRyYW5zbGF0ZVkoY2VudGVyLnkpO1xuICB0cmFqZWN0b3J5LnRyYW5zbGF0ZVooY2VudGVyLnopO1xuICB0cmFqZWN0b3J5LnJvdGF0ZVooZGVyaXZlZC5vbWVnYSk7XG4gIHRyYWplY3Rvcnkucm90YXRlWChkZXJpdmVkLkkpO1xuICB0cmFqZWN0b3J5LnJvdGF0ZVooZGVyaXZlZC5hcmd1bWVudFBlcmloZWxpb24pO1xuICB0cmFqZWN0b3J5LnNjYWxlLnNldChzZW1pTWFqb3JBeGlzLCBzZW1pTWlub3JBeGlzLCAxKTtcbn07XG5cbk9yYml0YWxNYXBSZW5kZXJlci5wcm90b3R5cGUuX2NyZWF0ZVRyYWplY3RvcnlHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcblxuICBjb25zdCBOVU1fUE9JTlRTID0gMjU2O1xuXG4gIC8vIENyZWF0ZSB0aGUgdHJhamVjdG9yeSB1c2luZyBhIHN0cmFuZGFyZCBlbGxpcHNlIGN1cnZlIHRoYXQgd2lsbFxuICAvLyBldmVudHVhbGx5IHNjYWxlL3JvdGF0ZS90cmFuc2xhdGUgaW50byB0aGUgY29ycmVjdCBvcmJpdCBwYXRoIGR1cmluZ1xuICAvLyB0aGUgcmVuZGVyIGxvb3AuXG4gIGNvbnN0IHBvaW50c0dlb21ldHJ5ID0gbmV3IFRIUkVFLlBhdGgobmV3IFRIUkVFLkVsbGlwc2VDdXJ2ZShcbiAgICAgICAgMCwgMCwgLy8gYXgsIGFZXG4gICAgICAgIDEsIDEsIC8vIHhSYWRpdXMsIHlSYWRpdXNcbiAgICAgICAgMCwgMiAqIE1hdGguUEksIC8vIGFTdGFydEFuZ2xlLCBhRW5kQW5nbGVcbiAgICAgICAgZmFsc2UsIC8vIGFDbG9ja3dpc2VcbiAgICAgICAgMCAvLyBhUm90YXRpb25cbiAgICAgIClcbiAgICAgIC5nZXRQb2ludHMoTlVNX1BPSU5UUykpXG4gICAgLmNyZWF0ZVBvaW50c0dlb21ldHJ5KE5VTV9QT0lOVFMpO1xuICBjb25zdCBidWZmZXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50c0dlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmVydGljZXMucHVzaChcbiAgICAgIHBvaW50c0dlb21ldHJ5LnZlcnRpY2VzW2ldLngsXG4gICAgICBwb2ludHNHZW9tZXRyeS52ZXJ0aWNlc1tpXS55LFxuICAgICAgcG9pbnRzR2VvbWV0cnkudmVydGljZXNbaV0uelxuICAgICk7XG4gIH1cblxuICBidWZmZXJHZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJyxcbiAgICBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpLCAzKSk7XG5cbiAgcmV0dXJuIGJ1ZmZlckdlb21ldHJ5O1xufTtcblxuT2JqZWN0LmFzc2lnbihPcmJpdGFsTWFwUmVuZGVyZXIucHJvdG90eXBlLCBCYXNlUmVuZGVyZXIucHJvdG90eXBlKTtcblxuZXhwb3J0IGRlZmF1bHQgT3JiaXRhbE1hcFJlbmRlcmVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvT3JiaXRhbE1hcFJlbmRlcmVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFEQTtBQUNBO0FBR0E7QUFFQTtBQURBO0FBQ0E7QUFHQTtBQUdBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 116:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar numToRun = 10000;\n\nfunction Simulation(solarSystem, renderers, stats) {\n  var _this = this;\n\n  this.solarSystem = solarSystem;\n  this.renderers = renderers;\n  this.rendererIdx = 0;\n  this.renderer = renderers[this.rendererIdx];\n  this.loaded = new Set();\n  this.stats = stats;\n  this.isStopped = true;\n  this.time = Date.now();\n  this.timeWarpValues = [1, 5, 10, 50, 100, 10e2, 10e3, 10e4, 10e5, 10e6, 10e7, 10e8];\n  this.timeWarpIdx = 6;\n\n  this.hud = document.getElementById('hud');\n  this.timeCounter = document.getElementById('time');\n\n  /**\n   * Handle window event listeners\n   */\n  var sim = this;\n  var pause = function pause(event) {\n    sim.pause();\n  };\n\n  var keypresses = function keypresses(event) {\n    var keyCodes = {\n      32: sim.toggleRun,\n      44: sim.slowDown,\n      46: sim.speedUp,\n      99: sim.recenter,\n      122: sim.toggleView\n    };\n\n    if (event.type === \"keypress\" && keyCodes.hasOwnProperty(event.keyCode)) {\n      keyCodes[event.keyCode].call(_this);\n      event.preventDefault();\n    }\n  };\n\n  window.addEventListener(\"keypress\", keypresses);\n};\n\nSimulation.prototype.speedUp = function () {\n  if (!this.isRunning()) {\n    return;\n  }\n\n  this.timeWarpIdx = Math.min(this.timeWarpValues.length - 1, this.timeWarpIdx + 1);\n};\n\nSimulation.prototype.slowDown = function () {\n  if (!this.isRunning()) {\n    return;\n  }\n\n  this.timeWarpIdx = Math.max(0, this.timeWarpIdx - 1);\n};\n\nSimulation.prototype.pause = function () {\n  this.isStopped = true;\n};\n\nSimulation.prototype.isRunning = function () {\n  return !this.isStopped;\n};\n\nSimulation.prototype.toggleRun = function () {\n  if (this.isRunning()) {\n    this.pause();\n  } else {\n    this.run();\n  }\n};\n\nSimulation.prototype.recenter = function () {\n  if (!this.isRunning()) {\n    return;\n  }\n\n  this.renderer.recenter();\n};\n\nSimulation.prototype.initialize = function () {\n  var _this2 = this;\n\n  // Ensure the solar system is fully 'seeded' before we attempt to render\n  this.solarSystem.update(this.time, 0);\n\n  this.renderers.forEach(function (renderer) {\n    renderer.container.style = 'display: none;';\n  });\n\n  // Bring up the appropriate view and hide the others\n  console.log('Loading ' + this.renderer.constructor.name);\n  return this.renderer.viewDidLoad(this.solarSystem).then(function () {\n    // Once the views are loaded, we can be prepare to surface this view\n    _this2.renderer.viewWillAppear();\n    _this2.renderer.container.style = '';\n    _this2.loaded.add(_this2.renderer);\n    return Promise.resolve();\n  });\n};\n\nSimulation.prototype.toggleView = function () {\n  var _this3 = this;\n\n  this.rendererIdx = (this.rendererIdx + 1) % this.renderers.length;\n  var oldRenderer = this.renderer;\n\n  oldRenderer.viewWillDisappear();\n  oldRenderer.container.style = 'display: none;';\n\n  var newRenderer = this.renderers[this.rendererIdx];\n\n  var promise = void 0;\n  if (!this.loaded.has(newRenderer)) {\n    console.log('Loading ' + newRenderer.constructor.name);\n    promise = newRenderer.viewDidLoad(this.solarSystem).then(function () {\n      _this3.loaded.add(newRenderer);\n      return Promise.resolve();\n    });\n  } else {\n    promise = Promise.resolve();\n  }\n\n  promise.then(function () {\n    newRenderer.viewWillAppear();\n    newRenderer.container.style = '';\n    _this3.renderer = newRenderer;\n  });\n};\n\nSimulation.prototype.run = function () {\n\n  if (this.isRunning()) {\n    return;\n  }\n\n  this.isStopped = false;\n  var numTimes = 0;\n\n  runAnimation(function (dt) {\n\n    if (this.isStopped) {\n      return false;\n    }\n\n    this.stats.begin();\n\n    var t = this.time;\n    var timeScale = this.timeWarpValues[this.timeWarpIdx];\n    dt *= timeScale;\n\n    // Update physics\n    this.solarSystem.update(t, dt);\n    this.renderer.render(this.solarSystem);\n\n    numTimes++;\n    if (numTimes >= numToRun) {\n      console.log('All done!');\n      this.isStopped = true;\n      return false;\n    }\n\n    this.timeCounter.innerHTML = '' + (0, _moment2.default)(this.time).format('MMMM D, YYYY - HH:mm:ss');\n\n    this.time += dt;\n    this.stats.end();\n  }.bind(this));\n};\n\nfunction runAnimation(frameFunc) {\n  var lastTime = null;\n\n  function frame(time) {\n    var stop = false;\n    if (lastTime != null) {\n      var timeStep = time - lastTime;\n      stop = frameFunc(timeStep) === false;\n    }\n    lastTime = time;\n    if (!stop) requestAnimationFrame(frame);\n  }\n  requestAnimationFrame(frame);\n};\n\nexports.default = Simulation;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9hcHAvU2ltdWxhdGlvbi5qcz80ZjRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuY29uc3QgbnVtVG9SdW4gPSAxMDAwMDtcblxuZnVuY3Rpb24gU2ltdWxhdGlvbihzb2xhclN5c3RlbSwgcmVuZGVyZXJzLCBzdGF0cykge1xuICB0aGlzLnNvbGFyU3lzdGVtID0gc29sYXJTeXN0ZW07XG4gIHRoaXMucmVuZGVyZXJzID0gcmVuZGVyZXJzO1xuICB0aGlzLnJlbmRlcmVySWR4ID0gMDtcbiAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyc1t0aGlzLnJlbmRlcmVySWR4XTtcbiAgdGhpcy5sb2FkZWQgPSBuZXcgU2V0KCk7XG4gIHRoaXMuc3RhdHMgPSBzdGF0cztcbiAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICB0aGlzLnRpbWUgPSBEYXRlLm5vdygpO1xuICB0aGlzLnRpbWVXYXJwVmFsdWVzID0gWzEsIDUsIDEwLCA1MCwgMTAwLCAxMGUyLCAxMGUzLCAxMGU0LCAxMGU1LCAxMGU2LCAxMGU3LCAxMGU4XTtcbiAgdGhpcy50aW1lV2FycElkeCA9IDY7XG5cbiAgdGhpcy5odWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHVkJyk7XG4gIHRoaXMudGltZUNvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZScpO1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgd2luZG93IGV2ZW50IGxpc3RlbmVyc1xuICAgKi9cbiAgY29uc3Qgc2ltID0gdGhpcztcbiAgY29uc3QgcGF1c2UgPSAoZXZlbnQpID0+IHtcbiAgICBzaW0ucGF1c2UoKTtcbiAgfTtcblxuICBjb25zdCBrZXlwcmVzc2VzID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3Qga2V5Q29kZXMgPSB7XG4gICAgICAzMjogc2ltLnRvZ2dsZVJ1bixcbiAgICAgIDQ0OiBzaW0uc2xvd0Rvd24sXG4gICAgICA0Njogc2ltLnNwZWVkVXAsXG4gICAgICA5OTogc2ltLnJlY2VudGVyLFxuICAgICAgMTIyOiBzaW0udG9nZ2xlVmlldyxcbiAgICB9O1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09IFwia2V5cHJlc3NcIiAmJiBrZXlDb2Rlcy5oYXNPd25Qcm9wZXJ0eShldmVudC5rZXlDb2RlKSkge1xuICAgICAga2V5Q29kZXNbZXZlbnQua2V5Q29kZV0uY2FsbCh0aGlzKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwga2V5cHJlc3Nlcyk7XG59O1xuXG5TaW11bGF0aW9uLnByb3RvdHlwZS5zcGVlZFVwID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnRpbWVXYXJwSWR4ID0gTWF0aC5taW4odGhpcy50aW1lV2FycFZhbHVlcy5sZW5ndGggLSAxLCB0aGlzLnRpbWVXYXJwSWR4ICsgMSk7XG59O1xuXG5TaW11bGF0aW9uLnByb3RvdHlwZS5zbG93RG93biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLmlzUnVubmluZygpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy50aW1lV2FycElkeCA9IE1hdGgubWF4KDAsIHRoaXMudGltZVdhcnBJZHggLSAxKTtcbn07XG5cblNpbXVsYXRpb24ucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG59O1xuXG5TaW11bGF0aW9uLnByb3RvdHlwZS5pc1J1bm5pbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAhdGhpcy5pc1N0b3BwZWQ7XG59O1xuXG5TaW11bGF0aW9uLnByb3RvdHlwZS50b2dnbGVSdW4gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmlzUnVubmluZygpKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucnVuKCk7XG4gIH1cbn07XG5cblNpbXVsYXRpb24ucHJvdG90eXBlLnJlY2VudGVyID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLnJlbmRlcmVyLnJlY2VudGVyKCk7XG59O1xuXG5TaW11bGF0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuXG4gIC8vIEVuc3VyZSB0aGUgc29sYXIgc3lzdGVtIGlzIGZ1bGx5ICdzZWVkZWQnIGJlZm9yZSB3ZSBhdHRlbXB0IHRvIHJlbmRlclxuICB0aGlzLnNvbGFyU3lzdGVtLnVwZGF0ZSh0aGlzLnRpbWUsIDApO1xuXG4gIHRoaXMucmVuZGVyZXJzLmZvckVhY2goKHJlbmRlcmVyKSA9PiB7XG4gICAgcmVuZGVyZXIuY29udGFpbmVyLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmU7JztcbiAgfSk7XG5cbiAgLy8gQnJpbmcgdXAgdGhlIGFwcHJvcHJpYXRlIHZpZXcgYW5kIGhpZGUgdGhlIG90aGVyc1xuICBjb25zb2xlLmxvZyhgTG9hZGluZyAke3RoaXMucmVuZGVyZXIuY29uc3RydWN0b3IubmFtZX1gKTtcbiAgcmV0dXJuIHRoaXMucmVuZGVyZXIudmlld0RpZExvYWQodGhpcy5zb2xhclN5c3RlbSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAvLyBPbmNlIHRoZSB2aWV3cyBhcmUgbG9hZGVkLCB3ZSBjYW4gYmUgcHJlcGFyZSB0byBzdXJmYWNlIHRoaXMgdmlld1xuICAgICAgdGhpcy5yZW5kZXJlci52aWV3V2lsbEFwcGVhcigpO1xuICAgICAgdGhpcy5yZW5kZXJlci5jb250YWluZXIuc3R5bGUgPSAnJztcbiAgICAgIHRoaXMubG9hZGVkLmFkZCh0aGlzLnJlbmRlcmVyKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9KTtcbn07XG5cblNpbXVsYXRpb24ucHJvdG90eXBlLnRvZ2dsZVZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMucmVuZGVyZXJJZHggPSAodGhpcy5yZW5kZXJlcklkeCArIDEpICUgdGhpcy5yZW5kZXJlcnMubGVuZ3RoO1xuICBjb25zdCBvbGRSZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG5cbiAgb2xkUmVuZGVyZXIudmlld1dpbGxEaXNhcHBlYXIoKTtcbiAgb2xkUmVuZGVyZXIuY29udGFpbmVyLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmU7JztcblxuICBjb25zdCBuZXdSZW5kZXJlciA9IHRoaXMucmVuZGVyZXJzW3RoaXMucmVuZGVyZXJJZHhdO1xuXG4gIGxldCBwcm9taXNlO1xuICBpZiAoIXRoaXMubG9hZGVkLmhhcyhuZXdSZW5kZXJlcikpIHtcbiAgICBjb25zb2xlLmxvZyhgTG9hZGluZyAke25ld1JlbmRlcmVyLmNvbnN0cnVjdG9yLm5hbWV9YCk7XG4gICAgcHJvbWlzZSA9IG5ld1JlbmRlcmVyLnZpZXdEaWRMb2FkKHRoaXMuc29sYXJTeXN0ZW0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMubG9hZGVkLmFkZChuZXdSZW5kZXJlcik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICBuZXdSZW5kZXJlci52aWV3V2lsbEFwcGVhcigpO1xuICAgIG5ld1JlbmRlcmVyLmNvbnRhaW5lci5zdHlsZSA9ICcnO1xuICAgIHRoaXMucmVuZGVyZXIgPSBuZXdSZW5kZXJlcjtcbiAgfSk7XG59XG5cblNpbXVsYXRpb24ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblxuICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gIGxldCBudW1UaW1lcyA9IDA7XG5cbiAgcnVuQW5pbWF0aW9uKGZ1bmN0aW9uIChkdCkge1xuXG4gICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0cy5iZWdpbigpO1xuXG4gICAgbGV0IHQgPSB0aGlzLnRpbWU7XG4gICAgbGV0IHRpbWVTY2FsZSA9IHRoaXMudGltZVdhcnBWYWx1ZXNbdGhpcy50aW1lV2FycElkeF07XG4gICAgZHQgKj0gdGltZVNjYWxlO1xuXG4gICAgLy8gVXBkYXRlIHBoeXNpY3NcbiAgICB0aGlzLnNvbGFyU3lzdGVtLnVwZGF0ZSh0LCBkdCk7XG4gICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zb2xhclN5c3RlbSk7XG5cbiAgICBudW1UaW1lcysrO1xuICAgIGlmIChudW1UaW1lcyA+PSBudW1Ub1J1bikge1xuICAgICAgY29uc29sZS5sb2coJ0FsbCBkb25lIScpO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMudGltZUNvdW50ZXIuaW5uZXJIVE1MID0gYCR7bW9tZW50KHRoaXMudGltZSkuZm9ybWF0KCdNTU1NIEQsIFlZWVkgLSBISDptbTpzcycpfWA7XG5cbiAgICB0aGlzLnRpbWUgKz0gZHQ7XG4gICAgdGhpcy5zdGF0cy5lbmQoKTtcblxuICB9LmJpbmQodGhpcykpO1xufTtcblxuZnVuY3Rpb24gcnVuQW5pbWF0aW9uKGZyYW1lRnVuYykge1xuICB2YXIgbGFzdFRpbWUgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGZyYW1lKHRpbWUpIHtcbiAgICB2YXIgc3RvcCA9IGZhbHNlO1xuICAgIGlmIChsYXN0VGltZSAhPSBudWxsKSB7XG4gICAgICB2YXIgdGltZVN0ZXAgPSAodGltZSAtIGxhc3RUaW1lKTtcbiAgICAgIHN0b3AgPSBmcmFtZUZ1bmModGltZVN0ZXApID09PSBmYWxzZTtcbiAgICB9XG4gICAgbGFzdFRpbWUgPSB0aW1lO1xuICAgIGlmICghc3RvcClcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmcmFtZSk7XG4gIH1cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNpbXVsYXRpb247XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2FwcC9TaW11bGF0aW9uLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 117:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _moment = __webpack_require__(0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _Bodies = __webpack_require__(5);\n\nvar _Bodies2 = _interopRequireDefault(_Bodies);\n\nvar _three = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar J2000_date = (0, _moment2.default)('2000-01-01T12:00:00Z');\nvar J2000_epoch = 2451545.0;\n\nfunction SolarSystem() {\n\n  // Initialize map\n  var bodyMap = new Map(Object.keys(_Bodies2.default).map(function (name) {\n    var planet = _Bodies2.default[name];\n    planet.name = name;\n    planet.derived = {};\n    return [name, planet];\n  }));\n\n  // Create a graph based on the primary -> secondary relationship\n  var bodyDependencyGraph = Array.from(bodyMap.values()).map(function (planet) {\n    // Add in back references to the primary\n\n    if (planet.primary) {\n      planet.primary = bodyMap.get(planet.primary);\n      return [planet.primary, planet];\n    } else {\n      return [null, planet];\n    }\n  }).reduce(function (tree, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        primary = _ref2[0],\n        body = _ref2[1];\n\n    // Organize the map by primary -> [secondaries]\n\n    // Base case for sun\n    if (!primary && !tree.has(body)) {\n      tree.set(body, []);\n      return tree;\n    }\n\n    if (!tree.has(primary)) tree.set(primary, []);\n\n    tree.get(primary).push(body);\n    return tree;\n  }, new Map());\n\n  // Set the secondaries as a property onto each body\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = bodyDependencyGraph.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          primary = _step$value[0],\n          secondaries = _step$value[1];\n\n      primary.secondaries = secondaries;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var sortedBodies = [];\n  var sun = Array.from(bodyMap.values()).find(function (body) {\n    return !body.primary;\n  });\n\n  function flatten(body) {\n    if (!body) {\n      return [];\n    }\n\n    return (body.secondaries || []).reduce(function (bodies, b) {\n      return bodies.concat(flatten(b));\n    }, [body]);\n  }\n\n  this.planets = flatten(sun);\n  this.bodies = [];\n};\n\nSolarSystem.prototype.update = function (t, dt) {\n\n  var currentDate = (0, _moment2.default)(t + dt);\n  var T = this._calculateJulianDate(currentDate);\n\n  this.planets.forEach(function (planet) {\n\n    // Don't calculate data for the sun; treat as stationary\n    if (planet.name === 'sun') {\n      planet.derived = {\n        position: new _three.Vector3(0, 0, 0),\n        velocity: new _three.Vector3(0, 0, 0),\n        apoapsis: new _three.Vector3(0, 0, 0),\n        periapsis: new _three.Vector3(0, 0, 0),\n        center: new _three.Vector3(0, 0, 0)\n      };\n\n      return;\n    }\n\n    var kepler_elements = planet.kepler_elements;\n    var planet_constants = planet.constants;\n    var primary = planet.primary;\n    var derived = planet.derived;\n    var u = primary.constants.u;\n\n    // For bodies...\n    //  -> Calculate initial r, v using kepler_elements\n    //  -> Integrate to find r', v'\n    //  -> Use r', v' to compute kepler elements\n\n    var a = kepler_elements.a[0] + kepler_elements.a[1] * T;\n    var e = kepler_elements.e[0] + kepler_elements.e[1] * T;\n    var I = kepler_elements.I[0] + kepler_elements.I[1] * T;\n    var L = kepler_elements.L[0] + kepler_elements.L[1] * T;\n    var w = kepler_elements.w[0] + kepler_elements.w[1] * T;\n    var omega = kepler_elements.omega[0] + kepler_elements.omega[1] * T;\n    var perturbations = kepler_elements.perturbations;\n    var M = this._calculateMeanAnomaly(L, w, perturbations, T);\n\n    var delta = this._toCartesianCoordinates(primary, a, e, I, L, w, omega, M);\n    var position = delta.position;\n    var velocity = delta.velocity;\n\n    // Semi-minor axis\n    var b = a * Math.sqrt(1 - Math.pow(e, 2));\n    var periapsis = new _three.Vector3(a * (1 - e), 0, 0);\n    var apoapsis = new _three.Vector3(-a * (1 + e), 0, 0);\n    var center = new _three.Vector3(periapsis.x - a, 0, 0);\n\n    var rotation = (derived.rotation || 0) + 2 * Math.PI * dt / ((planet_constants.rotation_period || 1) * 86400e3);\n\n    // Convert params to radians for this next transformation\n    var argumentPerihelion = (w - omega) * (Math.PI / 180);\n    omega = omega * (Math.PI / 180);\n    I = I * (Math.PI / 180);\n    w = w * (Math.PI / 180);\n\n    planet.derived = {\n      T: T,\n      a: a,\n      e: e,\n      I: I,\n      w: w,\n      omega: omega,\n      argumentPerihelion: argumentPerihelion,\n      position: position,\n      position_in_plane: delta.position_in_plane,\n      velocity: velocity,\n      semiMajorAxis: a,\n      semiMinorAxis: b,\n      rotation: rotation,\n      center: this._transformToEcliptic(primary.derived.position, center, argumentPerihelion, omega, I),\n      center_in_plane: center,\n      periapsis: this._transformToEcliptic(primary.derived.position, periapsis, argumentPerihelion, omega, I),\n      apoapsis: this._transformToEcliptic(primary.derived.position, apoapsis, argumentPerihelion, omega, I)\n    };\n  }, this);\n\n  this.lastTime = t + dt;\n};\n\nSolarSystem.prototype._toCartesianCoordinates = function (primary, a, e, I, L, w, omega, M) {\n\n  var argumentPerihelion = w - omega;\n  var u = primary.constants.u;\n\n  var E = this._calculateEccentricAnomaly(e, M);\n\n  var trueAnomaly = Math.sign(E) * Math.acos((Math.cos(Math.PI / 180 * E) - e) / (1 - e * Math.cos(Math.PI / 180 * E)));\n\n  // Calculate heliocentric coordinates in the planets orbital plane\n  var helioCentricPosition = new _three.Vector3(a * (Math.cos(Math.PI / 180 * E) - e), a * Math.sqrt(1 - Math.pow(e, 2)) * Math.sin(Math.PI / 180 * E), 0);\n\n  // Convert to the ecliptic plane\n  var eclipticPosition = this._transformToEcliptic(primary.derived.position, helioCentricPosition, argumentPerihelion * Math.PI / 180, omega * Math.PI / 180, I * Math.PI / 180);\n\n  // Calculate the velocity in the planets orbital planet\n  var helioCentricVelocity = new _three.Vector3(-Math.sin(trueAnomaly), e + Math.cos(trueAnomaly), 0).multiplyScalar(Math.sqrt(u / Math.pow(a, 3)) * a / Math.sqrt(1 - Math.pow(e, 2)));\n\n  // Convert to the ecliptic plane\n  var eclipticVelocity = this._transformToEcliptic(new _three.Vector3(0, 0, 0), // Don't offset; we just want the orbital velocity\n  helioCentricVelocity, argumentPerihelion * Math.PI / 180, omega * Math.PI / 180, I * Math.PI / 180);\n\n  return {\n    meanAnomaly: M * (Math.PI / 180),\n    eccentricAnomaly: E * (Math.PI / 180),\n    trueAnomaly: trueAnomaly,\n    position: eclipticPosition,\n    position_in_plane: helioCentricPosition,\n    velocity: eclipticVelocity\n  };\n};\n\nSolarSystem.prototype._calculateJulianDate = function (date) {\n  var Teph = J2000_epoch + date.diff(J2000_date, 'days', true);\n  var T = (Teph - J2000_epoch) / 36525;\n  return T;\n};\n\nSolarSystem.prototype._calculateMeanAnomaly = function (L, w, perturbations, T) {\n\n  var M = L - w;\n  if (perturbations) {\n    M += perturbations.b * Math.pow(T, 2) + perturbations.c * Math.cos(perturbations.f * T) + perturbations.s * Math.sin(perturbations.f * T);\n  }\n\n  M = M % 360;\n  if (M > 180) {\n    M = M - 360;\n  } else if (M < -180) {\n    M = 360 + M;\n  }\n\n  return M;\n};\n\nSolarSystem.prototype._calculateEccentricAnomaly = function (e, M) {\n  // Calculate eccentric anomaly, E\n  // e_star = degrees\n  // e = radians\n  var tol = 10e-6;\n  var e_star = 57.29578 * e;\n  var E = M + e_star * Math.sin(Math.PI / 180 * M);\n  var deltaE = void 0,\n      deltaM = void 0;\n  var numTimes = 0;\n  do {\n    deltaM = M - (E - e_star * Math.sin(Math.PI / 180 * E));\n    deltaE = deltaM / (1 - e * Math.cos(Math.PI / 180 * E));\n    E = E + deltaE;\n    numTimes++;\n  } while (Math.abs(deltaE) > tol && numTimes <= 10);\n\n  if (numTimes === 10) {\n    console.log(\"Didn't iterate on a solution!\");\n  }\n\n  return E;\n};\n\nSolarSystem.prototype._transformToEcliptic = function (offset, position, w, omega, I) {\n\n  var x = position.x;\n  var y = position.y;\n  var z = position.z;\n\n  var x_ecl = (Math.cos(w) * Math.cos(omega) - Math.sin(w) * Math.sin(omega) * Math.cos(I)) * x + (-Math.sin(w) * Math.cos(omega) - Math.cos(w) * Math.sin(omega) * Math.cos(I)) * y;\n  var y_ecl = (Math.cos(w) * Math.sin(omega) + Math.sin(w) * Math.cos(omega) * Math.cos(I)) * x + (-Math.sin(w) * Math.sin(omega) + Math.cos(w) * Math.cos(omega) * Math.cos(I)) * y;\n  var z_ecl = Math.sin(w) * Math.sin(I) * x + Math.cos(w) * Math.sin(I) * y;\n\n  // Offset by a vector, e.g... the primary's position or velocity depending on\n  // which vector we are transforming\n  return new _three.Vector3(x_ecl, y_ecl, z_ecl).add(offset);\n};\n\nexports.default = SolarSystem;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9hcHAvU29sYXJTeXN0ZW0uanM/MGYwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgQk9ESUVTLCB7XG4gIEFVLFxuICBQTEFORVRfVFlQRSxcbiAgU0hJUF9UWVBFLFxuICBBU1RFUk9JRF9UWVBFXG59IGZyb20gJy4vQm9kaWVzJztcblxuaW1wb3J0IHtcbiAgVmVjdG9yMyxcbiAgUXVhdGVybmlvblxufSBmcm9tICd0aHJlZSc7XG5cbmNvbnN0IEoyMDAwX2RhdGUgPSBtb21lbnQoJzIwMDAtMDEtMDFUMTI6MDA6MDBaJyk7XG5jb25zdCBKMjAwMF9lcG9jaCA9IDI0NTE1NDUuMDtcblxuZnVuY3Rpb24gU29sYXJTeXN0ZW0oKSB7XG5cbiAgLy8gSW5pdGlhbGl6ZSBtYXBcbiAgY29uc3QgYm9keU1hcCA9IG5ldyBNYXAoT2JqZWN0LmtleXMoQk9ESUVTKVxuICAgIC5tYXAoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIGxldCBwbGFuZXQgPSBCT0RJRVNbbmFtZV07XG4gICAgICBwbGFuZXQubmFtZSA9IG5hbWU7XG4gICAgICBwbGFuZXQuZGVyaXZlZCA9IHt9O1xuICAgICAgcmV0dXJuIFtuYW1lLCBwbGFuZXRdO1xuICAgIH0pKTtcblxuICAvLyBDcmVhdGUgYSBncmFwaCBiYXNlZCBvbiB0aGUgcHJpbWFyeSAtPiBzZWNvbmRhcnkgcmVsYXRpb25zaGlwXG4gIGNvbnN0IGJvZHlEZXBlbmRlbmN5R3JhcGggPSBBcnJheS5mcm9tKGJvZHlNYXAudmFsdWVzKCkpXG4gICAgLm1hcCgocGxhbmV0KSA9PiB7XG4gICAgICAvLyBBZGQgaW4gYmFjayByZWZlcmVuY2VzIHRvIHRoZSBwcmltYXJ5XG5cbiAgICAgIGlmIChwbGFuZXQucHJpbWFyeSkge1xuICAgICAgICBwbGFuZXQucHJpbWFyeSA9IGJvZHlNYXAuZ2V0KHBsYW5ldC5wcmltYXJ5KTtcbiAgICAgICAgcmV0dXJuIFtwbGFuZXQucHJpbWFyeSwgcGxhbmV0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgcGxhbmV0XTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5yZWR1Y2UoKHRyZWUsIFtwcmltYXJ5LCBib2R5XSkgPT4ge1xuICAgICAgLy8gT3JnYW5pemUgdGhlIG1hcCBieSBwcmltYXJ5IC0+IFtzZWNvbmRhcmllc11cblxuICAgICAgLy8gQmFzZSBjYXNlIGZvciBzdW5cbiAgICAgIGlmICghcHJpbWFyeSAmJiAhdHJlZS5oYXMoYm9keSkpIHtcbiAgICAgICAgdHJlZS5zZXQoYm9keSwgW10pO1xuICAgICAgICByZXR1cm4gdHJlZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0cmVlLmhhcyhwcmltYXJ5KSlcbiAgICAgICAgdHJlZS5zZXQocHJpbWFyeSwgW10pO1xuXG4gICAgICB0cmVlLmdldChwcmltYXJ5KVxuICAgICAgICAucHVzaChib2R5KTtcbiAgICAgIHJldHVybiB0cmVlO1xuXG4gICAgfSwgbmV3IE1hcCgpKTtcblxuICAvLyBTZXQgdGhlIHNlY29uZGFyaWVzIGFzIGEgcHJvcGVydHkgb250byBlYWNoIGJvZHlcbiAgZm9yIChsZXQgW3ByaW1hcnksIHNlY29uZGFyaWVzXSBvZiBib2R5RGVwZW5kZW5jeUdyYXBoLmVudHJpZXMoKSkge1xuICAgIHByaW1hcnkuc2Vjb25kYXJpZXMgPSBzZWNvbmRhcmllcztcbiAgfVxuXG4gIGNvbnN0IHNvcnRlZEJvZGllcyA9IFtdO1xuICBsZXQgc3VuID0gQXJyYXkuZnJvbShib2R5TWFwLnZhbHVlcygpKVxuICAgIC5maW5kKChib2R5KSA9PiAhYm9keS5wcmltYXJ5KTtcblxuICBmdW5jdGlvbiBmbGF0dGVuKGJvZHkpIHtcbiAgICBpZiAoIWJvZHkpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gKGJvZHkuc2Vjb25kYXJpZXMgfHwgW10pXG4gICAgICAucmVkdWNlKChib2RpZXMsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGJvZGllcy5jb25jYXQoZmxhdHRlbihiKSk7XG4gICAgICB9LCBbYm9keV0pO1xuICB9XG5cbiAgdGhpcy5wbGFuZXRzID0gZmxhdHRlbihzdW4pO1xuICB0aGlzLmJvZGllcyA9IFtdO1xufTtcblxuU29sYXJTeXN0ZW0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0LCBkdCkge1xuXG4gIGxldCBjdXJyZW50RGF0ZSA9IG1vbWVudCh0ICsgZHQpO1xuICBsZXQgVCA9IHRoaXMuX2NhbGN1bGF0ZUp1bGlhbkRhdGUoY3VycmVudERhdGUpO1xuXG4gIHRoaXMucGxhbmV0cy5mb3JFYWNoKGZ1bmN0aW9uIChwbGFuZXQpIHtcblxuICAgIC8vIERvbid0IGNhbGN1bGF0ZSBkYXRhIGZvciB0aGUgc3VuOyB0cmVhdCBhcyBzdGF0aW9uYXJ5XG4gICAgaWYgKHBsYW5ldC5uYW1lID09PSAnc3VuJykge1xuICAgICAgcGxhbmV0LmRlcml2ZWQgPSB7XG4gICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygwLCAwLCAwKSxcbiAgICAgICAgdmVsb2NpdHk6IG5ldyBWZWN0b3IzKDAsIDAsIDApLFxuICAgICAgICBhcG9hcHNpczogbmV3IFZlY3RvcjMoMCwgMCwgMCksXG4gICAgICAgIHBlcmlhcHNpczogbmV3IFZlY3RvcjMoMCwgMCwgMCksXG4gICAgICAgIGNlbnRlcjogbmV3IFZlY3RvcjMoMCwgMCwgMClcbiAgICAgIH07XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQga2VwbGVyX2VsZW1lbnRzID0gcGxhbmV0LmtlcGxlcl9lbGVtZW50cztcbiAgICBsZXQgcGxhbmV0X2NvbnN0YW50cyA9IHBsYW5ldC5jb25zdGFudHM7XG4gICAgbGV0IHByaW1hcnkgPSBwbGFuZXQucHJpbWFyeTtcbiAgICBsZXQgZGVyaXZlZCA9IHBsYW5ldC5kZXJpdmVkO1xuICAgIGxldCB1ID0gcHJpbWFyeS5jb25zdGFudHMudTtcblxuICAgIC8vIEZvciBib2RpZXMuLi5cbiAgICAvLyAgLT4gQ2FsY3VsYXRlIGluaXRpYWwgciwgdiB1c2luZyBrZXBsZXJfZWxlbWVudHNcbiAgICAvLyAgLT4gSW50ZWdyYXRlIHRvIGZpbmQgcicsIHYnXG4gICAgLy8gIC0+IFVzZSByJywgdicgdG8gY29tcHV0ZSBrZXBsZXIgZWxlbWVudHNcblxuICAgIGxldCBhID0ga2VwbGVyX2VsZW1lbnRzLmFbMF0gKyBrZXBsZXJfZWxlbWVudHMuYVsxXSAqIFQ7XG4gICAgbGV0IGUgPSBrZXBsZXJfZWxlbWVudHMuZVswXSArIGtlcGxlcl9lbGVtZW50cy5lWzFdICogVDtcbiAgICBsZXQgSSA9IGtlcGxlcl9lbGVtZW50cy5JWzBdICsga2VwbGVyX2VsZW1lbnRzLklbMV0gKiBUO1xuICAgIGxldCBMID0ga2VwbGVyX2VsZW1lbnRzLkxbMF0gKyBrZXBsZXJfZWxlbWVudHMuTFsxXSAqIFQ7XG4gICAgbGV0IHcgPSBrZXBsZXJfZWxlbWVudHMud1swXSArIGtlcGxlcl9lbGVtZW50cy53WzFdICogVDtcbiAgICBsZXQgb21lZ2EgPSBrZXBsZXJfZWxlbWVudHMub21lZ2FbMF0gKyBrZXBsZXJfZWxlbWVudHMub21lZ2FbMV0gKiBUO1xuICAgIGxldCBwZXJ0dXJiYXRpb25zID0ga2VwbGVyX2VsZW1lbnRzLnBlcnR1cmJhdGlvbnM7XG4gICAgbGV0IE0gPSB0aGlzLl9jYWxjdWxhdGVNZWFuQW5vbWFseShMLCB3LCBwZXJ0dXJiYXRpb25zLCBUKTtcblxuICAgIGxldCBkZWx0YSA9IHRoaXMuX3RvQ2FydGVzaWFuQ29vcmRpbmF0ZXMocHJpbWFyeSwgYSwgZSwgSSwgTCwgdywgb21lZ2EsIE0pO1xuICAgIGxldCBwb3NpdGlvbiA9IGRlbHRhLnBvc2l0aW9uO1xuICAgIGxldCB2ZWxvY2l0eSA9IGRlbHRhLnZlbG9jaXR5O1xuXG4gICAgLy8gU2VtaS1taW5vciBheGlzXG4gICAgbGV0IGIgPSBhICogTWF0aC5zcXJ0KDEgLSBNYXRoLnBvdyhlLCAyKSk7XG4gICAgbGV0IHBlcmlhcHNpcyA9IG5ldyBWZWN0b3IzKGEgKiAoMSAtIGUpLCAwLCAwKTtcbiAgICBsZXQgYXBvYXBzaXMgPSBuZXcgVmVjdG9yMygtYSAqICgxICsgZSksIDAsIDApO1xuICAgIGxldCBjZW50ZXIgPSBuZXcgVmVjdG9yMyhwZXJpYXBzaXMueCAtIGEsIDAsIDApO1xuXG4gICAgbGV0IHJvdGF0aW9uID0gKGRlcml2ZWQucm90YXRpb24gfHwgMCkgK1xuICAgICAgMiAqIE1hdGguUEkgKiBkdCAvXG4gICAgICAoKHBsYW5ldF9jb25zdGFudHMucm90YXRpb25fcGVyaW9kIHx8IDEpICogODY0MDBlMyk7XG5cbiAgICAvLyBDb252ZXJ0IHBhcmFtcyB0byByYWRpYW5zIGZvciB0aGlzIG5leHQgdHJhbnNmb3JtYXRpb25cbiAgICBsZXQgYXJndW1lbnRQZXJpaGVsaW9uID0gKHcgLSBvbWVnYSkgKiAoTWF0aC5QSSAvIDE4MCk7XG4gICAgb21lZ2EgPSBvbWVnYSAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICBJID0gSSAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICB3ID0gdyAqIChNYXRoLlBJIC8gMTgwKTtcblxuICAgIHBsYW5ldC5kZXJpdmVkID0ge1xuICAgICAgVDogVCxcbiAgICAgIGE6IGEsXG4gICAgICBlOiBlLFxuICAgICAgSTogSSxcbiAgICAgIHc6IHcsXG4gICAgICBvbWVnYTogb21lZ2EsXG4gICAgICBhcmd1bWVudFBlcmloZWxpb246IGFyZ3VtZW50UGVyaWhlbGlvbixcbiAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgIHBvc2l0aW9uX2luX3BsYW5lOiBkZWx0YS5wb3NpdGlvbl9pbl9wbGFuZSxcbiAgICAgIHZlbG9jaXR5OiB2ZWxvY2l0eSxcbiAgICAgIHNlbWlNYWpvckF4aXM6IGEsXG4gICAgICBzZW1pTWlub3JBeGlzOiBiLFxuICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgY2VudGVyOiB0aGlzLl90cmFuc2Zvcm1Ub0VjbGlwdGljKHByaW1hcnkuZGVyaXZlZC5wb3NpdGlvbiwgY2VudGVyLCBhcmd1bWVudFBlcmloZWxpb24sIG9tZWdhLCBJKSxcbiAgICAgIGNlbnRlcl9pbl9wbGFuZTogY2VudGVyLFxuICAgICAgcGVyaWFwc2lzOiB0aGlzLl90cmFuc2Zvcm1Ub0VjbGlwdGljKHByaW1hcnkuZGVyaXZlZC5wb3NpdGlvbiwgcGVyaWFwc2lzLCBhcmd1bWVudFBlcmloZWxpb24sIG9tZWdhLCBJKSxcbiAgICAgIGFwb2Fwc2lzOiB0aGlzLl90cmFuc2Zvcm1Ub0VjbGlwdGljKHByaW1hcnkuZGVyaXZlZC5wb3NpdGlvbiwgYXBvYXBzaXMsIGFyZ3VtZW50UGVyaWhlbGlvbiwgb21lZ2EsIEkpLFxuICAgIH1cblxuICB9LCB0aGlzKTtcblxuICB0aGlzLmxhc3RUaW1lID0gdCArIGR0O1xufTtcblxuU29sYXJTeXN0ZW0ucHJvdG90eXBlLl90b0NhcnRlc2lhbkNvb3JkaW5hdGVzID0gZnVuY3Rpb24gKHByaW1hcnksIGEsIGUsIEksIEwsIHcsIG9tZWdhLCBNKSB7XG5cbiAgbGV0IGFyZ3VtZW50UGVyaWhlbGlvbiA9IHcgLSBvbWVnYTtcbiAgbGV0IHUgPSBwcmltYXJ5LmNvbnN0YW50cy51O1xuXG4gIGNvbnN0IEUgPSB0aGlzLl9jYWxjdWxhdGVFY2NlbnRyaWNBbm9tYWx5KGUsIE0pO1xuXG4gIGxldCB0cnVlQW5vbWFseSA9IE1hdGguc2lnbihFKSAqIE1hdGguYWNvcyhcbiAgICAoTWF0aC5jb3MoKE1hdGguUEkgLyAxODApICogRSkgLSBlKSAvXG4gICAgKDEgLSBlICogTWF0aC5jb3MoKE1hdGguUEkgLyAxODApICogRSkpKVxuXG4gIC8vIENhbGN1bGF0ZSBoZWxpb2NlbnRyaWMgY29vcmRpbmF0ZXMgaW4gdGhlIHBsYW5ldHMgb3JiaXRhbCBwbGFuZVxuICBsZXQgaGVsaW9DZW50cmljUG9zaXRpb24gPSBuZXcgVmVjdG9yMyhcbiAgICBhICogKE1hdGguY29zKChNYXRoLlBJIC8gMTgwKSAqIEUpIC0gZSksXG4gICAgYSAqIE1hdGguc3FydCgxIC0gTWF0aC5wb3coZSwgMikpICogTWF0aC5zaW4oKE1hdGguUEkgLyAxODApICogRSksXG4gICAgMCk7XG5cbiAgLy8gQ29udmVydCB0byB0aGUgZWNsaXB0aWMgcGxhbmVcbiAgbGV0IGVjbGlwdGljUG9zaXRpb24gPSB0aGlzLl90cmFuc2Zvcm1Ub0VjbGlwdGljKFxuICAgIHByaW1hcnkuZGVyaXZlZC5wb3NpdGlvbixcbiAgICBoZWxpb0NlbnRyaWNQb3NpdGlvbixcbiAgICBhcmd1bWVudFBlcmloZWxpb24gKiBNYXRoLlBJIC8gMTgwLFxuICAgIG9tZWdhICogTWF0aC5QSSAvIDE4MCxcbiAgICBJICogTWF0aC5QSSAvIDE4MCk7XG5cbiAgLy8gQ2FsY3VsYXRlIHRoZSB2ZWxvY2l0eSBpbiB0aGUgcGxhbmV0cyBvcmJpdGFsIHBsYW5ldFxuICBsZXQgaGVsaW9DZW50cmljVmVsb2NpdHkgPSBuZXcgVmVjdG9yMygtTWF0aC5zaW4odHJ1ZUFub21hbHkpLFxuICAgICAgZSArIE1hdGguY29zKHRydWVBbm9tYWx5KSxcbiAgICAgIDApXG4gICAgLm11bHRpcGx5U2NhbGFyKChNYXRoLnNxcnQodSAvIE1hdGgucG93KGEsIDMpKSAqIGEpIC8gTWF0aC5zcXJ0KDEgLSBNYXRoLnBvdyhlLCAyKSkpO1xuXG4gIC8vIENvbnZlcnQgdG8gdGhlIGVjbGlwdGljIHBsYW5lXG4gIGxldCBlY2xpcHRpY1ZlbG9jaXR5ID0gdGhpcy5fdHJhbnNmb3JtVG9FY2xpcHRpYyhcbiAgICBuZXcgVmVjdG9yMygwLCAwLCAwKSwgLy8gRG9uJ3Qgb2Zmc2V0OyB3ZSBqdXN0IHdhbnQgdGhlIG9yYml0YWwgdmVsb2NpdHlcbiAgICBoZWxpb0NlbnRyaWNWZWxvY2l0eSxcbiAgICBhcmd1bWVudFBlcmloZWxpb24gKiBNYXRoLlBJIC8gMTgwLFxuICAgIG9tZWdhICogTWF0aC5QSSAvIDE4MCxcbiAgICBJICogTWF0aC5QSSAvIDE4MCk7XG5cbiAgcmV0dXJuIHtcbiAgICBtZWFuQW5vbWFseTogTSAqIChNYXRoLlBJIC8gMTgwKSxcbiAgICBlY2NlbnRyaWNBbm9tYWx5OiBFICogKE1hdGguUEkgLyAxODApLFxuICAgIHRydWVBbm9tYWx5OiB0cnVlQW5vbWFseSxcbiAgICBwb3NpdGlvbjogZWNsaXB0aWNQb3NpdGlvbixcbiAgICBwb3NpdGlvbl9pbl9wbGFuZTogaGVsaW9DZW50cmljUG9zaXRpb24sXG4gICAgdmVsb2NpdHk6IGVjbGlwdGljVmVsb2NpdHksXG4gIH07XG59O1xuXG5Tb2xhclN5c3RlbS5wcm90b3R5cGUuX2NhbGN1bGF0ZUp1bGlhbkRhdGUgPSBmdW5jdGlvbiAoZGF0ZSkge1xuICBsZXQgVGVwaCA9IEoyMDAwX2Vwb2NoICsgZGF0ZS5kaWZmKEoyMDAwX2RhdGUsICdkYXlzJywgdHJ1ZSk7XG4gIGxldCBUID0gKFRlcGggLSBKMjAwMF9lcG9jaCkgLyAzNjUyNTtcbiAgcmV0dXJuIFQ7XG59O1xuXG5Tb2xhclN5c3RlbS5wcm90b3R5cGUuX2NhbGN1bGF0ZU1lYW5Bbm9tYWx5ID0gZnVuY3Rpb24gKEwsIHcsIHBlcnR1cmJhdGlvbnMsIFQpIHtcblxuICBsZXQgTSA9IEwgLSB3O1xuICBpZiAocGVydHVyYmF0aW9ucykge1xuICAgIE0gKz0gcGVydHVyYmF0aW9ucy5iICogTWF0aC5wb3coVCwgMikgK1xuICAgICAgcGVydHVyYmF0aW9ucy5jICogTWF0aC5jb3MocGVydHVyYmF0aW9ucy5mICogVCkgK1xuICAgICAgcGVydHVyYmF0aW9ucy5zICogTWF0aC5zaW4ocGVydHVyYmF0aW9ucy5mICogVCk7XG4gIH1cblxuICBNID0gTSAlIDM2MDtcbiAgaWYgKE0gPiAxODApIHtcbiAgICBNID0gTSAtIDM2MDtcbiAgfSBlbHNlIGlmIChNIDwgLTE4MCkge1xuICAgIE0gPSAzNjAgKyBNO1xuICB9XG5cbiAgcmV0dXJuIE07XG59O1xuXG5Tb2xhclN5c3RlbS5wcm90b3R5cGUuX2NhbGN1bGF0ZUVjY2VudHJpY0Fub21hbHkgPSBmdW5jdGlvbiAoZSwgTSkge1xuICAvLyBDYWxjdWxhdGUgZWNjZW50cmljIGFub21hbHksIEVcbiAgLy8gZV9zdGFyID0gZGVncmVlc1xuICAvLyBlID0gcmFkaWFuc1xuICBsZXQgdG9sID0gMTBlLTY7XG4gIGxldCBlX3N0YXIgPSA1Ny4yOTU3OCAqIGU7XG4gIGxldCBFID0gTSArIGVfc3RhciAqIE1hdGguc2luKChNYXRoLlBJIC8gMTgwKSAqIE0pO1xuICBsZXQgZGVsdGFFLCBkZWx0YU07XG4gIGxldCBudW1UaW1lcyA9IDA7XG4gIGRvIHtcbiAgICBkZWx0YU0gPSBNIC0gKEUgLSBlX3N0YXIgKiBNYXRoLnNpbigoTWF0aC5QSSAvIDE4MCkgKiBFKSk7XG4gICAgZGVsdGFFID0gZGVsdGFNIC8gKDEgLSBlICogTWF0aC5jb3MoKE1hdGguUEkgLyAxODApICogRSkpO1xuICAgIEUgPSBFICsgZGVsdGFFO1xuICAgIG51bVRpbWVzKys7XG4gIH0gd2hpbGUgKE1hdGguYWJzKGRlbHRhRSkgPiB0b2wgJiYgbnVtVGltZXMgPD0gMTApO1xuXG4gIGlmIChudW1UaW1lcyA9PT0gMTApIHtcbiAgICBjb25zb2xlLmxvZyhcIkRpZG4ndCBpdGVyYXRlIG9uIGEgc29sdXRpb24hXCIpO1xuICB9XG5cbiAgcmV0dXJuIEU7XG59O1xuXG5Tb2xhclN5c3RlbS5wcm90b3R5cGUuX3RyYW5zZm9ybVRvRWNsaXB0aWMgPSBmdW5jdGlvbiAob2Zmc2V0LCBwb3NpdGlvbiwgdywgb21lZ2EsIEkpIHtcblxuICBsZXQgeCA9IHBvc2l0aW9uLng7XG4gIGxldCB5ID0gcG9zaXRpb24ueTtcbiAgbGV0IHogPSBwb3NpdGlvbi56O1xuXG4gIGxldCB4X2VjbCA9XG4gICAgKE1hdGguY29zKHcpICogTWF0aC5jb3Mob21lZ2EpIC0gTWF0aC5zaW4odykgKiBNYXRoLnNpbihvbWVnYSkgKiBNYXRoLmNvcyhJKSkgKiB4ICtcbiAgICAoLU1hdGguc2luKHcpICogTWF0aC5jb3Mob21lZ2EpIC0gTWF0aC5jb3ModykgKiBNYXRoLnNpbihvbWVnYSkgKiBNYXRoLmNvcyhJKSkgKiB5O1xuICBsZXQgeV9lY2wgPVxuICAgIChNYXRoLmNvcyh3KSAqIE1hdGguc2luKG9tZWdhKSArIE1hdGguc2luKHcpICogTWF0aC5jb3Mob21lZ2EpICogTWF0aC5jb3MoSSkpICogeCArXG4gICAgKC1NYXRoLnNpbih3KSAqIE1hdGguc2luKG9tZWdhKSArIE1hdGguY29zKHcpICogTWF0aC5jb3Mob21lZ2EpICogTWF0aC5jb3MoSSkpICogeTtcbiAgbGV0IHpfZWNsID0gTWF0aC5zaW4odykgKiBNYXRoLnNpbihJKSAqIHggK1xuICAgIE1hdGguY29zKHcpICogTWF0aC5zaW4oSSkgKiB5O1xuXG4gIC8vIE9mZnNldCBieSBhIHZlY3RvciwgZS5nLi4uIHRoZSBwcmltYXJ5J3MgcG9zaXRpb24gb3IgdmVsb2NpdHkgZGVwZW5kaW5nIG9uXG4gIC8vIHdoaWNoIHZlY3RvciB3ZSBhcmUgdHJhbnNmb3JtaW5nXG4gIHJldHVybiBuZXcgVmVjdG9yMyh4X2VjbCwgeV9lY2wsIHpfZWNsKVxuICAgIC5hZGQob2Zmc2V0KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNvbGFyU3lzdGVtO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvU29sYXJTeXN0ZW0uanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBTUE7QUFDQTs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUF6Q0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQTBDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQTVDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUE2Q0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 118:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _three = __webpack_require__(1);\n\nvar THREE = _interopRequireWildcard(_three);\n\nvar _OrbitControls = __webpack_require__(3);\n\nvar _OrbitControls2 = _interopRequireDefault(_OrbitControls);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar POINTS = 8;\n\nfunction TestingRenderer(container) {\n\n  this.width = window.innerWidth;\n  this.height = window.innerHeight;\n  this.renderer = new THREE.WebGLRenderer();\n  this.renderer.setSize(this.width, this.height);\n\n  this.container = container;\n  container.appendChild(this.renderer.domElement);\n\n  this.scene = new THREE.Scene();\n};\n\nTestingRenderer.prototype.recenter = function () {};\n\nTestingRenderer.prototype.viewDidLoad = function (solarSystem) {\n\n  // initialize camera and scene\n  this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 0.01, 1000);\n  this.camera.position.z = 50;\n  this.scene.background = new THREE.Color('gray');\n\n  this.threeBody = new THREE.Mesh(new THREE.SphereGeometry(0.5, 32, 32), new THREE.MeshBasicMaterial({\n    color: 'black'\n  }));\n\n  var curve = new THREE.EllipseCurve(0, 0, // ax, aY\n  1, 1, // xRadius, yRadius\n  0, 2 * Math.PI, // aStartAngle, aEndAngle\n  false, // aClockwise\n  0 // aRotation\n  );\n\n  var pointsGeometry = new THREE.Path(curve.getPoints(POINTS)).createPointsGeometry(POINTS);\n\n  //Create the final object to add to the scene\n  var bufferGeometry = new THREE.BufferGeometry();\n  var vertices = [];\n  for (var i = 0; i < pointsGeometry.vertices.length; i++) {\n    vertices.push(pointsGeometry.vertices[i].x, pointsGeometry.vertices[i].y, pointsGeometry.vertices[i].z);\n  }\n\n  this.originalVertices = Array.from(vertices);\n  bufferGeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(vertices), 3));\n\n  var ellipse = new THREE.Line(bufferGeometry, new THREE.LineBasicMaterial({\n    color: 0xff0000\n  }));\n\n  //\n  // const ellipse = new THREE.Line(new THREE.RingGeometry(1, 1, 8),\n  //   new THREE.LineBasicMaterial({\n  //     color: 'red'\n  //   }));\n\n  this.ellipse = ellipse;\n  this.ellipse.scale.set(10, 5, 1);\n  // this.ellipse.matrix.setPosition(new THREE.Vector3(0, 0, 0));\n  // this.ellipse.matrix.scale(new THREE.Vector3(10, 5, 1));\n  // this.ellipse.matrixAutoUpdate = false;\n\n  this.angle = 0;\n\n  this.scene.add(this.threeBody);\n  this.scene.add(this.ellipse);\n  this.renderer.render(this.scene, this.camera);\n  this.orbitControls = new _OrbitControls2.default(this.camera, this.scene.domElement);\n\n  return Promise.resolve();\n};\n\nTestingRenderer.prototype.viewWillAppear = function () {};\nTestingRenderer.prototype.viewWillDisappear = function () {};\n\nTestingRenderer.prototype.render = function (solarSystem) {\n  var _this = this;\n\n  var threeBody = this.threeBody;\n  threeBody.position.set(10 * Math.cos(this.angle), 5 * Math.sin(this.angle), 0);\n\n  var scaledPosition = new THREE.Vector3().copy(threeBody.position).multiply(new THREE.Vector3(1 / 10, 1 / 5, 1));\n\n  // let newVertices = [];\n  // let angle = this.angle;\n  // for (let i = 0; i < 9; i++) {\n  //\n  //   let vertex = new THREE.Vector3(10 * Math.cos(angle), 5 * Math.sin(angle), 0);\n  //   newVertices.push(vertex);\n  //   angle += 2 * Math.PI / 8;\n  // }\n  //\n  //\n\n  var geometry = this.ellipse.geometry;\n  var positions = geometry.attributes.position.array;\n  var range = Math.floor(positions.length / 3 / 2);\n  var verticesToTest = [];\n\n  for (var i = 0; i < range; i++) {\n    var offset = (i * 2 + 1) * 3;\n    verticesToTest.push(new THREE.Vector3(this.originalVertices[offset], this.originalVertices[offset + 1], this.originalVertices[offset + 2]));\n  };\n\n  var sorted = verticesToTest.map(function (vertex, idx) {\n    return [vertex.distanceTo(scaledPosition), vertex, idx];\n  }).sort(function (left, right) {\n    return left[0] - right[0];\n  });\n\n  sorted.forEach(function (element, idx) {\n    var vertex = element[1];\n    var offset = (element[2] * 2 + 1) * 3;\n    if (idx == 0) {\n      positions[offset] = scaledPosition.x;\n      positions[offset + 1] = scaledPosition.y;\n      positions[offset + 2] = scaledPosition.z;\n    } else {\n      positions[offset] = _this.originalVertices[offset];\n      positions[offset + 1] = _this.originalVertices[offset + 1];\n      positions[offset + 2] = _this.originalVertices[offset + 2];\n    }\n  });\n\n  geometry.attributes.position.needsUpdate = true;\n\n  //this.ellipse.updateMatrix();\n  //this.ellipse.geometry.setDrawRange(0, vertices.length)\n\n  // const angle = Math.atan2(threeBody.position.y, threeBody.position.x) - Math.atan2(closest.y, closest.x);\n  //this.ringBody.scale.set(10, 5, 1);\n  //this.ringBody.rotation.set(0, 0, 0);\n  //this.ringBody.rotateZ(angle);\n  this.angle += Math.PI / 256;\n  this.renderer.render(this.scene, this.camera);\n};\n\nexports.default = TestingRenderer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9hcHAvVGVzdGluZ1JlbmRlcmVyLmpzP2QxNTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IE9yYml0Q29udHJvbHMgZnJvbSAnLi9saWIvT3JiaXRDb250cm9scyc7XG5cbmNvbnN0IFBPSU5UUyA9IDg7XG5cbmZ1bmN0aW9uIFRlc3RpbmdSZW5kZXJlcihjb250YWluZXIpIHtcblxuICB0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIHRoaXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICB0aGlzLnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcbiAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcblxuICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cbiAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xufTtcblxuVGVzdGluZ1JlbmRlcmVyLnByb3RvdHlwZS5yZWNlbnRlciA9IGZ1bmN0aW9uICgpIHt9O1xuXG5UZXN0aW5nUmVuZGVyZXIucHJvdG90eXBlLnZpZXdEaWRMb2FkID0gZnVuY3Rpb24gKHNvbGFyU3lzdGVtKSB7XG5cbiAgLy8gaW5pdGlhbGl6ZSBjYW1lcmEgYW5kIHNjZW5lXG4gIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCB0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQsIDAuMDEsIDEwMDApXG4gIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1MDtcbiAgdGhpcy5zY2VuZS5iYWNrZ3JvdW5kID0gbmV3IFRIUkVFLkNvbG9yKCdncmF5Jyk7XG5cbiAgdGhpcy50aHJlZUJvZHkgPSBuZXcgVEhSRUUuTWVzaChcbiAgICBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC41LCAzMiwgMzIpLFxuICAgIG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XG4gICAgICBjb2xvcjogJ2JsYWNrJ1xuICAgIH0pKTtcblxuICBjb25zdCBjdXJ2ZSA9IG5ldyBUSFJFRS5FbGxpcHNlQ3VydmUoXG4gICAgMCwgMCwgLy8gYXgsIGFZXG4gICAgMSwgMSwgLy8geFJhZGl1cywgeVJhZGl1c1xuICAgIDAsIDIgKiBNYXRoLlBJLCAvLyBhU3RhcnRBbmdsZSwgYUVuZEFuZ2xlXG4gICAgZmFsc2UsIC8vIGFDbG9ja3dpc2VcbiAgICAwIC8vIGFSb3RhdGlvblxuICApO1xuXG4gIGNvbnN0IHBvaW50c0dlb21ldHJ5ID0gbmV3IFRIUkVFLlBhdGgoY3VydmUuZ2V0UG9pbnRzKFBPSU5UUykpXG4gICAgLmNyZWF0ZVBvaW50c0dlb21ldHJ5KFBPSU5UUyk7XG5cbiAgLy9DcmVhdGUgdGhlIGZpbmFsIG9iamVjdCB0byBhZGQgdG8gdGhlIHNjZW5lXG4gIGNvbnN0IGJ1ZmZlckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7XG4gIGNvbnN0IHZlcnRpY2VzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzR2VvbWV0cnkudmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2ZXJ0aWNlcy5wdXNoKFxuICAgICAgcG9pbnRzR2VvbWV0cnkudmVydGljZXNbaV0ueCxcbiAgICAgIHBvaW50c0dlb21ldHJ5LnZlcnRpY2VzW2ldLnksXG4gICAgICBwb2ludHNHZW9tZXRyeS52ZXJ0aWNlc1tpXS56XG4gICAgKTtcbiAgfVxuXG4gIHRoaXMub3JpZ2luYWxWZXJ0aWNlcyA9IEFycmF5LmZyb20odmVydGljZXMpO1xuICBidWZmZXJHZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKSwgMykpO1xuXG4gIGNvbnN0IGVsbGlwc2UgPSBuZXcgVEhSRUUuTGluZShcbiAgICBidWZmZXJHZW9tZXRyeSxcbiAgICBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IDB4ZmYwMDAwXG4gICAgfSkpO1xuXG4gIC8vXG4gIC8vIGNvbnN0IGVsbGlwc2UgPSBuZXcgVEhSRUUuTGluZShuZXcgVEhSRUUuUmluZ0dlb21ldHJ5KDEsIDEsIDgpLFxuICAvLyAgIG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7XG4gIC8vICAgICBjb2xvcjogJ3JlZCdcbiAgLy8gICB9KSk7XG5cbiAgdGhpcy5lbGxpcHNlID0gZWxsaXBzZTtcbiAgdGhpcy5lbGxpcHNlLnNjYWxlLnNldCgxMCwgNSwgMSk7XG4gIC8vIHRoaXMuZWxsaXBzZS5tYXRyaXguc2V0UG9zaXRpb24obmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCkpO1xuICAvLyB0aGlzLmVsbGlwc2UubWF0cml4LnNjYWxlKG5ldyBUSFJFRS5WZWN0b3IzKDEwLCA1LCAxKSk7XG4gIC8vIHRoaXMuZWxsaXBzZS5tYXRyaXhBdXRvVXBkYXRlID0gZmFsc2U7XG5cbiAgdGhpcy5hbmdsZSA9IDA7XG5cbiAgdGhpcy5zY2VuZS5hZGQodGhpcy50aHJlZUJvZHkpO1xuICB0aGlzLnNjZW5lLmFkZCh0aGlzLmVsbGlwc2UpO1xuICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSk7XG4gIHRoaXMub3JiaXRDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKHRoaXMuY2FtZXJhLCB0aGlzLnNjZW5lLmRvbUVsZW1lbnQpO1xuXG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn07XG5cblRlc3RpbmdSZW5kZXJlci5wcm90b3R5cGUudmlld1dpbGxBcHBlYXIgPSBmdW5jdGlvbiAoKSB7fTtcblRlc3RpbmdSZW5kZXJlci5wcm90b3R5cGUudmlld1dpbGxEaXNhcHBlYXIgPSBmdW5jdGlvbiAoKSB7fTtcblxuVGVzdGluZ1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc29sYXJTeXN0ZW0pIHtcblxuICBsZXQgdGhyZWVCb2R5ID0gdGhpcy50aHJlZUJvZHk7XG4gIHRocmVlQm9keS5wb3NpdGlvbi5zZXQoMTAgKiBNYXRoLmNvcyh0aGlzLmFuZ2xlKSwgNSAqIE1hdGguc2luKHRoaXMuYW5nbGUpLCAwKTtcblxuICBsZXQgc2NhbGVkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpXG4gICAgLmNvcHkodGhyZWVCb2R5LnBvc2l0aW9uKVxuICAgIC5tdWx0aXBseShuZXcgVEhSRUUuVmVjdG9yMygxIC8gMTAsIDEgLyA1LCAxKSk7XG5cbiAgLy8gbGV0IG5ld1ZlcnRpY2VzID0gW107XG4gIC8vIGxldCBhbmdsZSA9IHRoaXMuYW5nbGU7XG4gIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gIC8vXG4gIC8vICAgbGV0IHZlcnRleCA9IG5ldyBUSFJFRS5WZWN0b3IzKDEwICogTWF0aC5jb3MoYW5nbGUpLCA1ICogTWF0aC5zaW4oYW5nbGUpLCAwKTtcbiAgLy8gICBuZXdWZXJ0aWNlcy5wdXNoKHZlcnRleCk7XG4gIC8vICAgYW5nbGUgKz0gMiAqIE1hdGguUEkgLyA4O1xuICAvLyB9XG4gIC8vXG4gIC8vXG5cbiAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLmVsbGlwc2UuZ2VvbWV0cnk7XG4gIGNvbnN0IHBvc2l0aW9ucyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XG4gIGNvbnN0IHJhbmdlID0gTWF0aC5mbG9vcihwb3NpdGlvbnMubGVuZ3RoIC8gMyAvIDIpO1xuICBjb25zdCB2ZXJ0aWNlc1RvVGVzdCA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2U7IGkrKykge1xuICAgIGNvbnN0IG9mZnNldCA9IChpICogMiArIDEpICogMztcbiAgICB2ZXJ0aWNlc1RvVGVzdC5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKHRoaXMub3JpZ2luYWxWZXJ0aWNlc1tvZmZzZXRdLFxuICAgICAgdGhpcy5vcmlnaW5hbFZlcnRpY2VzW29mZnNldCArIDFdLCB0aGlzLm9yaWdpbmFsVmVydGljZXNbb2Zmc2V0ICsgMl0pKTtcbiAgfTtcblxuICBjb25zdCBzb3J0ZWQgPSB2ZXJ0aWNlc1RvVGVzdC5tYXAoKHZlcnRleCwgaWR4KSA9PiBbdmVydGV4LmRpc3RhbmNlVG8oc2NhbGVkUG9zaXRpb24pLCB2ZXJ0ZXgsIGlkeF0pXG4gICAgLnNvcnQoKGxlZnQsIHJpZ2h0KSA9PiB7XG4gICAgICByZXR1cm4gbGVmdFswXSAtIHJpZ2h0WzBdO1xuICAgIH0pO1xuXG4gIHNvcnRlZC5mb3JFYWNoKChlbGVtZW50LCBpZHgpID0+IHtcbiAgICBsZXQgdmVydGV4ID0gZWxlbWVudFsxXTtcbiAgICBsZXQgb2Zmc2V0ID0gKGVsZW1lbnRbMl0gKiAyICsgMSkgKiAzO1xuICAgIGlmIChpZHggPT0gMCkge1xuICAgICAgcG9zaXRpb25zW29mZnNldF0gPSBzY2FsZWRQb3NpdGlvbi54O1xuICAgICAgcG9zaXRpb25zW29mZnNldCArIDFdID0gc2NhbGVkUG9zaXRpb24ueVxuICAgICAgcG9zaXRpb25zW29mZnNldCArIDJdID0gc2NhbGVkUG9zaXRpb24uejtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zaXRpb25zW29mZnNldF0gPSB0aGlzLm9yaWdpbmFsVmVydGljZXNbb2Zmc2V0XTtcbiAgICAgIHBvc2l0aW9uc1tvZmZzZXQgKyAxXSA9IHRoaXMub3JpZ2luYWxWZXJ0aWNlc1tvZmZzZXQgKyAxXTtcbiAgICAgIHBvc2l0aW9uc1tvZmZzZXQgKyAyXSA9IHRoaXMub3JpZ2luYWxWZXJ0aWNlc1tvZmZzZXQgKyAyXTtcbiAgICB9XG4gIH0pO1xuXG4gIGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG4gIC8vdGhpcy5lbGxpcHNlLnVwZGF0ZU1hdHJpeCgpO1xuICAvL3RoaXMuZWxsaXBzZS5nZW9tZXRyeS5zZXREcmF3UmFuZ2UoMCwgdmVydGljZXMubGVuZ3RoKVxuXG4gIC8vIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMih0aHJlZUJvZHkucG9zaXRpb24ueSwgdGhyZWVCb2R5LnBvc2l0aW9uLngpIC0gTWF0aC5hdGFuMihjbG9zZXN0LnksIGNsb3Nlc3QueCk7XG4gIC8vdGhpcy5yaW5nQm9keS5zY2FsZS5zZXQoMTAsIDUsIDEpO1xuICAvL3RoaXMucmluZ0JvZHkucm90YXRpb24uc2V0KDAsIDAsIDApO1xuICAvL3RoaXMucmluZ0JvZHkucm90YXRlWihhbmdsZSk7XG4gIHRoaXMuYW5nbGUgKz0gTWF0aC5QSSAvIDI1NjtcbiAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVGVzdGluZ1JlbmRlcmVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvVGVzdGluZ1JlbmRlcmVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 119:
/***/ (function(module, exports, __webpack_require__) {

eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(120);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(135)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./styles.css\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./styles.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2Nzcy9zdHlsZXMuY3NzPzQyYzkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZXMuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3N0eWxlcy5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZXMuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jc3Mvc3R5bGVzLmNzc1xuLy8gbW9kdWxlIGlkID0gMTE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 120:
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(121)();\n// imports\n\n\n// module\nexports.push([module.i, \"* {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n#camera-view canvas {\\n  display: block;\\n}\\n\\n#map-view canvas {\\n  display: block;\\n}\\n\\n#hud {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    background-color: lightgray;\\n    opacity: 0.6;\\n    z-index: 100;\\n    display: flex;\\n}\\n\\n#stats {\\n    position: absolute;\\n    bottom: 0px;\\n    width: 100%;\\n    text-align: center;\\n    z-index: 100;\\n    display: block;\\n}\\n\", \"\"]);\n\n// exports\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2Nzcy9zdHlsZXMuY3NzPzZiZmQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIqIHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxufVxcblxcbmh0bWwsIGJvZHkge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxufVxcblxcbiNjYW1lcmEtdmlldyBjYW52YXMge1xcbiAgZGlzcGxheTogYmxvY2s7XFxufVxcblxcbiNtYXAtdmlldyBjYW52YXMge1xcbiAgZGlzcGxheTogYmxvY2s7XFxufVxcblxcbiNodWQge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogMDtcXG4gICAgbGVmdDogMDtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTtcXG4gICAgb3BhY2l0eTogMC42O1xcbiAgICB6LWluZGV4OiAxMDA7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxufVxcblxcbiNzdGF0cyB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgYm90dG9tOiAwcHg7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICAgIHotaW5kZXg6IDEwMDtcXG4gICAgZGlzcGxheTogYmxvY2s7XFxufVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9jc3MtbG9hZGVyIS4vc3JjL2Nzcy9zdHlsZXMuY3NzXG4vLyBtb2R1bGUgaWQgPSAxMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 121:
/***/ (function(module, exports) {

eval("/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcz9kYTA0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcbiovXHJcbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGxpc3QgPSBbXTtcclxuXHJcblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xyXG5cdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdHZhciByZXN1bHQgPSBbXTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0aWYoaXRlbVsyXSkge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgaXRlbVsxXSArIFwifVwiKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChpdGVtWzFdKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3VsdC5qb2luKFwiXCIpO1xyXG5cdH07XHJcblxyXG5cdC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XHJcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xyXG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIFwiXCJdXTtcclxuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaWQgPSB0aGlzW2ldWzBdO1xyXG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXHJcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcclxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcclxuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0Ly8gIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcclxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcclxuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRpdGVtWzJdID0gbWVkaWFRdWVyeTtcclxuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cdHJldHVybiBsaXN0O1xyXG59O1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDEyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 122:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"earthmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9lYXJ0aG1hcC5qcGc/MjYxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJlYXJ0aG1hcC5qcGdcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RvY3MvZWFydGhtYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 123:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"jupitermap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9qdXBpdGVybWFwLmpwZz84Yzk5Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImp1cGl0ZXJtYXAuanBnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kb2NzL2p1cGl0ZXJtYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 124:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"lensflare.png\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9sZW5zZmxhcmUucG5nPzIzZTUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwibGVuc2ZsYXJlLnBuZ1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZG9jcy9sZW5zZmxhcmUucG5nXG4vLyBtb2R1bGUgaWQgPSAxMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 125:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"marsmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9tYXJzbWFwLmpwZz80NTdlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm1hcnNtYXAuanBnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kb2NzL21hcnNtYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 126:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"mercurymap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9tZXJjdXJ5bWFwLmpwZz8zODM5Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm1lcmN1cnltYXAuanBnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kb2NzL21lcmN1cnltYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 127:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"moonmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9tb29ubWFwLmpwZz8xYmZiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm1vb25tYXAuanBnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kb2NzL21vb25tYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 128:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"neptunemap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9uZXB0dW5lbWFwLmpwZz8wYzk1Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIm5lcHR1bmVtYXAuanBnXCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9kb2NzL25lcHR1bmVtYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 129:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"plutomap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9wbHV0b21hcC5qcGc/MzhiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJwbHV0b21hcC5qcGdcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RvY3MvcGx1dG9tYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 130:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"saturnmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9zYXR1cm5tYXAuanBnPzQ4MDEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwic2F0dXJubWFwLmpwZ1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZG9jcy9zYXR1cm5tYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 131:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"sunmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy9zdW5tYXAuanBnPzEyZDkiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwic3VubWFwLmpwZ1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZG9jcy9zdW5tYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 132:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"uranusmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy91cmFudXNtYXAuanBnPzY0MmQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwidXJhbnVzbWFwLmpwZ1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZG9jcy91cmFudXNtYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 133:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"venusmap.jpg\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZG9jcy92ZW51c21hcC5qcGc/NDZmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJ2ZW51c21hcC5qcGdcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2RvY3MvdmVudXNtYXAuanBnXG4vLyBtb2R1bGUgaWQgPSAxMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 135:
/***/ (function(module, exports) {

eval("/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzP2I5ODAiXSwic291cmNlc0NvbnRlbnQiOlsiLypcclxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcclxuKi9cclxudmFyIHN0eWxlc0luRG9tID0ge30sXHJcblx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XHJcblx0XHR2YXIgbWVtbztcclxuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdHJldHVybiBtZW1vO1xyXG5cdFx0fTtcclxuXHR9LFxyXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xyXG5cdH0pLFxyXG5cdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcblx0fSksXHJcblx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXHJcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXHJcblx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xyXG5cdGlmKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xyXG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XHJcblx0fVxyXG5cclxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XHJcblxyXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiA8aGVhZD4uXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcclxuXHJcblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xyXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XHJcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdH1cclxuXHRcdGlmKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcclxuXHRcdH1cclxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xyXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oKTtcclxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcclxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdHZhciBzdHlsZXMgPSBbXTtcclxuXHR2YXIgbmV3U3R5bGVzID0ge307XHJcblx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcclxuXHRcdHZhciBpZCA9IGl0ZW1bMF07XHJcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XHJcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcclxuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKVxyXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XHJcblx0fVxyXG5cdHJldHVybiBzdHlsZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpIHtcclxuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XHJcblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcclxuXHRcdGlmKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xyXG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XHJcblx0XHR9IGVsc2UgaWYobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcclxuXHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0XHR9XHJcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XHJcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XHJcblx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLlwiKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcclxuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdHZhciBpZHggPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlRWxlbWVudCk7XHJcblx0aWYoaWR4ID49IDApIHtcclxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcclxuXHR2YXIgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG5cdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpO1xyXG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpIHtcclxuXHR2YXIgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuXHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGlua0VsZW1lbnQpO1xyXG5cdHJldHVybiBsaW5rRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XHJcblx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XHJcblxyXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xyXG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcclxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcclxuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xyXG5cdH0gZWxzZSBpZihvYmouc291cmNlTWFwICYmXHJcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcclxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdGlmKHN0eWxlRWxlbWVudC5ocmVmKVxyXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xyXG5cdFx0fTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xyXG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0dXBkYXRlKG9iaik7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcclxuXHRcdGlmKG5ld09iaikge1xyXG5cdFx0XHRpZihuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XHJcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xyXG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xyXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XHJcblx0fTtcclxufSkoKTtcclxuXHJcbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcclxuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XHJcblxyXG5cdGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XHJcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xyXG5cdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHJcblx0aWYobWVkaWEpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcclxuXHR9XHJcblxyXG5cdGlmKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XHJcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG5cdFx0fVxyXG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTGluayhsaW5rRWxlbWVudCwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XHJcblxyXG5cdGlmKHNvdXJjZU1hcCkge1xyXG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcclxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcclxuXHR9XHJcblxyXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xyXG5cclxuXHR2YXIgb2xkU3JjID0gbGlua0VsZW1lbnQuaHJlZjtcclxuXHJcblx0bGlua0VsZW1lbnQuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblxyXG5cdGlmKG9sZFNyYylcclxuXHRcdFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcclxufVxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 137:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(119);\n\nvar _SolarSystem = __webpack_require__(117);\n\nvar _SolarSystem2 = _interopRequireDefault(_SolarSystem);\n\nvar _Simulation = __webpack_require__(116);\n\nvar _Simulation2 = _interopRequireDefault(_Simulation);\n\nvar _CameraViewRenderer = __webpack_require__(114);\n\nvar _CameraViewRenderer2 = _interopRequireDefault(_CameraViewRenderer);\n\nvar _OrbitalMapRenderer = __webpack_require__(115);\n\nvar _OrbitalMapRenderer2 = _interopRequireDefault(_OrbitalMapRenderer);\n\nvar _TestingRenderer = __webpack_require__(118);\n\nvar _TestingRenderer2 = _interopRequireDefault(_TestingRenderer);\n\nvar _stats = __webpack_require__(2);\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nvar _three = __webpack_require__(1);\n\nvar THREE = _interopRequireWildcard(_three);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar solarSystem = new _SolarSystem2.default();\n\nvar mapViewContainer = document.getElementById('map-view');\nvar cameraViewContainer = document.getElementById('camera-view');\nvar testingViewContainer = document.getElementById('testing-view');\n\nvar stats = new _stats2.default();\nstats.dom.id = 'stats';\nstats.dom.style = '';\n\ndocument.body.appendChild(mapViewContainer);\ndocument.body.appendChild(cameraViewContainer);\ndocument.body.appendChild(stats.dom);\n\nvar textureLoader = new THREE.TextureLoader();\n\nvar renderers = [new _OrbitalMapRenderer2.default(mapViewContainer, textureLoader), new _TestingRenderer2.default(testingViewContainer), new _CameraViewRenderer2.default(cameraViewContainer, textureLoader)];\n\nvar simulation = new _Simulation2.default(solarSystem, renderers, stats);\nsimulation.initialize().then(function () {\n  simulation.run();\n});\n\n// Attach some useful pieces of data for debugging\nwindow.solarSystem = solarSystem;\nwindow.THREE = THREE;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9pbmRleC5qcz8xZmRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi9jc3Mvc3R5bGVzLmNzcyc7XG5pbXBvcnQgU29sYXJTeXN0ZW0gZnJvbSAnLi9hcHAvU29sYXJTeXN0ZW0nO1xuaW1wb3J0IFNpbXVsYXRpb24gZnJvbSAnLi9hcHAvU2ltdWxhdGlvbic7XG5pbXBvcnQgQ2FtZXJhVmlld1JlbmRlcmVyIGZyb20gJy4vYXBwL0NhbWVyYVZpZXdSZW5kZXJlcic7XG5pbXBvcnQgT3JiaXRhbE1hcFJlbmRlcmVyIGZyb20gJy4vYXBwL09yYml0YWxNYXBSZW5kZXJlcic7XG5pbXBvcnQgVGVzdGluZ1JlbmRlcmVyIGZyb20gJy4vYXBwL1Rlc3RpbmdSZW5kZXJlcic7XG5pbXBvcnQgU3RhdHMgZnJvbSAnc3RhdHMuanMnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuXG5jb25zdCBzb2xhclN5c3RlbSA9IG5ldyBTb2xhclN5c3RlbSgpO1xuXG5sZXQgbWFwVmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtdmlldycpO1xubGV0IGNhbWVyYVZpZXdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FtZXJhLXZpZXcnKTtcbmxldCB0ZXN0aW5nVmlld0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXN0aW5nLXZpZXcnKTtcblxubGV0IHN0YXRzID0gbmV3IFN0YXRzKCk7XG5zdGF0cy5kb20uaWQgPSAnc3RhdHMnO1xuc3RhdHMuZG9tLnN0eWxlID0gJyc7XG5cbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWFwVmlld0NvbnRhaW5lcik7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbWVyYVZpZXdDb250YWluZXIpO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0cy5kb20pO1xuXG5jb25zdCB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcblxuY29uc3QgcmVuZGVyZXJzID0gW1xuICBuZXcgT3JiaXRhbE1hcFJlbmRlcmVyKG1hcFZpZXdDb250YWluZXIsIHRleHR1cmVMb2FkZXIpLFxuICBuZXcgVGVzdGluZ1JlbmRlcmVyKHRlc3RpbmdWaWV3Q29udGFpbmVyKSxcbiAgbmV3IENhbWVyYVZpZXdSZW5kZXJlcihjYW1lcmFWaWV3Q29udGFpbmVyLCB0ZXh0dXJlTG9hZGVyKSxcbl07XG5cbmNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihzb2xhclN5c3RlbSwgcmVuZGVyZXJzLCBzdGF0cyk7XG5zaW11bGF0aW9uLmluaXRpYWxpemUoKVxuICAudGhlbigoKSA9PiB7XG4gICAgc2ltdWxhdGlvbi5ydW4oKVxuICB9KTtcblxuLy8gQXR0YWNoIHNvbWUgdXNlZnVsIHBpZWNlcyBvZiBkYXRhIGZvciBkZWJ1Z2dpbmdcbndpbmRvdy5zb2xhclN5c3RlbSA9IHNvbGFyU3lzdGVtO1xud2luZG93LlRIUkVFID0gVEhSRUU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 3:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying, and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finger swipe\n\nvar THREE = __webpack_require__(1);\n\nfunction OrbitControls(object, domElement) {\n\n  this.object = object;\n\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new THREE.Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.25;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableDolly = true;\n  this.dollySpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    BOTTOM: 40\n  };\n\n  // Mouse buttons\n  this.mouseButtons = {\n    ORBIT: THREE.MOUSE.LEFT,\n    ZOOM: THREE.MOUSE.MIDDLE,\n    PAN: THREE.MOUSE.RIGHT\n  };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n\n    return spherical.theta;\n  };\n\n  this.reset = function () {\n\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = function () {\n\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    return function update() {\n\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      spherical.theta += sphericalDelta.theta;\n      spherical.phi += sphericalDelta.phi;\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n      // move target to panned location\n      scope.target.add(panOffset);\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n      } else {\n\n        sphericalDelta.set(0, 0, 0);\n      }\n\n      scale = 1;\n      panOffset.set(0, 0, 0);\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n\n        return true;\n      }\n\n      return false;\n    };\n  }();\n\n  this.dispose = function () {\n\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n    scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n\n    document.removeEventListener('mousemove', onMouseMove, false);\n    document.removeEventListener('mouseup', onMouseUp, false);\n\n    window.removeEventListener('keydown', onKeyDown, false);\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = {\n    type: 'change'\n  };\n  var startEvent = {\n    type: 'start'\n  };\n  var endEvent = {\n    type: 'end'\n  };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_DOLLY: 4,\n    TOUCH_PAN: 5\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle() {\n\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n\n    return Math.pow(0.95, scope.dollySpeed);\n  }\n\n  function rotateLeft(angle) {\n\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = function () {\n\n    var v = new THREE.Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  }();\n\n  var panUp = function () {\n\n    var v = new THREE.Vector3();\n\n    return function panUp(distance, objectMatrix) {\n\n      v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  }();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = function () {\n\n    var offset = new THREE.Vector3();\n\n    return function pan(deltaX, deltaY) {\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n      } else {\n\n        // unknown camera type\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n        scope.enablePan = false;\n      }\n    };\n  }();\n\n  function dollyIn(dollyScale) {\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n\n      scale /= dollyScale;\n    } else {\n\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      scope.enableDolly = false;\n    }\n  }\n\n  function dollyOut(dollyScale) {\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n\n      scale *= dollyScale;\n    } else {\n\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n      scope.enableDolly = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate(event) {\n\n    //console.log( 'handleMouseDownRotate' );\n\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n\n    //console.log( 'handleMouseDownDolly' );\n\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n\n    //console.log( 'handleMouseDownPan' );\n\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n\n    //console.log( 'handleMouseMoveRotate' );\n\n    rotateEnd.set(event.clientX, event.clientY);\n    rotateDelta.subVectors(rotateEnd, rotateStart);\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    // rotating across whole screen goes 360 degrees around\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n\n    //console.log( 'handleMouseMoveDolly' );\n\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n\n    //console.log( 'handleMouseMovePan' );\n\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp(event) {\n\n    // console.log( 'handleMouseUp' );\n\n  }\n\n  function handleMouseWheel(event) {\n\n    // console.log( 'handleMouseWheel' );\n\n    if (event.deltaY < 0) {\n\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n\n    //console.log( 'handleKeyDown' );\n\n    switch (event.keyCode) {\n\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n\n    //console.log( 'handleTouchStartRotate' );\n\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchStartDolly(event) {\n\n    //console.log( 'handleTouchStartDolly' );\n\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartPan(event) {\n\n    //console.log( 'handleTouchStartPan' );\n\n    panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchMoveRotate(event) {\n\n    //console.log( 'handleTouchMoveRotate' );\n\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    rotateDelta.subVectors(rotateEnd, rotateStart);\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    // rotating across whole screen goes 360 degrees around\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleTouchMoveDolly(event) {\n\n    //console.log( 'handleTouchMoveDolly' );\n\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyEnd.set(0, distance);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n\n      dollyOut(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n\n      dollyIn(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleTouchMovePan(event) {\n\n    //console.log( 'handleTouchMovePan' );\n\n    panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n    panDelta.subVectors(panEnd, panStart);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleTouchEnd(event) {}\n\n  //console.log( 'handleTouchEnd' );\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown(event) {\n\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n\n      if (scope.enableRotate === false) return;\n\n      handleMouseDownRotate(event);\n\n      state = STATE.ROTATE;\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n\n      if (scope.enableDolly === false) return;\n\n      handleMouseDownDolly(event);\n\n      state = STATE.DOLLY;\n    } else if (event.button === scope.mouseButtons.PAN) {\n\n      if (scope.enablePan === false) return;\n\n      handleMouseDownPan(event);\n\n      state = STATE.PAN;\n    }\n\n    if (state !== STATE.NONE) {\n\n      document.addEventListener('mousemove', onMouseMove, false);\n      document.addEventListener('mouseup', onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    if (state === STATE.ROTATE) {\n\n      if (scope.enableRotate === false) return;\n\n      handleMouseMoveRotate(event);\n    } else if (state === STATE.DOLLY) {\n\n      if (scope.enableDolly === false) return;\n\n      handleMouseMoveDolly(event);\n    } else if (state === STATE.PAN) {\n\n      if (scope.enablePan === false) return;\n\n      handleMouseMovePan(event);\n    }\n  }\n\n  function onMouseUp(event) {\n\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener('mousemove', onMouseMove, false);\n    document.removeEventListener('mouseup', onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n\n    if (scope.enabled === false || scope.enableDolly === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(startEvent); // not sure why these are here...\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n\n      case 1:\n        // one-fingered touch: rotate\n\n        if (scope.enableRotate === false) return;\n\n        handleTouchStartRotate(event);\n\n        state = STATE.TOUCH_ROTATE;\n\n        break;\n\n      case 2:\n        // two-fingered touch: dolly\n\n        if (scope.enableDolly === false) return;\n\n        handleTouchStartDolly(event);\n\n        state = STATE.TOUCH_DOLLY;\n\n        break;\n\n      case 3:\n        // three-fingered touch: pan\n\n        if (scope.enablePan === false) return;\n\n        handleTouchStartPan(event);\n\n        state = STATE.TOUCH_PAN;\n\n        break;\n\n      default:\n\n        state = STATE.NONE;\n\n    }\n\n    if (state !== STATE.NONE) {\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n\n      case 1:\n        // one-fingered touch: rotate\n\n        if (scope.enableRotate === false) return;\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n        handleTouchMoveRotate(event);\n\n        break;\n\n      case 2:\n        // two-fingered touch: dolly\n\n        if (scope.enableDolly === false) return;\n        if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n        handleTouchMoveDolly(event);\n\n        break;\n\n      case 3:\n        // three-fingered touch: pan\n\n        if (scope.enablePan === false) return;\n        if (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n        handleTouchMovePan(event);\n\n        break;\n\n      default:\n\n        state = STATE.NONE;\n\n    }\n  }\n\n  function onTouchEnd(event) {\n\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\n  scope.domElement.addEventListener('wheel', onMouseWheel, false);\n\n  scope.domElement.addEventListener('touchstart', onTouchStart, false);\n  scope.domElement.addEventListener('touchend', onTouchEnd, false);\n  scope.domElement.addEventListener('touchmove', onTouchMove, false);\n\n  window.addEventListener('keydown', onKeyDown, false);\n\n  // force an update at start\n\n  this.update();\n};\n\nOrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls;\nexports.default = OrbitControls;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYXBwL2xpYi9PcmJpdENvbnRyb2xzLmpzPzAyMGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhb1xuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbVxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxuICogQGF1dGhvciBlcmljaDY2NiAvIGh0dHA6Ly9lcmljaGFpbmVzLmNvbVxuICovXG5cbi8vIFRoaXMgc2V0IG9mIGNvbnRyb2xzIHBlcmZvcm1zIG9yYml0aW5nLCBkb2xseWluZywgYW5kIHBhbm5pbmcuXG4vLyBVbmxpa2UgVHJhY2tiYWxsQ29udHJvbHMsIGl0IG1haW50YWlucyB0aGUgXCJ1cFwiIGRpcmVjdGlvbiBvYmplY3QudXAgKCtZIGJ5IGRlZmF1bHQpLlxuLy9cbi8vICAgIE9yYml0IC0gbGVmdCBtb3VzZSAvIHRvdWNoOiBvbmUgZmluZ2VyIG1vdmVcbi8vICAgIFpvb20gLSBtaWRkbGUgbW91c2UsIG9yIG1vdXNld2hlZWwgLyB0b3VjaDogdHdvIGZpbmdlciBzcHJlYWQgb3Igc3F1aXNoXG4vLyAgICBQYW4gLSByaWdodCBtb3VzZSwgb3IgYXJyb3cga2V5cyAvIHRvdWNoOiB0aHJlZSBmaW5nZXIgc3dpcGVcblxuY29uc3QgVEhSRUUgPSByZXF1aXJlKCd0aHJlZScpO1xuXG5mdW5jdGlvbiBPcmJpdENvbnRyb2xzKG9iamVjdCwgZG9tRWxlbWVudCkge1xuXG4gIHRoaXMub2JqZWN0ID0gb2JqZWN0O1xuXG4gIHRoaXMuZG9tRWxlbWVudCA9IChkb21FbGVtZW50ICE9PSB1bmRlZmluZWQpID8gZG9tRWxlbWVudCA6IGRvY3VtZW50O1xuXG4gIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRoaXMgY29udHJvbFxuICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gIC8vIFwidGFyZ2V0XCIgc2V0cyB0aGUgbG9jYXRpb24gb2YgZm9jdXMsIHdoZXJlIHRoZSBvYmplY3Qgb3JiaXRzIGFyb3VuZFxuICB0aGlzLnRhcmdldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cbiAgLy8gSG93IGZhciB5b3UgY2FuIGRvbGx5IGluIGFuZCBvdXQgKCBQZXJzcGVjdGl2ZUNhbWVyYSBvbmx5IClcbiAgdGhpcy5taW5EaXN0YW5jZSA9IDA7XG4gIHRoaXMubWF4RGlzdGFuY2UgPSBJbmZpbml0eTtcblxuICAvLyBIb3cgZmFyIHlvdSBjYW4gb3JiaXQgdmVydGljYWxseSwgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cy5cbiAgLy8gUmFuZ2UgaXMgMCB0byBNYXRoLlBJIHJhZGlhbnMuXG4gIHRoaXMubWluUG9sYXJBbmdsZSA9IDA7IC8vIHJhZGlhbnNcbiAgdGhpcy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSTsgLy8gcmFkaWFuc1xuXG4gIC8vIEhvdyBmYXIgeW91IGNhbiBvcmJpdCBob3Jpem9udGFsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuXG4gIC8vIElmIHNldCwgbXVzdCBiZSBhIHN1Yi1pbnRlcnZhbCBvZiB0aGUgaW50ZXJ2YWwgWyAtIE1hdGguUEksIE1hdGguUEkgXS5cbiAgdGhpcy5taW5BemltdXRoQW5nbGUgPSAtSW5maW5pdHk7IC8vIHJhZGlhbnNcbiAgdGhpcy5tYXhBemltdXRoQW5nbGUgPSBJbmZpbml0eTsgLy8gcmFkaWFuc1xuXG4gIC8vIFNldCB0byB0cnVlIHRvIGVuYWJsZSBkYW1waW5nIChpbmVydGlhKVxuICAvLyBJZiBkYW1waW5nIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcFxuICB0aGlzLmVuYWJsZURhbXBpbmcgPSBmYWxzZTtcbiAgdGhpcy5kYW1waW5nRmFjdG9yID0gMC4yNTtcblxuICAvLyBUaGlzIG9wdGlvbiBhY3R1YWxseSBlbmFibGVzIGRvbGx5aW5nIGluIGFuZCBvdXQ7IGxlZnQgYXMgXCJ6b29tXCIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB6b29taW5nXG4gIHRoaXMuZW5hYmxlRG9sbHkgPSB0cnVlO1xuICB0aGlzLmRvbGx5U3BlZWQgPSAxLjA7XG5cbiAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcm90YXRpbmdcbiAgdGhpcy5lbmFibGVSb3RhdGUgPSB0cnVlO1xuICB0aGlzLnJvdGF0ZVNwZWVkID0gMS4wO1xuXG4gIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmdcbiAgdGhpcy5lbmFibGVQYW4gPSB0cnVlO1xuICB0aGlzLmtleVBhblNwZWVkID0gNy4wOyAvLyBwaXhlbHMgbW92ZWQgcGVyIGFycm93IGtleSBwdXNoXG5cbiAgLy8gU2V0IHRvIHRydWUgdG8gYXV0b21hdGljYWxseSByb3RhdGUgYXJvdW5kIHRoZSB0YXJnZXRcbiAgLy8gSWYgYXV0by1yb3RhdGUgaXMgZW5hYmxlZCwgeW91IG11c3QgY2FsbCBjb250cm9scy51cGRhdGUoKSBpbiB5b3VyIGFuaW1hdGlvbiBsb29wXG4gIHRoaXMuYXV0b1JvdGF0ZSA9IGZhbHNlO1xuICB0aGlzLmF1dG9Sb3RhdGVTcGVlZCA9IDIuMDsgLy8gMzAgc2Vjb25kcyBwZXIgcm91bmQgd2hlbiBmcHMgaXMgNjBcblxuICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB1c2Ugb2YgdGhlIGtleXNcbiAgdGhpcy5lbmFibGVLZXlzID0gdHJ1ZTtcblxuICAvLyBUaGUgZm91ciBhcnJvdyBrZXlzXG4gIHRoaXMua2V5cyA9IHtcbiAgICBMRUZUOiAzNyxcbiAgICBVUDogMzgsXG4gICAgUklHSFQ6IDM5LFxuICAgIEJPVFRPTTogNDBcbiAgfTtcblxuICAvLyBNb3VzZSBidXR0b25zXG4gIHRoaXMubW91c2VCdXR0b25zID0ge1xuICAgIE9SQklUOiBUSFJFRS5NT1VTRS5MRUZULFxuICAgIFpPT006IFRIUkVFLk1PVVNFLk1JRERMRSxcbiAgICBQQU46IFRIUkVFLk1PVVNFLlJJR0hUXG4gIH07XG5cbiAgLy8gZm9yIHJlc2V0XG4gIHRoaXMudGFyZ2V0MCA9IHRoaXMudGFyZ2V0LmNsb25lKCk7XG4gIHRoaXMucG9zaXRpb24wID0gdGhpcy5vYmplY3QucG9zaXRpb24uY2xvbmUoKTtcbiAgdGhpcy56b29tMCA9IHRoaXMub2JqZWN0Lnpvb207XG5cbiAgLy9cbiAgLy8gcHVibGljIG1ldGhvZHNcbiAgLy9cblxuICB0aGlzLmdldFBvbGFyQW5nbGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICByZXR1cm4gc3BoZXJpY2FsLnBoaTtcblxuICB9O1xuXG4gIHRoaXMuZ2V0QXppbXV0aGFsQW5nbGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICByZXR1cm4gc3BoZXJpY2FsLnRoZXRhO1xuXG4gIH07XG5cbiAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHNjb3BlLnRhcmdldC5jb3B5KHNjb3BlLnRhcmdldDApO1xuICAgIHNjb3BlLm9iamVjdC5wb3NpdGlvbi5jb3B5KHNjb3BlLnBvc2l0aW9uMCk7XG4gICAgc2NvcGUub2JqZWN0Lnpvb20gPSBzY29wZS56b29tMDtcblxuICAgIHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgc2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7XG5cbiAgICBzY29wZS51cGRhdGUoKTtcblxuICAgIHN0YXRlID0gU1RBVEUuTk9ORTtcblxuICB9O1xuXG4gIC8vIHRoaXMgbWV0aG9kIGlzIGV4cG9zZWQsIGJ1dCBwZXJoYXBzIGl0IHdvdWxkIGJlIGJldHRlciBpZiB3ZSBjYW4gbWFrZSBpdCBwcml2YXRlLi4uXG4gIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cbiAgICAvLyBzbyBjYW1lcmEudXAgaXMgdGhlIG9yYml0IGF4aXNcbiAgICB2YXIgcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbVVuaXRWZWN0b3JzKG9iamVjdC51cCwgbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpO1xuICAgIHZhciBxdWF0SW52ZXJzZSA9IHF1YXQuY2xvbmUoKS5pbnZlcnNlKCk7XG5cbiAgICB2YXIgbGFzdFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB2YXIgbGFzdFF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblxuICAgICAgdmFyIHBvc2l0aW9uID0gc2NvcGUub2JqZWN0LnBvc2l0aW9uO1xuXG4gICAgICBvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7XG5cbiAgICAgIC8vIHJvdGF0ZSBvZmZzZXQgdG8gXCJ5LWF4aXMtaXMtdXBcIiBzcGFjZVxuICAgICAgb2Zmc2V0LmFwcGx5UXVhdGVybmlvbihxdWF0KTtcblxuICAgICAgLy8gYW5nbGUgZnJvbSB6LWF4aXMgYXJvdW5kIHktYXhpc1xuICAgICAgc3BoZXJpY2FsLnNldEZyb21WZWN0b3IzKG9mZnNldCk7XG5cbiAgICAgIGlmIChzY29wZS5hdXRvUm90YXRlICYmIHN0YXRlID09PSBTVEFURS5OT05FKSB7XG5cbiAgICAgICAgcm90YXRlTGVmdChnZXRBdXRvUm90YXRpb25BbmdsZSgpKTtcblxuICAgICAgfVxuXG4gICAgICBzcGhlcmljYWwudGhldGEgKz0gc3BoZXJpY2FsRGVsdGEudGhldGE7XG4gICAgICBzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaTtcblxuICAgICAgLy8gcmVzdHJpY3QgdGhldGEgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xuICAgICAgc3BoZXJpY2FsLnRoZXRhID0gTWF0aC5tYXgoc2NvcGUubWluQXppbXV0aEFuZ2xlLCBNYXRoLm1pbihzY29wZS5tYXhBemltdXRoQW5nbGUsIHNwaGVyaWNhbC50aGV0YSkpO1xuXG4gICAgICAvLyByZXN0cmljdCBwaGkgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0c1xuICAgICAgc3BoZXJpY2FsLnBoaSA9IE1hdGgubWF4KHNjb3BlLm1pblBvbGFyQW5nbGUsIE1hdGgubWluKHNjb3BlLm1heFBvbGFyQW5nbGUsIHNwaGVyaWNhbC5waGkpKTtcblxuICAgICAgc3BoZXJpY2FsLm1ha2VTYWZlKCk7XG5cbiAgICAgIHNwaGVyaWNhbC5yYWRpdXMgKj0gc2NhbGU7XG5cbiAgICAgIC8vIHJlc3RyaWN0IHJhZGl1cyB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzXG4gICAgICBzcGhlcmljYWwucmFkaXVzID0gTWF0aC5tYXgoc2NvcGUubWluRGlzdGFuY2UsIE1hdGgubWluKHNjb3BlLm1heERpc3RhbmNlLCBzcGhlcmljYWwucmFkaXVzKSk7XG5cbiAgICAgIC8vIG1vdmUgdGFyZ2V0IHRvIHBhbm5lZCBsb2NhdGlvblxuICAgICAgc2NvcGUudGFyZ2V0LmFkZChwYW5PZmZzZXQpO1xuXG4gICAgICBvZmZzZXQuc2V0RnJvbVNwaGVyaWNhbChzcGhlcmljYWwpO1xuXG4gICAgICAvLyByb3RhdGUgb2Zmc2V0IGJhY2sgdG8gXCJjYW1lcmEtdXAtdmVjdG9yLWlzLXVwXCIgc3BhY2VcbiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpO1xuXG4gICAgICBwb3NpdGlvbi5jb3B5KHNjb3BlLnRhcmdldCkuYWRkKG9mZnNldCk7XG5cbiAgICAgIHNjb3BlLm9iamVjdC5sb29rQXQoc2NvcGUudGFyZ2V0KTtcblxuICAgICAgaWYgKHNjb3BlLmVuYWJsZURhbXBpbmcgPT09IHRydWUpIHtcblxuICAgICAgICBzcGhlcmljYWxEZWx0YS50aGV0YSAqPSAoMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3IpO1xuICAgICAgICBzcGhlcmljYWxEZWx0YS5waGkgKj0gKDEgLSBzY29wZS5kYW1waW5nRmFjdG9yKTtcblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBzcGhlcmljYWxEZWx0YS5zZXQoMCwgMCwgMCk7XG5cbiAgICAgIH1cblxuICAgICAgc2NhbGUgPSAxO1xuICAgICAgcGFuT2Zmc2V0LnNldCgwLCAwLCAwKTtcblxuICAgICAgLy8gdXBkYXRlIGNvbmRpdGlvbiBpczpcbiAgICAgIC8vIG1pbihjYW1lcmEgZGlzcGxhY2VtZW50LCBjYW1lcmEgcm90YXRpb24gaW4gcmFkaWFucyleMiA+IEVQU1xuICAgICAgLy8gdXNpbmcgc21hbGwtYW5nbGUgYXBwcm94aW1hdGlvbiBjb3MoeC8yKSA9IDEgLSB4XjIgLyA4XG5cbiAgICAgIGlmIChsYXN0UG9zaXRpb24uZGlzdGFuY2VUb1NxdWFyZWQoc2NvcGUub2JqZWN0LnBvc2l0aW9uKSA+IEVQUyB8fFxuICAgICAgICA4ICogKDEgLSBsYXN0UXVhdGVybmlvbi5kb3Qoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pKSA+IEVQUykge1xuXG4gICAgICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpO1xuXG4gICAgICAgIGxhc3RQb3NpdGlvbi5jb3B5KHNjb3BlLm9iamVjdC5wb3NpdGlvbik7XG4gICAgICAgIGxhc3RRdWF0ZXJuaW9uLmNvcHkoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH07XG5cbiAgfSgpO1xuXG4gIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBvbkNvbnRleHRNZW51LCBmYWxzZSk7XG4gICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93biwgZmFsc2UpO1xuICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBvbk1vdXNlV2hlZWwsIGZhbHNlKTtcblxuICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCwgZmFsc2UpO1xuICAgIHNjb3BlLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoRW5kLCBmYWxzZSk7XG4gICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSwgZmFsc2UpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93biwgZmFsc2UpO1xuXG4gICAgLy9zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdkaXNwb3NlJyB9ICk7IC8vIHNob3VsZCB0aGlzIGJlIGFkZGVkIGhlcmU/XG5cbiAgfTtcblxuICAvL1xuICAvLyBpbnRlcm5hbHNcbiAgLy9cblxuICB2YXIgc2NvcGUgPSB0aGlzO1xuXG4gIHZhciBjaGFuZ2VFdmVudCA9IHtcbiAgICB0eXBlOiAnY2hhbmdlJ1xuICB9O1xuICB2YXIgc3RhcnRFdmVudCA9IHtcbiAgICB0eXBlOiAnc3RhcnQnXG4gIH07XG4gIHZhciBlbmRFdmVudCA9IHtcbiAgICB0eXBlOiAnZW5kJ1xuICB9O1xuXG4gIHZhciBTVEFURSA9IHtcbiAgICBOT05FOiAtMSxcbiAgICBST1RBVEU6IDAsXG4gICAgRE9MTFk6IDEsXG4gICAgUEFOOiAyLFxuICAgIFRPVUNIX1JPVEFURTogMyxcbiAgICBUT1VDSF9ET0xMWTogNCxcbiAgICBUT1VDSF9QQU46IDVcbiAgfTtcblxuICB2YXIgc3RhdGUgPSBTVEFURS5OT05FO1xuXG4gIHZhciBFUFMgPSAwLjAwMDAwMTtcblxuICAvLyBjdXJyZW50IHBvc2l0aW9uIGluIHNwaGVyaWNhbCBjb29yZGluYXRlc1xuICB2YXIgc3BoZXJpY2FsID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpO1xuICB2YXIgc3BoZXJpY2FsRGVsdGEgPSBuZXcgVEhSRUUuU3BoZXJpY2FsKCk7XG5cbiAgdmFyIHNjYWxlID0gMTtcbiAgdmFyIHBhbk9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cbiAgdmFyIHJvdGF0ZVN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgdmFyIHJvdGF0ZUVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG4gIHZhciByb3RhdGVEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cbiAgdmFyIHBhblN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgdmFyIHBhbkVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG4gIHZhciBwYW5EZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cbiAgdmFyIGRvbGx5U3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICB2YXIgZG9sbHlFbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICB2YXIgZG9sbHlEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XG5cbiAgZnVuY3Rpb24gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSB7XG5cbiAgICByZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkO1xuXG4gIH1cblxuICBmdW5jdGlvbiBnZXRab29tU2NhbGUoKSB7XG5cbiAgICByZXR1cm4gTWF0aC5wb3coMC45NSwgc2NvcGUuZG9sbHlTcGVlZCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHJvdGF0ZUxlZnQoYW5nbGUpIHtcblxuICAgIHNwaGVyaWNhbERlbHRhLnRoZXRhIC09IGFuZ2xlO1xuXG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGVVcChhbmdsZSkge1xuXG4gICAgc3BoZXJpY2FsRGVsdGEucGhpIC09IGFuZ2xlO1xuXG4gIH1cblxuICB2YXIgcGFuTGVmdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiBwYW5MZWZ0KGRpc3RhbmNlLCBvYmplY3RNYXRyaXgpIHtcblxuICAgICAgdi5zZXRGcm9tTWF0cml4Q29sdW1uKG9iamVjdE1hdHJpeCwgMCk7IC8vIGdldCBYIGNvbHVtbiBvZiBvYmplY3RNYXRyaXhcbiAgICAgIHYubXVsdGlwbHlTY2FsYXIoLWRpc3RhbmNlKTtcblxuICAgICAgcGFuT2Zmc2V0LmFkZCh2KTtcblxuICAgIH07XG5cbiAgfSgpO1xuXG4gIHZhciBwYW5VcCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiBwYW5VcChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7XG5cbiAgICAgIHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDEpOyAvLyBnZXQgWSBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4XG4gICAgICB2Lm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTtcblxuICAgICAgcGFuT2Zmc2V0LmFkZCh2KTtcblxuICAgIH07XG5cbiAgfSgpO1xuXG4gIC8vIGRlbHRhWCBhbmQgZGVsdGFZIGFyZSBpbiBwaXhlbHM7IHJpZ2h0IGFuZCBkb3duIGFyZSBwb3NpdGl2ZVxuICB2YXIgcGFuID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gcGFuKGRlbHRhWCwgZGVsdGFZKSB7XG5cbiAgICAgIHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudCA9PT0gZG9jdW1lbnQgPyBzY29wZS5kb21FbGVtZW50LmJvZHkgOiBzY29wZS5kb21FbGVtZW50O1xuXG4gICAgICBpZiAoc2NvcGUub2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpIHtcblxuICAgICAgICAvLyBwZXJzcGVjdGl2ZVxuICAgICAgICB2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XG4gICAgICAgIG9mZnNldC5jb3B5KHBvc2l0aW9uKS5zdWIoc2NvcGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIHRhcmdldERpc3RhbmNlID0gb2Zmc2V0Lmxlbmd0aCgpO1xuXG4gICAgICAgIC8vIGhhbGYgb2YgdGhlIGZvdiBpcyBjZW50ZXIgdG8gdG9wIG9mIHNjcmVlblxuICAgICAgICB0YXJnZXREaXN0YW5jZSAqPSBNYXRoLnRhbigoc2NvcGUub2JqZWN0LmZvdiAvIDIpICogTWF0aC5QSSAvIDE4MC4wKTtcblxuICAgICAgICAvLyB3ZSBhY3R1YWxseSBkb24ndCB1c2Ugc2NyZWVuV2lkdGgsIHNpbmNlIHBlcnNwZWN0aXZlIGNhbWVyYSBpcyBmaXhlZCB0byBzY3JlZW4gaGVpZ2h0XG4gICAgICAgIHBhbkxlZnQoMiAqIGRlbHRhWCAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpO1xuICAgICAgICBwYW5VcCgyICogZGVsdGFZICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgLy8gdW5rbm93biBjYW1lcmEgdHlwZVxuICAgICAgICBjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIHBhbiBkaXNhYmxlZC4nKTtcbiAgICAgICAgc2NvcGUuZW5hYmxlUGFuID0gZmFsc2U7XG5cbiAgICAgIH1cblxuICAgIH07XG5cbiAgfSgpO1xuXG4gIGZ1bmN0aW9uIGRvbGx5SW4oZG9sbHlTY2FsZSkge1xuXG4gICAgaWYgKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSB7XG5cbiAgICAgIHNjYWxlIC89IGRvbGx5U2NhbGU7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZSAtIGRvbGx5L3pvb20gZGlzYWJsZWQuJyk7XG4gICAgICBzY29wZS5lbmFibGVEb2xseSA9IGZhbHNlO1xuXG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBkb2xseU91dChkb2xseVNjYWxlKSB7XG5cbiAgICBpZiAoc2NvcGUub2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpIHtcblxuICAgICAgc2NhbGUgKj0gZG9sbHlTY2FsZTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGNvbnNvbGUud2FybignV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC4nKTtcbiAgICAgIHNjb3BlLmVuYWJsZURvbGx5ID0gZmFsc2U7XG5cbiAgICB9XG5cbiAgfVxuXG4gIC8vXG4gIC8vIGV2ZW50IGNhbGxiYWNrcyAtIHVwZGF0ZSB0aGUgb2JqZWN0IHN0YXRlXG4gIC8vXG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUm90YXRlKGV2ZW50KSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VEb3duUm90YXRlJyApO1xuXG4gICAgcm90YXRlU3RhcnQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd25Eb2xseShldmVudCkge1xuXG4gICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93bkRvbGx5JyApO1xuXG4gICAgZG9sbHlTdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93blBhbihldmVudCkge1xuXG4gICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlRG93blBhbicgKTtcblxuICAgIHBhblN0YXJ0LnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlUm90YXRlKGV2ZW50KSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VNb3ZlUm90YXRlJyApO1xuXG4gICAgcm90YXRlRW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICByb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpO1xuXG4gICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50ID09PSBkb2N1bWVudCA/IHNjb3BlLmRvbUVsZW1lbnQuYm9keSA6IHNjb3BlLmRvbUVsZW1lbnQ7XG5cbiAgICAvLyByb3RhdGluZyBhY3Jvc3Mgd2hvbGUgc2NyZWVuIGdvZXMgMzYwIGRlZ3JlZXMgYXJvdW5kXG4gICAgcm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudFdpZHRoICogc2NvcGUucm90YXRlU3BlZWQpO1xuXG4gICAgLy8gcm90YXRpbmcgdXAgYW5kIGRvd24gYWxvbmcgd2hvbGUgc2NyZWVuIGF0dGVtcHRzIHRvIGdvIDM2MCwgYnV0IGxpbWl0ZWQgdG8gMTgwXG4gICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKiBzY29wZS5yb3RhdGVTcGVlZCk7XG5cbiAgICByb3RhdGVTdGFydC5jb3B5KHJvdGF0ZUVuZCk7XG5cbiAgICBzY29wZS51cGRhdGUoKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VNb3ZlRG9sbHkoZXZlbnQpIHtcblxuICAgIC8vY29uc29sZS5sb2coICdoYW5kbGVNb3VzZU1vdmVEb2xseScgKTtcblxuICAgIGRvbGx5RW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcblxuICAgIGRvbGx5RGVsdGEuc3ViVmVjdG9ycyhkb2xseUVuZCwgZG9sbHlTdGFydCk7XG5cbiAgICBpZiAoZG9sbHlEZWx0YS55ID4gMCkge1xuXG4gICAgICBkb2xseUluKGdldFpvb21TY2FsZSgpKTtcblxuICAgIH0gZWxzZSBpZiAoZG9sbHlEZWx0YS55IDwgMCkge1xuXG4gICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7XG5cbiAgICB9XG5cbiAgICBkb2xseVN0YXJ0LmNvcHkoZG9sbHlFbmQpO1xuXG4gICAgc2NvcGUudXBkYXRlKCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCkge1xuXG4gICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZU1vdXNlTW92ZVBhbicgKTtcblxuICAgIHBhbkVuZC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG5cbiAgICBwYW5EZWx0YS5zdWJWZWN0b3JzKHBhbkVuZCwgcGFuU3RhcnQpO1xuXG4gICAgcGFuKHBhbkRlbHRhLngsIHBhbkRlbHRhLnkpO1xuXG4gICAgcGFuU3RhcnQuY29weShwYW5FbmQpO1xuXG4gICAgc2NvcGUudXBkYXRlKCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZXZlbnQpIHtcblxuICAgIC8vIGNvbnNvbGUubG9nKCAnaGFuZGxlTW91c2VVcCcgKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VXaGVlbChldmVudCkge1xuXG4gICAgLy8gY29uc29sZS5sb2coICdoYW5kbGVNb3VzZVdoZWVsJyApO1xuXG4gICAgaWYgKGV2ZW50LmRlbHRhWSA8IDApIHtcblxuICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpO1xuXG4gICAgfSBlbHNlIGlmIChldmVudC5kZWx0YVkgPiAwKSB7XG5cbiAgICAgIGRvbGx5SW4oZ2V0Wm9vbVNjYWxlKCkpO1xuXG4gICAgfVxuXG4gICAgc2NvcGUudXBkYXRlKCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpIHtcblxuICAgIC8vY29uc29sZS5sb2coICdoYW5kbGVLZXlEb3duJyApO1xuXG4gICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG5cbiAgICBjYXNlIHNjb3BlLmtleXMuVVA6XG4gICAgICBwYW4oMCwgc2NvcGUua2V5UGFuU3BlZWQpO1xuICAgICAgc2NvcGUudXBkYXRlKCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2Ugc2NvcGUua2V5cy5CT1RUT006XG4gICAgICBwYW4oMCwgLXNjb3BlLmtleVBhblNwZWVkKTtcbiAgICAgIHNjb3BlLnVwZGF0ZSgpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIHNjb3BlLmtleXMuTEVGVDpcbiAgICAgIHBhbihzY29wZS5rZXlQYW5TcGVlZCwgMCk7XG4gICAgICBzY29wZS51cGRhdGUoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBzY29wZS5rZXlzLlJJR0hUOlxuICAgICAgcGFuKC1zY29wZS5rZXlQYW5TcGVlZCwgMCk7XG4gICAgICBzY29wZS51cGRhdGUoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hTdGFydFJvdGF0ZScgKTtcblxuICAgIHJvdGF0ZVN0YXJ0LnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5KGV2ZW50KSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hTdGFydERvbGx5JyApO1xuXG4gICAgdmFyIGR4ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVg7XG4gICAgdmFyIGR5ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVk7XG5cbiAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gICAgZG9sbHlTdGFydC5zZXQoMCwgZGlzdGFuY2UpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0UGFuKGV2ZW50KSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hTdGFydFBhbicgKTtcblxuICAgIHBhblN0YXJ0LnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlUm90YXRlKGV2ZW50KSB7XG5cbiAgICAvL2NvbnNvbGUubG9nKCAnaGFuZGxlVG91Y2hNb3ZlUm90YXRlJyApO1xuXG4gICAgcm90YXRlRW5kLnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTtcbiAgICByb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpO1xuXG4gICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50ID09PSBkb2N1bWVudCA/IHNjb3BlLmRvbUVsZW1lbnQuYm9keSA6IHNjb3BlLmRvbUVsZW1lbnQ7XG5cbiAgICAvLyByb3RhdGluZyBhY3Jvc3Mgd2hvbGUgc2NyZWVuIGdvZXMgMzYwIGRlZ3JlZXMgYXJvdW5kXG4gICAgcm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudFdpZHRoICogc2NvcGUucm90YXRlU3BlZWQpO1xuXG4gICAgLy8gcm90YXRpbmcgdXAgYW5kIGRvd24gYWxvbmcgd2hvbGUgc2NyZWVuIGF0dGVtcHRzIHRvIGdvIDM2MCwgYnV0IGxpbWl0ZWQgdG8gMTgwXG4gICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKiBzY29wZS5yb3RhdGVTcGVlZCk7XG5cbiAgICByb3RhdGVTdGFydC5jb3B5KHJvdGF0ZUVuZCk7XG5cbiAgICBzY29wZS51cGRhdGUoKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlRG9sbHkoZXZlbnQpIHtcblxuICAgIC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVEb2xseScgKTtcblxuICAgIHZhciBkeCA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSBldmVudC50b3VjaGVzWzFdLnBhZ2VYO1xuICAgIHZhciBkeSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgLSBldmVudC50b3VjaGVzWzFdLnBhZ2VZO1xuXG4gICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgIGRvbGx5RW5kLnNldCgwLCBkaXN0YW5jZSk7XG5cbiAgICBkb2xseURlbHRhLnN1YlZlY3RvcnMoZG9sbHlFbmQsIGRvbGx5U3RhcnQpO1xuXG4gICAgaWYgKGRvbGx5RGVsdGEueSA+IDApIHtcblxuICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCkpO1xuXG4gICAgfSBlbHNlIGlmIChkb2xseURlbHRhLnkgPCAwKSB7XG5cbiAgICAgIGRvbGx5SW4oZ2V0Wm9vbVNjYWxlKCkpO1xuXG4gICAgfVxuXG4gICAgZG9sbHlTdGFydC5jb3B5KGRvbGx5RW5kKTtcblxuICAgIHNjb3BlLnVwZGF0ZSgpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpIHtcblxuICAgIC8vY29uc29sZS5sb2coICdoYW5kbGVUb3VjaE1vdmVQYW4nICk7XG5cbiAgICBwYW5FbmQuc2V0KGV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsIGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpO1xuXG4gICAgcGFuRGVsdGEuc3ViVmVjdG9ycyhwYW5FbmQsIHBhblN0YXJ0KTtcblxuICAgIHBhbihwYW5EZWx0YS54LCBwYW5EZWx0YS55KTtcblxuICAgIHBhblN0YXJ0LmNvcHkocGFuRW5kKTtcblxuICAgIHNjb3BlLnVwZGF0ZSgpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUb3VjaEVuZChldmVudCkge1xuXG4gICAgLy9jb25zb2xlLmxvZyggJ2hhbmRsZVRvdWNoRW5kJyApO1xuXG4gIH1cblxuICAvL1xuICAvLyBldmVudCBoYW5kbGVycyAtIEZTTTogbGlzdGVuIGZvciBldmVudHMgYW5kIHJlc2V0IHN0YXRlXG4gIC8vXG5cbiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHtcblxuICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmIChldmVudC5idXR0b24gPT09IHNjb3BlLm1vdXNlQnV0dG9ucy5PUkJJVCkge1xuXG4gICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICBoYW5kbGVNb3VzZURvd25Sb3RhdGUoZXZlbnQpO1xuXG4gICAgICBzdGF0ZSA9IFNUQVRFLlJPVEFURTtcblxuICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09PSBzY29wZS5tb3VzZUJ1dHRvbnMuWk9PTSkge1xuXG4gICAgICBpZiAoc2NvcGUuZW5hYmxlRG9sbHkgPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICAgIGhhbmRsZU1vdXNlRG93bkRvbGx5KGV2ZW50KTtcblxuICAgICAgc3RhdGUgPSBTVEFURS5ET0xMWTtcblxuICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09PSBzY29wZS5tb3VzZUJ1dHRvbnMuUEFOKSB7XG5cbiAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICAgIGhhbmRsZU1vdXNlRG93blBhbihldmVudCk7XG5cbiAgICAgIHN0YXRlID0gU1RBVEUuUEFOO1xuXG4gICAgfVxuXG4gICAgaWYgKHN0YXRlICE9PSBTVEFURS5OT05FKSB7XG5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlLCBmYWxzZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7XG5cbiAgICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoc3RhcnRFdmVudCk7XG5cbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50KSB7XG5cbiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoc3RhdGUgPT09IFNUQVRFLlJPVEFURSkge1xuXG4gICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICBoYW5kbGVNb3VzZU1vdmVSb3RhdGUoZXZlbnQpO1xuXG4gICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gU1RBVEUuRE9MTFkpIHtcblxuICAgICAgaWYgKHNjb3BlLmVuYWJsZURvbGx5ID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICBoYW5kbGVNb3VzZU1vdmVEb2xseShldmVudCk7XG5cbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSBTVEFURS5QQU4pIHtcblxuICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgaGFuZGxlTW91c2VNb3ZlUGFuKGV2ZW50KTtcblxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZVVwKGV2ZW50KSB7XG5cbiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgIGhhbmRsZU1vdXNlVXAoZXZlbnQpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7XG5cbiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTtcblxuICAgIHN0YXRlID0gU1RBVEUuTk9ORTtcblxuICB9XG5cbiAgZnVuY3Rpb24gb25Nb3VzZVdoZWVsKGV2ZW50KSB7XG5cbiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgfHwgc2NvcGUuZW5hYmxlRG9sbHkgPT09IGZhbHNlIHx8IChzdGF0ZSAhPT0gU1RBVEUuTk9ORSAmJiBzdGF0ZSAhPT0gU1RBVEUuUk9UQVRFKSkgcmV0dXJuO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGhhbmRsZU1vdXNlV2hlZWwoZXZlbnQpO1xuXG4gICAgc2NvcGUuZGlzcGF0Y2hFdmVudChzdGFydEV2ZW50KTsgLy8gbm90IHN1cmUgd2h5IHRoZXNlIGFyZSBoZXJlLi4uXG4gICAgc2NvcGUuZGlzcGF0Y2hFdmVudChlbmRFdmVudCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5RG93bihldmVudCkge1xuXG4gICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZUtleXMgPT09IGZhbHNlIHx8IHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgIGhhbmRsZUtleURvd24oZXZlbnQpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZXZlbnQpIHtcblxuICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgc3dpdGNoIChldmVudC50b3VjaGVzLmxlbmd0aCkge1xuXG4gICAgY2FzZSAxOiAvLyBvbmUtZmluZ2VyZWQgdG91Y2g6IHJvdGF0ZVxuXG4gICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KTtcblxuICAgICAgc3RhdGUgPSBTVEFURS5UT1VDSF9ST1RBVEU7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOiAvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5XG5cbiAgICAgIGlmIChzY29wZS5lbmFibGVEb2xseSA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgaGFuZGxlVG91Y2hTdGFydERvbGx5KGV2ZW50KTtcblxuICAgICAgc3RhdGUgPSBTVEFURS5UT1VDSF9ET0xMWTtcblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDM6IC8vIHRocmVlLWZpbmdlcmVkIHRvdWNoOiBwYW5cblxuICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgaGFuZGxlVG91Y2hTdGFydFBhbihldmVudCk7XG5cbiAgICAgIHN0YXRlID0gU1RBVEUuVE9VQ0hfUEFOO1xuXG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG5cbiAgICAgIHN0YXRlID0gU1RBVEUuTk9ORTtcblxuICAgIH1cblxuICAgIGlmIChzdGF0ZSAhPT0gU1RBVEUuTk9ORSkge1xuXG4gICAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpO1xuXG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoTW92ZShldmVudCkge1xuXG4gICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgc3dpdGNoIChldmVudC50b3VjaGVzLmxlbmd0aCkge1xuXG4gICAgY2FzZSAxOiAvLyBvbmUtZmluZ2VyZWQgdG91Y2g6IHJvdGF0ZVxuXG4gICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuO1xuICAgICAgaWYgKHN0YXRlICE9PSBTVEFURS5UT1VDSF9ST1RBVEUpIHJldHVybjsgLy8gaXMgdGhpcyBuZWVkZWQ/Li4uXG5cbiAgICAgIGhhbmRsZVRvdWNoTW92ZVJvdGF0ZShldmVudCk7XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOiAvLyB0d28tZmluZ2VyZWQgdG91Y2g6IGRvbGx5XG5cbiAgICAgIGlmIChzY29wZS5lbmFibGVEb2xseSA9PT0gZmFsc2UpIHJldHVybjtcbiAgICAgIGlmIChzdGF0ZSAhPT0gU1RBVEUuVE9VQ0hfRE9MTFkpIHJldHVybjsgLy8gaXMgdGhpcyBuZWVkZWQ/Li4uXG5cbiAgICAgIGhhbmRsZVRvdWNoTW92ZURvbGx5KGV2ZW50KTtcblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDM6IC8vIHRocmVlLWZpbmdlcmVkIHRvdWNoOiBwYW5cblxuICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjtcbiAgICAgIGlmIChzdGF0ZSAhPT0gU1RBVEUuVE9VQ0hfUEFOKSByZXR1cm47IC8vIGlzIHRoaXMgbmVlZGVkPy4uLlxuXG4gICAgICBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpO1xuXG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG5cbiAgICAgIHN0YXRlID0gU1RBVEUuTk9ORTtcblxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaEVuZChldmVudCkge1xuXG4gICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICBoYW5kbGVUb3VjaEVuZChldmVudCk7XG5cbiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTtcblxuICAgIHN0YXRlID0gU1RBVEUuTk9ORTtcblxuICB9XG5cbiAgZnVuY3Rpb24gb25Db250ZXh0TWVudShldmVudCkge1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICB9XG5cbiAgLy9cblxuICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51Jywgb25Db250ZXh0TWVudSwgZmFsc2UpO1xuXG4gIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24sIGZhbHNlKTtcbiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uTW91c2VXaGVlbCwgZmFsc2UpO1xuXG4gIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCwgZmFsc2UpO1xuICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgZmFsc2UpO1xuICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd24sIGZhbHNlKTtcblxuICAvLyBmb3JjZSBhbiB1cGRhdGUgYXQgc3RhcnRcblxuICB0aGlzLnVwZGF0ZSgpO1xuXG59O1xuXG5PcmJpdENvbnRyb2xzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVEhSRUUuRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZSk7XG5PcmJpdENvbnRyb2xzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9yYml0Q29udHJvbHM7XG5leHBvcnQgZGVmYXVsdCBPcmJpdENvbnRyb2xzO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvbGliL09yYml0Q29udHJvbHMuanMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckJBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFDQTtBQXFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhDQTtBQW1DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 4:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n// Textures\n\n\nexports.default = BaseRenderer;\n\nvar _three = __webpack_require__(1);\n\nvar THREE = _interopRequireWildcard(_three);\n\nvar _sunmap = __webpack_require__(131);\n\nvar _sunmap2 = _interopRequireDefault(_sunmap);\n\nvar _moonmap = __webpack_require__(127);\n\nvar _moonmap2 = _interopRequireDefault(_moonmap);\n\nvar _earthmap = __webpack_require__(122);\n\nvar _earthmap2 = _interopRequireDefault(_earthmap);\n\nvar _jupitermap = __webpack_require__(123);\n\nvar _jupitermap2 = _interopRequireDefault(_jupitermap);\n\nvar _saturnmap = __webpack_require__(130);\n\nvar _saturnmap2 = _interopRequireDefault(_saturnmap);\n\nvar _mercurymap = __webpack_require__(126);\n\nvar _mercurymap2 = _interopRequireDefault(_mercurymap);\n\nvar _venusmap = __webpack_require__(133);\n\nvar _venusmap2 = _interopRequireDefault(_venusmap);\n\nvar _marsmap = __webpack_require__(125);\n\nvar _marsmap2 = _interopRequireDefault(_marsmap);\n\nvar _plutomap = __webpack_require__(129);\n\nvar _plutomap2 = _interopRequireDefault(_plutomap);\n\nvar _neptunemap = __webpack_require__(128);\n\nvar _neptunemap2 = _interopRequireDefault(_neptunemap);\n\nvar _uranusmap = __webpack_require__(132);\n\nvar _uranusmap2 = _interopRequireDefault(_uranusmap);\n\nvar _lensflare = __webpack_require__(124);\n\nvar _lensflare2 = _interopRequireDefault(_lensflare);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar TEXTURES = {\n  //'sun': map_sun,\n  'earth': _earthmap2.default,\n  'moon': _moonmap2.default,\n  'jupiter': _jupitermap2.default,\n  'saturn': _saturnmap2.default,\n  'mercury': _mercurymap2.default,\n  'mars': _marsmap2.default,\n  'venus': _venusmap2.default,\n  'pluto': _plutomap2.default,\n  'neptune': _neptunemap2.default,\n  'uranus': _uranusmap2.default,\n  'lensflare': _lensflare2.default\n};\n\nfunction BaseRenderer(textureLoader) {\n  this.textureLoader = textureLoader;\n};\n\n/**\n *\n */\nBaseRenderer.prototype._onWindowResize = function (originalHeight, originalFov) {\n  var _this = this;\n\n  var tanFOV = Math.tan(Math.PI / 180 * originalFov / 2);\n  return function (event) {\n    _this.camera.aspect = window.innerWidth / window.innerHeight;\n    _this.camera.fov = 360 / Math.PI * Math.atan(tanFOV * (window.innerHeight / originalHeight));\n\n    _this.camera.updateProjectionMatrix();\n    _this.renderer.setSize(window.innerWidth, window.innerHeight);\n  };\n};\n\nBaseRenderer.prototype._loadTextures = function () {\n  var _this2 = this;\n\n  return Promise.all(Object.entries(TEXTURES).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    return new Promise(function (resolve, reject) {\n      _this2.textureLoader.load(value, function (texture) {\n        resolve([key, texture]);\n      });\n    });\n  })).then(function (values) {\n    return Promise.resolve(new Map(values));\n  });\n};\n\nBaseRenderer.prototype._setupLightSources = function (textures) {\n  var ambientLight = new THREE.AmbientLight(0x404040);\n  var pointLight = new THREE.PointLight(0xFFFFFF, 1, 100, 2);\n  var lensFlare = new THREE.LensFlare(textures.get('lensflare'), 100, 0.0, THREE.AdditiveBlending, new THREE.Color(0xffff00));\n\n  this.scene.add(ambientLight);\n  this.scene.add(pointLight);\n  this.scene.add(lensFlare);\n\n  return [pointLight, lensFlare];\n};\n\nBaseRenderer.prototype._createSkyBox = function (textures) {\n\n  //This will add a starfield to the background of a scene\n  var vertices = [];\n\n  for (var i = 0; i < 20000; i++) {\n\n    var r = void 0;\n\n    // Generate stars that are at least 5 AU away\n    do {\n      r = new THREE.Vector3(THREE.Math.randFloatSpread(2000), THREE.Math.randFloatSpread(2000), THREE.Math.randFloatSpread(2000));\n    } while (r.lengthSq() < 100);\n\n    vertices.push(r.x, r.y, r.z);\n  }\n\n  var starsGeometry = new THREE.BufferGeometry();\n  starsGeometry.addAttribute('position', new THREE.BufferAttribute(Float32Array.from(vertices), 3));\n\n  var starsMaterial = new THREE.PointsMaterial({\n    color: 0x888888\n  });\n\n  var starField = new THREE.Points(starsGeometry, starsMaterial);\n  starField.matrixAutoUpdate = false;\n\n  return starField;\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYXBwL0Jhc2VSZW5kZXJlci5qcz8zMzEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuLy8gVGV4dHVyZXNcbmltcG9ydCBtYXBfc3VuIGZyb20gJy4uLy4uL2RvY3Mvc3VubWFwLmpwZyc7XG5pbXBvcnQgbWFwX21vb24gZnJvbSAnLi4vLi4vZG9jcy9tb29ubWFwLmpwZyc7XG5pbXBvcnQgbWFwX2VhcnRoIGZyb20gJy4uLy4uL2RvY3MvZWFydGhtYXAuanBnJztcbmltcG9ydCBtYXBfanVwaXRlciBmcm9tICcuLi8uLi9kb2NzL2p1cGl0ZXJtYXAuanBnJztcbmltcG9ydCBtYXBfc2F0dXJuIGZyb20gJy4uLy4uL2RvY3Mvc2F0dXJubWFwLmpwZyc7XG5pbXBvcnQgbWFwX21lcmN1cnkgZnJvbSAnLi4vLi4vZG9jcy9tZXJjdXJ5bWFwLmpwZyc7XG5pbXBvcnQgbWFwX3ZlbnVzIGZyb20gJy4uLy4uL2RvY3MvdmVudXNtYXAuanBnJztcbmltcG9ydCBtYXBfbWFycyBmcm9tICcuLi8uLi9kb2NzL21hcnNtYXAuanBnJztcbmltcG9ydCBtYXBfcGx1dG8gZnJvbSAnLi4vLi4vZG9jcy9wbHV0b21hcC5qcGcnO1xuaW1wb3J0IG1hcF9uZXB0dW5lIGZyb20gJy4uLy4uL2RvY3MvbmVwdHVuZW1hcC5qcGcnO1xuaW1wb3J0IG1hcF91cmFudXMgZnJvbSAnLi4vLi4vZG9jcy91cmFudXNtYXAuanBnJztcbmltcG9ydCBsZW5zZmxhcmUgZnJvbSAnLi4vLi4vZG9jcy9sZW5zZmxhcmUucG5nJztcblxuY29uc3QgVEVYVFVSRVMgPSB7XG4gIC8vJ3N1bic6IG1hcF9zdW4sXG4gICdlYXJ0aCc6IG1hcF9lYXJ0aCxcbiAgJ21vb24nOiBtYXBfbW9vbixcbiAgJ2p1cGl0ZXInOiBtYXBfanVwaXRlcixcbiAgJ3NhdHVybic6IG1hcF9zYXR1cm4sXG4gICdtZXJjdXJ5JzogbWFwX21lcmN1cnksXG4gICdtYXJzJzogbWFwX21hcnMsXG4gICd2ZW51cyc6IG1hcF92ZW51cyxcbiAgJ3BsdXRvJzogbWFwX3BsdXRvLFxuICAnbmVwdHVuZSc6IG1hcF9uZXB0dW5lLFxuICAndXJhbnVzJzogbWFwX3VyYW51cyxcbiAgJ2xlbnNmbGFyZSc6IGxlbnNmbGFyZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEJhc2VSZW5kZXJlcih0ZXh0dXJlTG9hZGVyKSB7XG4gIHRoaXMudGV4dHVyZUxvYWRlciA9IHRleHR1cmVMb2FkZXI7XG59O1xuXG4vKipcbiAqXG4gKi9cbkJhc2VSZW5kZXJlci5wcm90b3R5cGUuX29uV2luZG93UmVzaXplID0gZnVuY3Rpb24gKG9yaWdpbmFsSGVpZ2h0LCBvcmlnaW5hbEZvdikge1xuICBjb25zdCB0YW5GT1YgPSBNYXRoLnRhbigoKE1hdGguUEkgLyAxODApICogb3JpZ2luYWxGb3YgLyAyKSk7XG4gIHJldHVybiAoZXZlbnQpID0+IHtcbiAgICB0aGlzLmNhbWVyYS5hc3BlY3QgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB0aGlzLmNhbWVyYS5mb3YgPSAoMzYwIC8gTWF0aC5QSSkgKiBNYXRoLmF0YW4odGFuRk9WICogKHdpbmRvdy5pbm5lckhlaWdodCAvIG9yaWdpbmFsSGVpZ2h0KSk7XG5cbiAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICB9XG5cbn07XG5cbkJhc2VSZW5kZXJlci5wcm90b3R5cGUuX2xvYWRUZXh0dXJlcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5lbnRyaWVzKFRFWFRVUkVTKVxuICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgdGhpcy50ZXh0dXJlTG9hZGVyLmxvYWQodmFsdWUsXG4gICAgICAgICAgICAodGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKFtrZXksIHRleHR1cmVdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pKVxuICAgIC50aGVuKHZhbHVlcyA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBNYXAodmFsdWVzKSk7XG4gICAgfSk7XG59O1xuXG5CYXNlUmVuZGVyZXIucHJvdG90eXBlLl9zZXR1cExpZ2h0U291cmNlcyA9IGZ1bmN0aW9uICh0ZXh0dXJlcykge1xuICBjb25zdCBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NDA0MDQwKTtcbiAgY29uc3QgcG9pbnRMaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4RkZGRkZGLCAxLCAxMDAsIDIpO1xuICBjb25zdCBsZW5zRmxhcmUgPSBuZXcgVEhSRUUuTGVuc0ZsYXJlKHRleHR1cmVzLmdldCgnbGVuc2ZsYXJlJyksIDEwMCwgMC4wLCBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLCBuZXcgVEhSRUUuQ29sb3IoMHhmZmZmMDApKTtcblxuICB0aGlzLnNjZW5lLmFkZChhbWJpZW50TGlnaHQpO1xuICB0aGlzLnNjZW5lLmFkZChwb2ludExpZ2h0KTtcbiAgdGhpcy5zY2VuZS5hZGQobGVuc0ZsYXJlKTtcblxuICByZXR1cm4gW3BvaW50TGlnaHQsIGxlbnNGbGFyZV07XG59O1xuXG5CYXNlUmVuZGVyZXIucHJvdG90eXBlLl9jcmVhdGVTa3lCb3ggPSBmdW5jdGlvbiAodGV4dHVyZXMpIHtcblxuICAvL1RoaXMgd2lsbCBhZGQgYSBzdGFyZmllbGQgdG8gdGhlIGJhY2tncm91bmQgb2YgYSBzY2VuZVxuICBsZXQgdmVydGljZXMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IDIwMDAwOyBpKyspIHtcblxuICAgIGxldCByO1xuXG4gICAgLy8gR2VuZXJhdGUgc3RhcnMgdGhhdCBhcmUgYXQgbGVhc3QgNSBBVSBhd2F5XG4gICAgZG8ge1xuICAgICAgciA9IG5ldyBUSFJFRS5WZWN0b3IzKFxuICAgICAgICBUSFJFRS5NYXRoLnJhbmRGbG9hdFNwcmVhZCgyMDAwKSxcbiAgICAgICAgVEhSRUUuTWF0aC5yYW5kRmxvYXRTcHJlYWQoMjAwMCksXG4gICAgICAgIFRIUkVFLk1hdGgucmFuZEZsb2F0U3ByZWFkKDIwMDApKVxuICAgIH0gd2hpbGUgKHIubGVuZ3RoU3EoKSA8IDEwMClcblxuICAgIHZlcnRpY2VzLnB1c2goci54LCByLnksIHIueik7XG4gIH1cblxuICBsZXQgc3RhcnNHZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICBzdGFyc0dlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLFxuICAgIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoRmxvYXQzMkFycmF5LmZyb20odmVydGljZXMpLCAzKSk7XG5cbiAgbGV0IHN0YXJzTWF0ZXJpYWwgPSBuZXcgVEhSRUUuUG9pbnRzTWF0ZXJpYWwoe1xuICAgIGNvbG9yOiAweDg4ODg4OFxuICB9KVxuXG4gIGxldCBzdGFyRmllbGQgPSBuZXcgVEhSRUUuUG9pbnRzKHN0YXJzR2VvbWV0cnksIHN0YXJzTWF0ZXJpYWwpO1xuICBzdGFyRmllbGQubWF0cml4QXV0b1VwZGF0ZSA9IGZhbHNlO1xuXG4gIHJldHVybiBzdGFyRmllbGQ7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvQmFzZVJlbmRlcmVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQTJCQTtBQUNBO0FBaENBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 5:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Kepler elements taken from http://ssd.jpl.nasa.gov/txt/aprx_pos_planets.pdf\n * Planetary constants taken from http://www.braeunig.us/space/constant.htm\n *\n * All distances are scaled down by the AU to reduce the size of the numbers\n * throughout the simulation.\n */\n\nvar AU = exports.AU = 149.59787e9;\nvar PLANET_TYPE = exports.PLANET_TYPE = \"planet\";\nvar SHIP_TYPE = exports.SHIP_TYPE = \"ship\";\nvar ASTEROID_TYPE = exports.ASTEROID_TYPE = \"asteroid\";\n\nexports.default = {\n  \"sun\": {\n    type: PLANET_TYPE,\n    constants: {\n      u: 1.32712438e20 / Math.pow(AU, 3),\n      radius: 696e6 / AU\n    }\n  },\n  \"mercury\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 0.02203e15 / Math.pow(AU, 3),\n      radius: 2.4397e6 / AU,\n      rotation_period: 58.646, // days\n      axial_tilt: 0.034 },\n    kepler_elements: {\n      a: [0.38709843, 0.0],\n      e: [0.20563661, 0.00002123],\n      I: [7.00559432, -0.00590158],\n      L: [252.25166724, 149472.67486623],\n      w: [77.45771895, 0.15940013],\n      omega: [48.33961819, -0.12214182]\n    }\n  },\n  \"venus\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 0.3249e15 / Math.pow(AU, 3),\n      radius: 6.0518e6 / AU,\n      rotation_period: -243.025, // days (negative == retrograde)\n      axial_tilt: 177.36 },\n    kepler_elements: {\n      a: [0.72332102, -0.00000026],\n      e: [0.00676399, -0.00005107],\n      I: [3.39777545, 0.00043494],\n      L: [181.97970850, 58517.81560260],\n      w: [131.76755713, 0.05679648],\n      omega: [76.67261496, -0.27274174]\n    }\n  },\n\n  \"moon\": {\n    type: PLANET_TYPE,\n    primary: \"earth\",\n    constants: {\n      u: 4.902794e12 / Math.pow(AU, 3),\n      radius: 1738e3 / AU,\n      rotation_period: 27.321661,\n      axial_tilt: 6.687\n    },\n    kepler_elements: {\n      a: [0.00257, 0],\n      e: [0.0549, 0],\n      I: [5.145, 0],\n      // mean longitude,\n      L: [0, 500000],\n      // longitude of perihelion\n      w: [0, 0],\n      // longitude of the ascending node\n      omega: [0, 0]\n    }\n  },\n  \"earth\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 0.3986e15 / Math.pow(AU, 3),\n      radius: 6.3781e6 / AU,\n      rotation_period: 0.99726968,\n      axial_tilt: 23.4392811\n    },\n    kepler_elements: {\n      a: [1.00000018, -0.00000003],\n      e: [0.01673163, -0.00003661],\n      I: [-0.00054346, -0.01337178],\n      L: [100.46691572, 35999.37306329],\n      w: [102.93005885, 0.31795260],\n      omega: [-5.11260389, -0.24123856]\n    }\n  },\n  \"firefly\": {\n    type: SHIP_TYPE,\n    primary: \"earth\",\n    constants: {\n      radius: 100 / AU\n    },\n    kepler_elements: {\n      a: [(400e3 + 6.3781e6) / AU, 0],\n      e: [0, 0],\n      I: [0, 0],\n      L: [0, 50000],\n      w: [0, 0],\n      omega: [0, 0]\n    }\n  },\n  \"mars\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 0.04283e15 / Math.pow(AU, 3),\n      radius: 3.397e6 / AU,\n      rotation_period: 1.025957, // days\n      axial_tilt: 25.19 },\n    kepler_elements: {\n      a: [1.52371243, 0.00000097],\n      e: [0.09336511, 0.00009149],\n      I: [1.85181869, -0.00724757],\n      L: [-4.56813164, 19140.29934243],\n      w: [-23.91744784, 0.45223625],\n      omega: [49.71320984, -0.26852431]\n    }\n  },\n  \"jupiter\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 126.686e15 / Math.pow(AU, 3),\n      radius: 7.1492e7 / AU,\n      rotation_period: 0.413542, // days\n      axial_tilt: 3.13 },\n    kepler_elements: {\n      a: [5.20248019, -0.00002864],\n      e: [0.04853590, 0.00018026],\n      I: [1.29861416, -0.00322699],\n      L: [34.33479152, 3034.90371757],\n      w: [14.27495244, 0.18199196],\n      omega: [100.29282654, 0.13024619],\n      perturbations: {\n        b: -0.00012452,\n        c: 0.6064060,\n        s: -0.35635438,\n        f: 38.35125000\n      }\n    }\n  },\n  \"saturn\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 37.391e15 / Math.pow(AU, 3),\n      radius: 6.0268e7 / AU,\n      rotation_period: 0.439583, // days\n      axial_tilt: 26.73 },\n    kepler_elements: {\n      a: [9.54149883, -0.00003065],\n      e: [0.05550825, -0.00032044],\n      I: [2.49424102, 0.00451969],\n      L: [50.07571329, 1222.11494724],\n      w: [92.86136063, 0.54179478],\n      omega: [113.63998702, -0.25015002],\n      perturbations: {\n        b: 0.00025899,\n        c: -0.13434469,\n        s: 0.87320147,\n        f: 38.35125000\n      }\n    }\n  },\n  \"uranus\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 5.794e15 / Math.pow(AU, 3),\n      radius: 2.5559e7 / AU,\n      rotation_period: 0.71833, // days (negative == retrograde)\n      axial_tilt: 97.77 },\n    kepler_elements: {\n      a: [19.18797948, -0.00020455],\n      e: [0.04685740, -0.00001550],\n      I: [0.77298127, -0.00180155],\n      L: [314.20276625, 428.49512595],\n      w: [172.43404441, 0.09266985],\n      omega: [73.96250215, 0.05739699],\n      perturbations: {\n        b: 0.00058331,\n        c: -0.97731848,\n        s: 0.17689245,\n        f: 7.67025000\n      }\n    }\n  },\n  \"neptune\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 6.835e15 / Math.pow(AU, 3),\n      radius: 2.4764e7 / AU,\n      rotation_period: 0.6713, // days (negative == retrograde)\n      axial_tilt: 28.32 // relative to orbit\n    },\n    kepler_elements: {\n      a: [30.06952752, 0.00006447],\n      e: [0.00895439, 0.00000818],\n      I: [1.77005520, 0.00022400],\n      L: [304.22289287, 218.46515314],\n      w: [46.68158724, 0.01009938],\n      omega: [131.78635853, -0.00606302],\n      perturbations: {\n        b: -0.00041348,\n        c: 0.68346318,\n        s: -0.10162547,\n        f: 7.67025000\n      }\n    }\n  },\n  \"pluto\": {\n    type: PLANET_TYPE,\n    primary: \"sun\",\n    constants: {\n      u: 0.00083e15 / Math.pow(AU, 3),\n      radius: 1.195e6 / AU,\n      rotation_period: 6.387230, // days\n      axial_tilt: 122.53 },\n    kepler_elements: {\n      a: [39.48686035, 0.00449751],\n      e: [0.24885238, 0.00006016],\n      I: [17.14104260, 0.00000501],\n      L: [238.96535011, 145.18042903],\n      w: [224.09702598, -0.00968827],\n      omega: [110.30167986, -0.00809981],\n      perturbations: {\n        b: -0.01262724,\n        c: 0,\n        s: 0,\n        f: 0\n      }\n    }\n  }\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYXBwL0JvZGllcy5qcz85NWE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogS2VwbGVyIGVsZW1lbnRzIHRha2VuIGZyb20gaHR0cDovL3NzZC5qcGwubmFzYS5nb3YvdHh0L2FwcnhfcG9zX3BsYW5ldHMucGRmXG4gKiBQbGFuZXRhcnkgY29uc3RhbnRzIHRha2VuIGZyb20gaHR0cDovL3d3dy5icmFldW5pZy51cy9zcGFjZS9jb25zdGFudC5odG1cbiAqXG4gKiBBbGwgZGlzdGFuY2VzIGFyZSBzY2FsZWQgZG93biBieSB0aGUgQVUgdG8gcmVkdWNlIHRoZSBzaXplIG9mIHRoZSBudW1iZXJzXG4gKiB0aHJvdWdob3V0IHRoZSBzaW11bGF0aW9uLlxuICovXG5cbmV4cG9ydCBjb25zdCBBVSA9IDE0OS41OTc4N2U5O1xuZXhwb3J0IGNvbnN0IFBMQU5FVF9UWVBFID0gXCJwbGFuZXRcIjtcbmV4cG9ydCBjb25zdCBTSElQX1RZUEUgPSBcInNoaXBcIjtcbmV4cG9ydCBjb25zdCBBU1RFUk9JRF9UWVBFID0gXCJhc3Rlcm9pZFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIFwic3VuXCI6IHtcbiAgICB0eXBlOiBQTEFORVRfVFlQRSxcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHU6IDEuMzI3MTI0MzhlMjAgLyBNYXRoLnBvdyhBVSwgMyksXG4gICAgICByYWRpdXM6IDY5NmU2IC8gQVUsXG4gICAgfVxuICB9LFxuICBcIm1lcmN1cnlcIjoge1xuICAgIHR5cGU6IFBMQU5FVF9UWVBFLFxuICAgIHByaW1hcnk6IFwic3VuXCIsXG4gICAgY29uc3RhbnRzOiB7XG4gICAgICB1OiAwLjAyMjAzZTE1IC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiAyLjQzOTdlNiAvIEFVLFxuICAgICAgcm90YXRpb25fcGVyaW9kOiA1OC42NDYsIC8vIGRheXNcbiAgICAgIGF4aWFsX3RpbHQ6IDAuMDM0LCAvLyByZWxhdGl2ZSB0byBvcmJpdFxuICAgIH0sXG4gICAga2VwbGVyX2VsZW1lbnRzOiB7XG4gICAgICBhOiBbMC4zODcwOTg0MywgMC4wXSxcbiAgICAgIGU6IFswLjIwNTYzNjYxLCAwLjAwMDAyMTIzXSxcbiAgICAgIEk6IFs3LjAwNTU5NDMyLCAtMC4wMDU5MDE1OF0sXG4gICAgICBMOiBbMjUyLjI1MTY2NzI0LCAxNDk0NzIuNjc0ODY2MjNdLFxuICAgICAgdzogWzc3LjQ1NzcxODk1LCAwLjE1OTQwMDEzXSxcbiAgICAgIG9tZWdhOiBbNDguMzM5NjE4MTksIC0wLjEyMjE0MTgyXSxcbiAgICB9XG4gIH0sXG4gIFwidmVudXNcIjoge1xuICAgIHR5cGU6IFBMQU5FVF9UWVBFLFxuICAgIHByaW1hcnk6IFwic3VuXCIsXG4gICAgY29uc3RhbnRzOiB7XG4gICAgICB1OiAwLjMyNDllMTUgLyBNYXRoLnBvdyhBVSwgMyksXG4gICAgICByYWRpdXM6IDYuMDUxOGU2IC8gQVUsXG4gICAgICByb3RhdGlvbl9wZXJpb2Q6IC0yNDMuMDI1LCAvLyBkYXlzIChuZWdhdGl2ZSA9PSByZXRyb2dyYWRlKVxuICAgICAgYXhpYWxfdGlsdDogMTc3LjM2LCAvLyByZWxhdGl2ZSB0byBvcmJpdFxuICAgIH0sXG4gICAga2VwbGVyX2VsZW1lbnRzOiB7XG4gICAgICBhOiBbMC43MjMzMjEwMiwgLTAuMDAwMDAwMjZdLFxuICAgICAgZTogWzAuMDA2NzYzOTksIC0wLjAwMDA1MTA3XSxcbiAgICAgIEk6IFszLjM5Nzc3NTQ1LCAwLjAwMDQzNDk0XSxcbiAgICAgIEw6IFsxODEuOTc5NzA4NTAsIDU4NTE3LjgxNTYwMjYwXSxcbiAgICAgIHc6IFsxMzEuNzY3NTU3MTMsIDAuMDU2Nzk2NDhdLFxuICAgICAgb21lZ2E6IFs3Ni42NzI2MTQ5NiwgLTAuMjcyNzQxNzRdLFxuICAgIH1cbiAgfSxcblxuICBcIm1vb25cIjoge1xuICAgIHR5cGU6IFBMQU5FVF9UWVBFLFxuICAgIHByaW1hcnk6IFwiZWFydGhcIixcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHU6IDQuOTAyNzk0ZTEyIC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiAxNzM4ZTMgLyBBVSxcbiAgICAgIHJvdGF0aW9uX3BlcmlvZDogMjcuMzIxNjYxLFxuICAgICAgYXhpYWxfdGlsdDogNi42ODdcbiAgICB9LFxuICAgIGtlcGxlcl9lbGVtZW50czoge1xuICAgICAgYTogWzAuMDAyNTcsIDBdLFxuICAgICAgZTogWzAuMDU0OSwgMF0sXG4gICAgICBJOiBbNS4xNDUsIDBdLFxuICAgICAgLy8gbWVhbiBsb25naXR1ZGUsXG4gICAgICBMOiBbMCwgNTAwMDAwXSxcbiAgICAgIC8vIGxvbmdpdHVkZSBvZiBwZXJpaGVsaW9uXG4gICAgICB3OiBbMCwgMF0sXG4gICAgICAvLyBsb25naXR1ZGUgb2YgdGhlIGFzY2VuZGluZyBub2RlXG4gICAgICBvbWVnYTogWzAsIDBdLFxuICAgIH1cbiAgfSxcbiAgXCJlYXJ0aFwiOiB7XG4gICAgdHlwZTogUExBTkVUX1RZUEUsXG4gICAgcHJpbWFyeTogXCJzdW5cIixcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHU6IDAuMzk4NmUxNSAvIE1hdGgucG93KEFVLCAzKSxcbiAgICAgIHJhZGl1czogNi4zNzgxZTYgLyBBVSxcbiAgICAgIHJvdGF0aW9uX3BlcmlvZDogMC45OTcyNjk2OCxcbiAgICAgIGF4aWFsX3RpbHQ6IDIzLjQzOTI4MTEsXG4gICAgfSxcbiAgICBrZXBsZXJfZWxlbWVudHM6IHtcbiAgICAgIGE6IFsxLjAwMDAwMDE4LCAtMC4wMDAwMDAwM10sXG4gICAgICBlOiBbMC4wMTY3MzE2MywgLTAuMDAwMDM2NjFdLFxuICAgICAgSTogWy0wLjAwMDU0MzQ2LCAtMC4wMTMzNzE3OF0sXG4gICAgICBMOiBbMTAwLjQ2NjkxNTcyLCAzNTk5OS4zNzMwNjMyOV0sXG4gICAgICB3OiBbMTAyLjkzMDA1ODg1LCAwLjMxNzk1MjYwXSxcbiAgICAgIG9tZWdhOiBbLTUuMTEyNjAzODksIC0wLjI0MTIzODU2XSxcbiAgICB9XG4gIH0sXG4gIFwiZmlyZWZseVwiOiB7XG4gICAgdHlwZTogU0hJUF9UWVBFLFxuICAgIHByaW1hcnk6IFwiZWFydGhcIixcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHJhZGl1czogMTAwIC8gQVUsXG4gICAgfSxcbiAgICBrZXBsZXJfZWxlbWVudHM6IHtcbiAgICAgIGE6IFsoNDAwZTMgKyA2LjM3ODFlNikgLyBBVSwgMF0sXG4gICAgICBlOiBbMCwgMF0sXG4gICAgICBJOiBbMCwgMF0sXG4gICAgICBMOiBbMCwgNTAwMDBdLFxuICAgICAgdzogWzAsIDBdLFxuICAgICAgb21lZ2E6IFswLCAwXSxcbiAgICB9LFxuICB9LFxuICBcIm1hcnNcIjoge1xuICAgIHR5cGU6IFBMQU5FVF9UWVBFLFxuICAgIHByaW1hcnk6IFwic3VuXCIsXG4gICAgY29uc3RhbnRzOiB7XG4gICAgICB1OiAwLjA0MjgzZTE1IC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiAzLjM5N2U2IC8gQVUsXG4gICAgICByb3RhdGlvbl9wZXJpb2Q6IDEuMDI1OTU3LCAvLyBkYXlzXG4gICAgICBheGlhbF90aWx0OiAyNS4xOSwgLy8gcmVsYXRpdmUgdG8gb3JiaXRcbiAgICB9LFxuICAgIGtlcGxlcl9lbGVtZW50czoge1xuICAgICAgYTogWzEuNTIzNzEyNDMsIDAuMDAwMDAwOTddLFxuICAgICAgZTogWzAuMDkzMzY1MTEsIDAuMDAwMDkxNDldLFxuICAgICAgSTogWzEuODUxODE4NjksIC0wLjAwNzI0NzU3XSxcbiAgICAgIEw6IFstNC41NjgxMzE2NCwgMTkxNDAuMjk5MzQyNDNdLFxuICAgICAgdzogWy0yMy45MTc0NDc4NCwgMC40NTIyMzYyNV0sXG4gICAgICBvbWVnYTogWzQ5LjcxMzIwOTg0LCAtMC4yNjg1MjQzMV0sXG4gICAgfVxuICB9LFxuICBcImp1cGl0ZXJcIjoge1xuICAgIHR5cGU6IFBMQU5FVF9UWVBFLFxuICAgIHByaW1hcnk6IFwic3VuXCIsXG4gICAgY29uc3RhbnRzOiB7XG4gICAgICB1OiAxMjYuNjg2ZTE1IC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiA3LjE0OTJlNyAvIEFVLFxuICAgICAgcm90YXRpb25fcGVyaW9kOiAwLjQxMzU0MiwgLy8gZGF5c1xuICAgICAgYXhpYWxfdGlsdDogMy4xMywgLy8gcmVsYXRpdmUgdG8gb3JiaXRcbiAgICB9LFxuICAgIGtlcGxlcl9lbGVtZW50czoge1xuICAgICAgYTogWzUuMjAyNDgwMTksIC0wLjAwMDAyODY0XSxcbiAgICAgIGU6IFswLjA0ODUzNTkwLCAwLjAwMDE4MDI2XSxcbiAgICAgIEk6IFsxLjI5ODYxNDE2LCAtMC4wMDMyMjY5OV0sXG4gICAgICBMOiBbMzQuMzM0NzkxNTIsIDMwMzQuOTAzNzE3NTddLFxuICAgICAgdzogWzE0LjI3NDk1MjQ0LCAwLjE4MTk5MTk2XSxcbiAgICAgIG9tZWdhOiBbMTAwLjI5MjgyNjU0LCAwLjEzMDI0NjE5XSxcbiAgICAgIHBlcnR1cmJhdGlvbnM6IHtcbiAgICAgICAgYjogLTAuMDAwMTI0NTIsXG4gICAgICAgIGM6IDAuNjA2NDA2MCxcbiAgICAgICAgczogLTAuMzU2MzU0MzgsXG4gICAgICAgIGY6IDM4LjM1MTI1MDAwXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBcInNhdHVyblwiOiB7XG4gICAgdHlwZTogUExBTkVUX1RZUEUsXG4gICAgcHJpbWFyeTogXCJzdW5cIixcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHU6IDM3LjM5MWUxNSAvIE1hdGgucG93KEFVLCAzKSxcbiAgICAgIHJhZGl1czogNi4wMjY4ZTcgLyBBVSxcbiAgICAgIHJvdGF0aW9uX3BlcmlvZDogMC40Mzk1ODMsIC8vIGRheXNcbiAgICAgIGF4aWFsX3RpbHQ6IDI2LjczLCAvLyByZWxhdGl2ZSB0byBvcmJpdFxuICAgIH0sXG4gICAga2VwbGVyX2VsZW1lbnRzOiB7XG4gICAgICBhOiBbOS41NDE0OTg4MywgLTAuMDAwMDMwNjVdLFxuICAgICAgZTogWzAuMDU1NTA4MjUsIC0wLjAwMDMyMDQ0XSxcbiAgICAgIEk6IFsyLjQ5NDI0MTAyLCAwLjAwNDUxOTY5XSxcbiAgICAgIEw6IFs1MC4wNzU3MTMyOSwgMTIyMi4xMTQ5NDcyNF0sXG4gICAgICB3OiBbOTIuODYxMzYwNjMsIDAuNTQxNzk0NzhdLFxuICAgICAgb21lZ2E6IFsxMTMuNjM5OTg3MDIsIC0wLjI1MDE1MDAyXSxcbiAgICAgIHBlcnR1cmJhdGlvbnM6IHtcbiAgICAgICAgYjogMC4wMDAyNTg5OSxcbiAgICAgICAgYzogLTAuMTM0MzQ0NjksXG4gICAgICAgIHM6IDAuODczMjAxNDcsXG4gICAgICAgIGY6IDM4LjM1MTI1MDAwXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBcInVyYW51c1wiOiB7XG4gICAgdHlwZTogUExBTkVUX1RZUEUsXG4gICAgcHJpbWFyeTogXCJzdW5cIixcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHU6IDUuNzk0ZTE1IC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiAyLjU1NTllNyAvIEFVLFxuICAgICAgcm90YXRpb25fcGVyaW9kOiAwLjcxODMzLCAvLyBkYXlzIChuZWdhdGl2ZSA9PSByZXRyb2dyYWRlKVxuICAgICAgYXhpYWxfdGlsdDogOTcuNzcsIC8vIHJlbGF0aXZlIHRvIG9yYml0XG4gICAgfSxcbiAgICBrZXBsZXJfZWxlbWVudHM6IHtcbiAgICAgIGE6IFsxOS4xODc5Nzk0OCwgLTAuMDAwMjA0NTVdLFxuICAgICAgZTogWzAuMDQ2ODU3NDAsIC0wLjAwMDAxNTUwXSxcbiAgICAgIEk6IFswLjc3Mjk4MTI3LCAtMC4wMDE4MDE1NV0sXG4gICAgICBMOiBbMzE0LjIwMjc2NjI1LCA0MjguNDk1MTI1OTVdLFxuICAgICAgdzogWzE3Mi40MzQwNDQ0MSwgMC4wOTI2Njk4NV0sXG4gICAgICBvbWVnYTogWzczLjk2MjUwMjE1LCAwLjA1NzM5Njk5XSxcbiAgICAgIHBlcnR1cmJhdGlvbnM6IHtcbiAgICAgICAgYjogMC4wMDA1ODMzMSxcbiAgICAgICAgYzogLTAuOTc3MzE4NDgsXG4gICAgICAgIHM6IDAuMTc2ODkyNDUsXG4gICAgICAgIGY6IDcuNjcwMjUwMDBcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIFwibmVwdHVuZVwiOiB7XG4gICAgdHlwZTogUExBTkVUX1RZUEUsXG4gICAgcHJpbWFyeTogXCJzdW5cIixcbiAgICBjb25zdGFudHM6IHtcbiAgICAgIHU6IDYuODM1ZTE1IC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiAyLjQ3NjRlNyAvIEFVLFxuICAgICAgcm90YXRpb25fcGVyaW9kOiAwLjY3MTMsIC8vIGRheXMgKG5lZ2F0aXZlID09IHJldHJvZ3JhZGUpXG4gICAgICBheGlhbF90aWx0OiAyOC4zMiAvLyByZWxhdGl2ZSB0byBvcmJpdFxuICAgIH0sXG4gICAga2VwbGVyX2VsZW1lbnRzOiB7XG4gICAgICBhOiBbMzAuMDY5NTI3NTIsIDAuMDAwMDY0NDddLFxuICAgICAgZTogWzAuMDA4OTU0MzksIDAuMDAwMDA4MThdLFxuICAgICAgSTogWzEuNzcwMDU1MjAsIDAuMDAwMjI0MDBdLFxuICAgICAgTDogWzMwNC4yMjI4OTI4NywgMjE4LjQ2NTE1MzE0XSxcbiAgICAgIHc6IFs0Ni42ODE1ODcyNCwgMC4wMTAwOTkzOF0sXG4gICAgICBvbWVnYTogWzEzMS43ODYzNTg1MywgLTAuMDA2MDYzMDJdLFxuICAgICAgcGVydHVyYmF0aW9uczoge1xuICAgICAgICBiOiAtMC4wMDA0MTM0OCxcbiAgICAgICAgYzogMC42ODM0NjMxOCxcbiAgICAgICAgczogLTAuMTAxNjI1NDcsXG4gICAgICAgIGY6IDcuNjcwMjUwMDBcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIFwicGx1dG9cIjoge1xuICAgIHR5cGU6IFBMQU5FVF9UWVBFLFxuICAgIHByaW1hcnk6IFwic3VuXCIsXG4gICAgY29uc3RhbnRzOiB7XG4gICAgICB1OiAwLjAwMDgzZTE1IC8gTWF0aC5wb3coQVUsIDMpLFxuICAgICAgcmFkaXVzOiAxLjE5NWU2IC8gQVUsXG4gICAgICByb3RhdGlvbl9wZXJpb2Q6IDYuMzg3MjMwLCAvLyBkYXlzXG4gICAgICBheGlhbF90aWx0OiAxMjIuNTMsIC8vIHJlbGF0aXZlIHRvIG9yYml0XG4gICAgfSxcbiAgICBrZXBsZXJfZWxlbWVudHM6IHtcbiAgICAgIGE6IFszOS40ODY4NjAzNSwgMC4wMDQ0OTc1MV0sXG4gICAgICBlOiBbMC4yNDg4NTIzOCwgMC4wMDAwNjAxNl0sXG4gICAgICBJOiBbMTcuMTQxMDQyNjAsIDAuMDAwMDA1MDFdLFxuICAgICAgTDogWzIzOC45NjUzNTAxMSwgMTQ1LjE4MDQyOTAzXSxcbiAgICAgIHc6IFsyMjQuMDk3MDI1OTgsIC0wLjAwOTY4ODI3XSxcbiAgICAgIG9tZWdhOiBbMTEwLjMwMTY3OTg2LCAtMC4wMDgwOTk4MV0sXG4gICAgICBwZXJ0dXJiYXRpb25zOiB7XG4gICAgICAgIGI6IC0wLjAxMjYyNzI0LFxuICAgICAgICBjOiAwLFxuICAgICAgICBzOiAwLFxuICAgICAgICBmOiAwXG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9hcHAvQm9kaWVzLmpzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFUQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVRBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVRBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFUQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBTkE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVRBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVBBO0FBVEE7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUEE7QUFUQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFQQTtBQVRBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUEE7QUFUQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFQQTtBQVRBO0FBck5BIiwic291cmNlUm9vdCI6IiJ9");

/***/ })

},[137]);